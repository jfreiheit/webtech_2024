
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Lehrmaterial, Übungen, Aufgaben und Hilfen für WebTech">
      
      
        <meta name="author" content="Jörn Freiheit">
      
      
        <link rel="canonical" href="http://freiheit.f4.htw-berlin.de/webtech/backend/">
      
      
        <link rel="prev" href="../signals/">
      
      
        <link rel="next" href="../backend_pg/">
      
      
      <link rel="icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Backend (MongoDB) - WebTech</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rest-api" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href=".." title="WebTech" class="md-header__button md-logo" aria-label="WebTech" data-md-component="logo">
      
  <img src="../img/fiw.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WebTech
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Backend (MongoDB)
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" title="Zurücksetzen" aria-label="Zurücksetzen" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/jfreiheit/webtech" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    webtech
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="WebTech" class="md-nav__button md-logo" aria-label="WebTech" data-md-component="logo">
      
  <img src="../img/fiw.jpg" alt="logo">

    </a>
    WebTech
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jfreiheit/webtech" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    webtech
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../einfuehrung/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Einführung
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../html/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTML
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../css/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSS - Selektoren und Eigenschaften
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../rwd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSS - Responsive Web-Design
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../javascript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaScript - DOM und Arrays
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../objekte/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaScript - Objekte und JSON
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../promises/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaScript - Promises und Fetch
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../angular/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Angular - Komponenten
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Angular - Templates
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../routing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Angular -  Routing und Services
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../signals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Angular - Datenfluss und Signals
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Backend (MongoDB)
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Backend (MongoDB)
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rest" class="md-nav__link">
    <span class="md-ellipsis">
      REST
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ein-nodejs-projekt-mit-express" class="md-nav__link">
    <span class="md-ellipsis">
      Ein Node.js-Projekt mit Express
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ein Node.js-Projekt mit Express">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#router" class="md-nav__link">
    <span class="md-ellipsis">
      Router
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starten-des-projektes" class="md-nav__link">
    <span class="md-ellipsis">
      Starten des Projektes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routen" class="md-nav__link">
    <span class="md-ellipsis">
      Routen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongodb" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MongoDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mongodb-lokal-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB lokal installieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-atlas-nutzen" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB Atlas nutzen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-compass-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB Compass installieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongo-shell-verwenden" class="md-nav__link">
    <span class="md-ellipsis">
      Mongo-Shell verwenden
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#befullen-der-datenbank-members" class="md-nav__link">
    <span class="md-ellipsis">
      Befüllen der Datenbank members
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Befüllen der Datenbank members">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#befullen-in-compass" class="md-nav__link">
    <span class="md-ellipsis">
      Befüllen in Compass
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#befullen-in-atlas" class="md-nav__link">
    <span class="md-ellipsis">
      Befüllen in Atlas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#befullen-in-der-mongo-shell" class="md-nav__link">
    <span class="md-ellipsis">
      Befüllen in der Mongo-Shell
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-in-vscode" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB in VSCode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#node-projekt-mit-mongodb-verbinden" class="md-nav__link">
    <span class="md-ellipsis">
      Node-Projekt mit MongoDB verbinden
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Node-Projekt mit MongoDB verbinden">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dotenv-fur-sichere-zugangsdaten" class="md-nav__link">
    <span class="md-ellipsis">
      Dotenv für sichere Zugangsdaten
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ein-model-erstellen" class="md-nav__link">
    <span class="md-ellipsis">
      Ein Model erstellen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zugriffe-auf-die-datenbank" class="md-nav__link">
    <span class="md-ellipsis">
      Zugriffe auf die Datenbank
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Zugriffe auf die Datenbank">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#r-read-all" class="md-nav__link">
    <span class="md-ellipsis">
      R - read all
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-create" class="md-nav__link">
    <span class="md-ellipsis">
      C - create
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r-read-one" class="md-nav__link">
    <span class="md-ellipsis">
      R - read one
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#u-update" class="md-nav__link">
    <span class="md-ellipsis">
      U - update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-delete-one" class="md-nav__link">
    <span class="md-ellipsis">
      D - delete one
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cross-origin-resource-sharing-cors" class="md-nav__link">
    <span class="md-ellipsis">
      Cross-Origin Resource Sharing (CORS)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../backend_pg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backend (PostgreSQL)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../fe-be-anbindung/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Front- & Backend - Anbindung
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../guards/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Front- & Backend - Guards
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Front- & Backend - Deployment
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../uebungen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Übungen
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Werkzeuge
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rest" class="md-nav__link">
    <span class="md-ellipsis">
      REST
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ein-nodejs-projekt-mit-express" class="md-nav__link">
    <span class="md-ellipsis">
      Ein Node.js-Projekt mit Express
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ein Node.js-Projekt mit Express">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#router" class="md-nav__link">
    <span class="md-ellipsis">
      Router
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starten-des-projektes" class="md-nav__link">
    <span class="md-ellipsis">
      Starten des Projektes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routen" class="md-nav__link">
    <span class="md-ellipsis">
      Routen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongodb" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MongoDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mongodb-lokal-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB lokal installieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-atlas-nutzen" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB Atlas nutzen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-compass-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB Compass installieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongo-shell-verwenden" class="md-nav__link">
    <span class="md-ellipsis">
      Mongo-Shell verwenden
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#befullen-der-datenbank-members" class="md-nav__link">
    <span class="md-ellipsis">
      Befüllen der Datenbank members
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Befüllen der Datenbank members">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#befullen-in-compass" class="md-nav__link">
    <span class="md-ellipsis">
      Befüllen in Compass
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#befullen-in-atlas" class="md-nav__link">
    <span class="md-ellipsis">
      Befüllen in Atlas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#befullen-in-der-mongo-shell" class="md-nav__link">
    <span class="md-ellipsis">
      Befüllen in der Mongo-Shell
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-in-vscode" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB in VSCode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#node-projekt-mit-mongodb-verbinden" class="md-nav__link">
    <span class="md-ellipsis">
      Node-Projekt mit MongoDB verbinden
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Node-Projekt mit MongoDB verbinden">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dotenv-fur-sichere-zugangsdaten" class="md-nav__link">
    <span class="md-ellipsis">
      Dotenv für sichere Zugangsdaten
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ein-model-erstellen" class="md-nav__link">
    <span class="md-ellipsis">
      Ein Model erstellen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zugriffe-auf-die-datenbank" class="md-nav__link">
    <span class="md-ellipsis">
      Zugriffe auf die Datenbank
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Zugriffe auf die Datenbank">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#r-read-all" class="md-nav__link">
    <span class="md-ellipsis">
      R - read all
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-create" class="md-nav__link">
    <span class="md-ellipsis">
      C - create
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r-read-one" class="md-nav__link">
    <span class="md-ellipsis">
      R - read one
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#u-update" class="md-nav__link">
    <span class="md-ellipsis">
      U - update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-delete-one" class="md-nav__link">
    <span class="md-ellipsis">
      D - delete one
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cross-origin-resource-sharing-cors" class="md-nav__link">
    <span class="md-ellipsis">
      Cross-Origin Resource Sharing (CORS)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="rest-api">REST-API<a class="headerlink" href="#rest-api" title="Permanent link">&para;</a></h1>
<p>Die wesentlichsten Konzepte, wie Komponenten, Services und Routing für Angular-Projekte haben wir bereits kennengelernt. Ehe wir uns weiter mit dem Frontend beschäftigen, erstellen wir einen Server, der uns die Daten liefert. Derzeit haben wir unsere Mockup-Daten noch clientseitig von einem Service verwalten lassen. Das wollen wir nun ändern. Die Daten speichern wir in einer Datenbank und stellen sie über eine REST-API bereit. </p>
<h2 id="rest">REST<a class="headerlink" href="#rest" title="Permanent link">&para;</a></h2>
<p>Für diese Datenbank stellen wir die Implementierung einer Schnittstelle bereit, so dass wir die wesentlichen Datenbankanfragen darüber ausführen können. Diese wesentlichen Datenbankfragen werden mit <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> abgekürzt, für <strong>C</strong>reate, <strong>R</strong>ead, <strong>U</strong>pdate und <strong>D</strong>elete. Das bedeutet, wir implementieren Funktionalitäten, mit denen wir einen neuen Datensatz in die Datenbank einfügen (<em>create</em>), aus der Datenbank auslesen (<em>read</em>), in der Datenbank aktualisieren (<em>update</em>) und aus der Datenbank löschen (<em>delete</em>) können. </p>
<p>Die Schnittstelle, die wir implementieren, ist eine sogenannte <a href="https://www.redhat.com/de/topics/api/what-is-a-rest-api">REST-API</a>. <em>REST</em> steht für <a href="https://de.wikipedia.org/wiki/Representational_State_Transfer"><em>Representational State Transfer</em></a> und basiert auf einigen wenigen Prinzipien:</p>
<ol>
<li>Alles wird als eine <em>Ressource</em> betrachtet, z.B. <code>book</code>.</li>
<li>Jede Ressource ist durch <em>URIs</em> (<em>Uniform Resource Identifiers</em>) eindeutig identifizierbar, z.B. <code>http://localhost/books</code>.</li>
<li>Es werden die <a href="https://de.wikipedia.org/wiki/Hypertext_Transfer_Protocol#HTTP-Anfragemethoden">Standard-HTTP-Methoden</a> verwendet, also <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>UPDATE</code>.  </li>
<li>Ressourcen können in verschiedenen Formaten vorliegen, z.B. in <a href="https://html.spec.whatwg.org/multipage/">HTML</a>, <a href="https://www.w3.org/TR/xml/">XML</a>, <a href="https://jsonapi.org/format/">JSON</a>, </li>
<li>Die Kommunikation ist <em>zustandslos</em>. Jede einzelne HTTP-Anfrage wird komplett isoliert bearbeitet. Es gibt keinerlei Anfragehistorie. </li>
</ol>
<p>Das bedeutet, wir erstellen ein Backend (einen REST-Server), an den HTTP-Anfragen mit der eindeutig identifizierbaren Ressource gestellt werden. Das Backend erstellt daraus die entsprechende SQL-Query. Das Resultat der Datenbankanfrage wird im <code>JSON</code>- oder <code>HTML</code>- oder <code>XML</code>- oder in einem anderen Format bereitsgestellt.</p>
<p><img alt="restapi" src="../files/61_restapi.png" /></p>
<p>Prinzipiell gibt es also ein <em>Mapping</em>  von HTTP-Anfragen auf SQL-Anfragen:</p>
<table>
<thead>
<tr>
<th>CRUD</th>
<th>SQL</th>
<th>MongoDB</th>
<th>HTTP</th>
</tr>
</thead>
<tbody>
<tr>
<td>create</td>
<td>INSERT</td>
<td>insertOne(), insertMany()</td>
<td>POST</td>
</tr>
<tr>
<td>read</td>
<td>SELECT</td>
<td>findOne(), find()</td>
<td>GET</td>
</tr>
<tr>
<td>update</td>
<td>UPDATE</td>
<td>updateOne(), updateMany()</td>
<td>PUT (oder PATCH)</td>
</tr>
<tr>
<td>delete</td>
<td>DELETE</td>
<td>deleteOne(), deleteMany()</td>
<td>DELETE</td>
</tr>
</tbody>
</table>
<p>Zur Unterscheidung zwischen <code>PUT</code> und <code>PATCH</code> siehe z.B. <a href="https://www.geeksforgeeks.org/difference-between-put-and-patch-request/">hier</a> oder <a href="https://stackoverflow.com/questions/21660791/what-is-the-main-difference-between-patch-and-put-request">hier</a>.
Wir wollen uns ein Backend erstellen, über das wir unsere Daten verwalten. Dazu überlegen wir uns zunächst ein paar sogenannte <em>Endpunkte</em> (siehe Prinzipien von REST oben) und die Zugriffsmethoden, mit denen wir auf unsere Daten zugreifen wollen.</p>
<table>
<thead>
<tr>
<th> Methode</th>
<th> URL</th>
<th> Bedeutung</th>
</tr>
</thead>
<tbody>
<tr>
<td> GET</td>
<td> /members</td>
<td> hole alle Datensätze</td>
</tr>
<tr>
<td> GET</td>
<td> /members/11</td>
<td>hole den Datensatz mit der id=11</td>
</tr>
<tr>
<td> POST</td>
<td> /members</td>
<td> füge einen neuen Datensatz hinzu</td>
</tr>
<tr>
<td> PUT</td>
<td> /members/11</td>
<td> ändere den Datensatz mit der id=11</td>
</tr>
<tr>
<td> DELETE</td>
<td> /members/11</td>
<td> lösche den Datensatz mit der id=11</td>
</tr>
<tr>
<td> DELETE</td>
<td> /members</td>
<td> lösche alle Datensätze</td>
</tr>
</tbody>
</table>
<p>Der Wert der <code>id</code> ist natürlich nur ein Beispiel. Es soll für alle <code>id</code>-Werte funktionieren, die in unserem Datensatz enthalten sind. </p>
<h2 id="ein-nodejs-projekt-mit-express">Ein Node.js-Projekt mit Express<a class="headerlink" href="#ein-nodejs-projekt-mit-express" title="Permanent link">&para;</a></h2>
<p>Wir starten damit, uns ein <code>node.js</code>-Projekt zu erstellen. Dazu erstellen wir uns zunächst einen Ordner <code>backend</code>, wechseln in diesen Ordner und führen dann <code>npm init</code> aus:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>mkdir<span class="w"> </span>backend
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">cd</span><span class="w"> </span>backend
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>npm<span class="w"> </span>init
</span></code></pre></div>
<p>Sie werden ein paar Sachen gefragt. Im Prinzip können Sie immer <code>Enter</code> drücken:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>This<span class="w"> </span>utility<span class="w"> </span>will<span class="w"> </span>walk<span class="w"> </span>you<span class="w"> </span>through<span class="w"> </span>creating<span class="w"> </span>a<span class="w"> </span>package.json<span class="w"> </span>file.
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>It<span class="w"> </span>only<span class="w"> </span>covers<span class="w"> </span>the<span class="w"> </span>most<span class="w"> </span>common<span class="w"> </span>items,<span class="w"> </span>and<span class="w"> </span>tries<span class="w"> </span>to<span class="w"> </span>guess<span class="w"> </span>sensible<span class="w"> </span>defaults.
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>See<span class="w"> </span><span class="sb">`</span>npm<span class="w"> </span><span class="nb">help</span><span class="w"> </span>init<span class="sb">`</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>definitive<span class="w"> </span>documentation<span class="w"> </span>on<span class="w"> </span>these<span class="w"> </span>fields
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>and<span class="w"> </span>exactly<span class="w"> </span>what<span class="w"> </span>they<span class="w"> </span><span class="k">do</span>.
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>Use<span class="w"> </span><span class="sb">`</span>npm<span class="w"> </span>install<span class="w"> </span>&lt;pkg&gt;<span class="sb">`</span><span class="w"> </span>afterwards<span class="w"> </span>to<span class="w"> </span>install<span class="w"> </span>a<span class="w"> </span>package<span class="w"> </span>and
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>save<span class="w"> </span>it<span class="w"> </span>as<span class="w"> </span>a<span class="w"> </span>dependency<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>package.json<span class="w"> </span>file.
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>Press<span class="w"> </span>^C<span class="w"> </span>at<span class="w"> </span>any<span class="w"> </span><span class="nb">time</span><span class="w"> </span>to<span class="w"> </span>quit.
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>package<span class="w"> </span>name:<span class="w"> </span><span class="o">(</span>backend<span class="o">)</span><span class="w"> </span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>version:<span class="w"> </span><span class="o">(</span><span class="m">1</span>.0.0<span class="o">)</span><span class="w"> </span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>description:<span class="w"> </span>Backend<span class="w"> </span>REST-API
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>entry<span class="w"> </span>point:<span class="w"> </span><span class="o">(</span>index.js<span class="o">)</span><span class="w"> </span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="nb">test</span><span class="w"> </span>command:<span class="w"> </span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>git<span class="w"> </span>repository:<span class="w"> </span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>keywords:<span class="w"> </span>restapi,<span class="w"> </span>backend
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>author:<span class="w"> </span>J.<span class="w"> </span>Freiheit
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>license:<span class="w"> </span><span class="o">(</span>ISC<span class="o">)</span><span class="w"> </span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>About<span class="w"> </span>to<span class="w"> </span>write<span class="w"> </span>to<span class="w"> </span>/Users/jornfreiheit/WebTech/backend/package.json:
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="o">{</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">  </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;backend&quot;</span>,
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">  </span><span class="s2">&quot;version&quot;</span>:<span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span>,
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">  </span><span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="s2">&quot;Backend REST-API&quot;</span>,
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">  </span><span class="s2">&quot;main&quot;</span>:<span class="w"> </span><span class="s2">&quot;index.js&quot;</span>,
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">  </span><span class="s2">&quot;scripts&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">    </span><span class="s2">&quot;test&quot;</span>:<span class="w"> </span><span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">  </span><span class="o">}</span>,
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">  </span><span class="s2">&quot;keywords&quot;</span>:<span class="w"> </span><span class="o">[</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">    </span><span class="s2">&quot;restapi&quot;</span>,
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">    </span><span class="s2">&quot;backend&quot;</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="w">  </span><span class="o">]</span>,
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">  </span><span class="s2">&quot;author&quot;</span>:<span class="w"> </span><span class="s2">&quot;J. Freiheit&quot;</span>,
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="w">  </span><span class="s2">&quot;license&quot;</span>:<span class="w"> </span><span class="s2">&quot;ISC&quot;</span>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a><span class="o">}</span>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a>Is<span class="w"> </span>this<span class="w"> </span>OK?<span class="w"> </span><span class="o">(</span>yes<span class="o">)</span><span class="w"> </span>
</span></code></pre></div>
<p>Die <code>package.json</code> wurde erstellt. Nun benötigen wir noch das Modul <a href="https://expressjs.com/de/">Express</a>. Express bietet uns eine unkomplizierte <em>Middleware</em> für die Weiterverwaltung von <code>http</code>-Anfragen an die Datenbank und zurück. </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>npm<span class="w"> </span>install<span class="w"> </span>express<span class="w"> </span>--save
</span></code></pre></div>
<p>Sie erhalten eine Meldung in der Form:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>%<span class="w"> </span>npm<span class="w"> </span>install<span class="w"> </span>express<span class="w"> </span>--save
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>added<span class="w"> </span><span class="m">66</span><span class="w"> </span>packages,<span class="w"> </span>and<span class="w"> </span>audited<span class="w"> </span><span class="m">67</span><span class="w"> </span>packages<span class="w"> </span><span class="k">in</span><span class="w"> </span>1s
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="m">14</span><span class="w"> </span>packages<span class="w"> </span>are<span class="w"> </span>looking<span class="w"> </span><span class="k">for</span><span class="w"> </span>funding
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">  </span>run<span class="w"> </span><span class="sb">`</span>npm<span class="w"> </span>fund<span class="sb">`</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>details
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>found<span class="w"> </span><span class="m">0</span><span class="w"> </span>vulnerabilities
</span></code></pre></div>
<p>In der <code>package.json</code> wurde die entsprechende Abhängigkeit eingetragen: </p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">package.json</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-json highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="p">{</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;backend&quot;</span><span class="p">,</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Backend REST-API&quot;</span><span class="p">,</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">  </span><span class="nt">&quot;main&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;index.js&quot;</span><span class="p">,</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">  </span><span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">    </span><span class="nt">&quot;test&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">  </span><span class="nt">&quot;keywords&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="s2">&quot;restapi&quot;</span><span class="p">,</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">    </span><span class="s2">&quot;backend&quot;</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">  </span><span class="p">],</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">  </span><span class="nt">&quot;author&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;J. Freiheit&quot;</span><span class="p">,</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">  </span><span class="nt">&quot;license&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ISC&quot;</span><span class="p">,</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="hll"><span class="w">  </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="hll"><span class="w">    </span><span class="nt">&quot;express&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^5.1.0&quot;</span>
</span></span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="hll"><span class="w">  </span><span class="p">}</span>
</span></span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Öffnen Sie nun das <code>backend</code>-Projekt in Ihrer IDE und erstellen Sie sich dort eine Datei <code>server.js</code> mit folgendem Inhalt:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">server.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-javascript highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./routes&#39;</span><span class="p">);</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">();</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="kd">const</span><span class="w"> </span><span class="nx">PORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3000</span><span class="p">;</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">routes</span><span class="p">);</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9"></a>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Server started and listening on port </span><span class="si">${</span><span class="nx">PORT</span><span class="si">}</span><span class="sb"> ... `</span><span class="p">);</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="p">});</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Das bedeutet, wir importieren <code>express</code> (Zeile <code>1</code>), erzeugen uns davon ein Objekt und speichern dieses in der Variablen <code>app</code> (Zeile <code>4</code>). Wir legen in einer Konstanten <code>PORT</code> die Portnummer <code>3000</code> fest (Zeile <code>5</code> - die Portnummer können Sie wählen). Das <code>backend</code> ist somit unter <code>http://localhost:3000</code> verfügbar. Das eigentliche Starten des Webservers erfolgt in den Zeilen <code>10-16</code> durch Aufruf der <code>listen()</code>-Funktion von <code>express</code>. Die Syntax der <code>listen()</code>-Funktion ist generell wie folgt:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>app.listen<span class="o">([</span>port<span class="o">[</span>,<span class="w"> </span>host<span class="o">[</span>,<span class="w"> </span>backlog<span class="o">]]][</span>,<span class="w"> </span>callback<span class="o">])</span>
</span></code></pre></div>
<p>Wir übergeben als ersten Parameter die <code>PORT</code>-Nummer (<code>3000</code>) und als zweiten Parameter eine (anonyme) Funktion als sogenannten <em>callback</em>. <em>Callbacks</em> sind <a href="../promises/#callbacks">hier</a> näher erläutert. Die anonyme Funktion wird durch die <code>listen()</code>-Funktion aufgerufen. Sollte ein Fehler aufgetreten sein (z.B. wenn der Port bereits belegt ist), wird der anonymen Funktion ein <code>error</code>-Objekt übergeben. Ist das der Fall, wird der Fehler auf der Konsole ausgegeben. Wird der anonymen Funktion kein Objekt übergeben, wurde der Webserver korrekt gestartet und die entsprechende Meldung erscheint auf der Konsole. </p>
<p>Die Definitionsfunktion in <em>Arrow-Notation</em> </p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Server started and listening on port </span><span class="si">${</span><span class="nx">PORT</span><span class="si">}</span><span class="sb"> ... `</span><span class="p">);</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="p">}</span>
</span></code></pre></div>
<p>ist äquivalent zu </p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Server started and listening on port </span><span class="si">${</span><span class="nx">PORT</span><span class="si">}</span><span class="sb"> ... `</span><span class="p">);</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="p">}</span>
</span></code></pre></div>
<p><code>error</code> ist der Name des hier gewählten Parameters. Beachten Sie auch die verwendete Syntax <code>${PORT}</code> im sogenannte <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template literal</a>. Beachten Sie, dass <em>template literals</em> nicht in einfachen (<code>'</code>) oder doppelten (<code>"</code>) Anführungsstrichen stehen, sondern in <code>&#96;</code> (<em>backticks</em>). </p>
<h3 id="router">Router<a class="headerlink" href="#router" title="Permanent link">&para;</a></h3>
<p>Noch lässt sich unser Programm aber nicht ausführen. Wir benötigen im Projektordner noch eine Datei <code>routes.js</code>. Diese wird nämlich in der <code>server.js</code> bereits in Zeile <code>2</code> eingebunden und in Zeile <code>8</code> verwendet. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">routes.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-javascript highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">router</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3"></a>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="c1">// eine GET-Anfrage</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6"></a>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">    </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Hello FIW!&quot;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="p">});</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9"></a>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">router</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Beim <code>Router</code> handelt es sich um eine <em>Middleware</em> (siehe <a href="https://expressjs.com/de/guide/using-middleware.html">hier</a>), die die Routen verwaltet und <code>request</code>-Objekte an die entsprechende Routen weiterleitet und <code>response</code>-Objekte empfängt. In unserer <code>routes.js</code> haben wir zunächst eine <code>GET</code>-Anfrage implementiert (Zeile <code>5</code>). Das <code>request</code>-Objekt heißt hier <code>req</code>. Das verwenden wir aber gar nicht. Das <code>respones</code>-Objekt heißt hier <code>res</code> und wird durch die Anfrage erzeugt. Wir senden in der <code>response</code> ein JavaScript-Objekt zurück, das einen Schlüssel <code>message</code> enthält. </p>
<p>In der <code>server.js</code> haben wir mit <code>app.use(express.json())</code> (Zeile <code>7</code>) angegeben, dass alle JavaScript-Objekte in der <code>response</code> nach JSON umgewandelt werden sollen. Wenn nun die URL <code>localhost:3000</code> aufgerufen wird, dann wird ein <code>request</code> ausgelöst, den wir hier mit <code>Hello FIW!</code> als <code>response</code> beantworten (Zeilen <code>5-8</code>). </p>
<p>Wichtig ist, dass wir <code>router</code> mit <code>module.exports</code> exportieren, damit es von anderen Modulen importiert und genutzt werden kann. Siehe dazu z.B. <a href="https://www.sitepoint.com/understanding-module-exports-exports-node-js/">hier</a>. </p>
<p>Noch "läuft" unser Backend aber noch nicht. Wir müssen es erst starten. </p>
<h3 id="starten-des-projektes">Starten des Projektes<a class="headerlink" href="#starten-des-projektes" title="Permanent link">&para;</a></h3>
<p>Das Projekt lässt sich nun starten. Wir geben dazu im Terminal im <code>backend</code>-Ordner</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>node<span class="w"> </span>server.js
</span></code></pre></div>
<p>ein. Im Terminal erscheint </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>Server<span class="w"> </span>started<span class="w"> </span>and<span class="w"> </span>listening<span class="w"> </span>on<span class="w"> </span>port<span class="w"> </span><span class="m">3000</span><span class="w"> </span>
</span></code></pre></div>
<p>und wenn Sie im Browser die URL <code>http://localhost:3000/</code> eingeben, wird dort</p>
<p><img alt="backend" src="../files/91_backend.png" /></p>
<p>angezeigt. Sie können auch Postman öffnen und <code>http://localhost:3000</code> eintragen (<code>GET</code>-Methode):</p>
<p><img alt="backend" src="../files/92_postman.png" /></p>
<p>Wann immer wir jetzt jedoch etwas an der Implementierung ändern, müssten wir im Terminal zunächst den Webserver mit </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Strg-C<span class="w">      </span>//<span class="w"> </span>bzw.<span class="w"> </span>Control-C
</span></code></pre></div>
<p>stoppen, um ihn dann wieder mit <code>node server.js</code> zu starten. Um das zu umgehen, gibt es für <code>node</code> nun die Option <code>--watch</code> (siehe <a href="https://nodejs.org/docs/latest/api/cli.html#--watch">hier</a>). Wenn wir unser Projekt also mit </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>node<span class="w"> </span>--watch<span class="w"> </span>server.js
</span></code></pre></div>
<p>starten, dann compiliert es stets automatisch neu sobald wir etwas am Code ändern. </p>
<h3 id="routen">Routen<a class="headerlink" href="#routen" title="Permanent link">&para;</a></h3>
<p>Hier nur zum Verständnis. Angenommen, wir ändern bspw. in der <code>server.js</code> die Zeile <code>8</code> zu </p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/api&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">routes</span><span class="p">);</span>
</span></code></pre></div>
<p>, dann würden alle Routen, die wir in <code>routes.js</code> definieren, unter <code>localhost:3000/api</code> verfügbar sein. Wenn wir dann also z.B. in der <code>routes.js</code> die Zeile <code>5</code> zu </p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/fiw&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span></code></pre></div>
<p>ändern, dann ist der GET-Endpunkt <code>localhost:3000/api/fiw</code>. </p>
<h2 id="mongodb">MongoDB<a class="headerlink" href="#mongodb" title="Permanent link">&para;</a></h2>
<p>Als Datenbankmanagementsystem verwenden wir <a href="https://www.mongodb.com/">MongoDB</a>. MongoDB ist ein Open-Source NoSQL-Datenbankmanagementsystem. <em>No</em> steht dabei für <em>not only</em>, also <em>not only SQL</em>. Es nicht kein relationales sondern ein dokementenbasiertes Datenbankmanagementsystem. Eine Datenbank besteht in MongoDB aus einer oder mehrerer <em>Collection*s. Eine *Collection</em> wiederum enthält <em>Dokumente</em>. Eine <em>Collection</em> kann, im Gegensatz zu relationalen Datenbankmanagementsystemen, völlig unterschiedliche Dokumente enthalten. </p>
<p>Um eine MongoDB-Datenbank aufzusetzen haben Sie 2 Möglichkeiten:</p>
<ol>
<li>Sie installieren sich MongoDB auf Ihrem Rechner oder</li>
<li>Sie nutzen die Cloud-Lösung <a href="https://www.mongodb.com/de-de/atlas">MongoDB Atlas</a>.</li>
</ol>
<p>Für die Verwaltung Ihrer Datenbank(en) können (und sollten) Sie <a href="https://www.mongodb.com/de-de/products/tools/compass">MongoDB Compass</a> verwenden.</p>
<h3 id="mongodb-lokal-installieren">MongoDB lokal installieren<a class="headerlink" href="#mongodb-lokal-installieren" title="Permanent link">&para;</a></h3>
<p>Um MongoDB lokal auf Ihrem Rechner aufzusetzen installieren Sie die <a href="https://www.mongodb.com/de-de/products/self-managed/community-edition">MongoDB Community Edition</a>. Die jeweilige Installationsanleitung für Ihr Betriebssystem finden Sie <a href="https://www.mongodb.com/docs/manual/administration/install-community/#std-label-install-mdb-community-edition">hier</a>. Unter MacOS sollten Sie z.B. <code>brew</code> verwenden, um MongoDB zu installieren. Ein Herunterladen des <a href="https://www.mongodb.com/try/download/community">MongoDB Community Server</a> ist dann gar nicht notwendig, das geschieht dann mittels <code>brew install mongodb-community@8.0</code>. </p>
<h3 id="mongodb-atlas-nutzen">MongoDB Atlas nutzen<a class="headerlink" href="#mongodb-atlas-nutzen" title="Permanent link">&para;</a></h3>
<p>Sie müssen MongoDB nicht lokal installieren, sondern können die Cloud-Lösung <a href="">MongoDB Atlas</a> nutzen. Das hat auch den Vorteil, dass Sie Ihr Projekt später leichter deployen können. Um <em>MongoDB Atlas</em> zu nutzen, benötigen Sie einen Account bei MongoDB. Wählen Sie unbedingt einen <strong>kostenlosen</strong> Cluster aus!</p>
<p>Nach Einrichtung sieht es unter dem Menüpunkt <code>Data Explorer</code> dann ungefähr so aus (die Datenbanken <code>members</code> und <code>users</code> haben Sie noch nicht):</p>
<p><img alt="mongodb" src="../files/321_atlas.png" /></p>
<p>Im <code>Data Explorer</code> können Sie auch eine Datenbank erstellen. Klicken Sie, wie in der folgenden Abbildung gezeigt, auf das <code>+</code> neben <code>Cluster0</code> und geben Sie sowohl als <code>Collection</code> als auch als Datenbank <code>members</code> ein:</p>
<p><img alt="mongodb" src="../files/322_mongodb.png" /></p>
<h3 id="mongodb-compass-installieren">MongoDB Compass installieren<a class="headerlink" href="#mongodb-compass-installieren" title="Permanent link">&para;</a></h3>
<p>Zur Verwaltung Ihrer Datenbanken können Sie <a href="https://www.mongodb.com/products/tools/compass">MongoDB Compass</a> nutzen. Nach der Installation stellen Sie in <em>Compass</em> eine Verbindung zur MongoDB her. Die Oberfläche von <em>Compass</em> sieht nach Verbindungsherstellung ungefähr so aus (die Daten haben Sie noch nicht und auf der Abbildung bin ich sowohl mit der lokalen Installation von MongoDB als auch mit Atlas verbunden):</p>
<p><img alt="mongodb" src="../files/320_compass.png" /></p>
<p>In <em>Compass</em> können Sie auch eine Datenbank erstellen. Klicken Sie, wie in der folgenden Abbildung gezeigt, auf das <code>+</code> neben Ihrer <em>Connection</em> (lokal oder Atlas) und geben Sie sowohl als <code>Collection</code> als auch als Datenbank <code>members</code> ein:</p>
<p><img alt="mongodb" src="../files/322_mongodb.png" /></p>
<h3 id="mongo-shell-verwenden">Mongo-Shell verwenden<a class="headerlink" href="#mongo-shell-verwenden" title="Permanent link">&para;</a></h3>
<p>Sie können anstelle von <em>Compass</em> auch die Mongo-Shell <code>mongosh</code> verwenden (müssen Sie aber nicht!). Wenn <code>mongosh</code> gestartet ist, erscheint im Terminal <code>test&gt;</code>. Das bedeutet, dass Sie auf der Datenbank <code>test</code> operieren. Mit dem Befehl <code>db</code> können Sie sich die Datenbank anschauen, auf der Sie gerade operieren. Das ist zu Beginn die <code>test</code>-Datenbank. Wir wollen eine neue Datenbank <code>members</code> erstellen. Dazu nutzen wir den Befehl <code>use &lt;db&gt;</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>&gt;<span class="w"> </span>use<span class="w"> </span>members
</span></code></pre></div>
<p>(ohne das <code>&gt;</code> - das soll nur symbolisieren, dass wir in der MongoDB-Shell sind). Es entsteht die Datenbank <code>members</code> und es wird direkt in diese Datenbank gewechselt. </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>test&gt;<span class="w"> </span>db
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="nb">test</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>test&gt;<span class="w"> </span>use<span class="w"> </span>members
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>switched<span class="w"> </span>to<span class="w"> </span>db<span class="w"> </span>members
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>members&gt;<span class="w"> </span>db
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>members
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>members&gt;<span class="w"> </span>
</span></code></pre></div>
<h3 id="befullen-der-datenbank-members">Befüllen der Datenbank <code>members</code><a class="headerlink" href="#befullen-der-datenbank-members" title="Permanent link">&para;</a></h3>
<p>Wir wollen die Datenbank <code>members</code> mit folgenden Einträgen befüllen:</p>
<details class="note">
<summary>members.members.json</summary>
<div class="language-json highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="p">[{</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Alan&quot;</span><span class="p">,</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bradley&quot;</span><span class="p">,</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;abradley1c@globo.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;229.152.117.127&quot;</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="p">},</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="p">{</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Lillian&quot;</span><span class="p">,</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Stephens&quot;</span><span class="p">,</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lstephens19@hugedomains.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;89.85.137.204&quot;</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="p">},</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="p">{</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Marie&quot;</span><span class="p">,</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Morgan&quot;</span><span class="p">,</span>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mmorganb@cloudflare.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;226.79.152.112&quot;</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="p">},</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a><span class="p">{</span>
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Peter&quot;</span><span class="p">,</span>
</span><span id="__span-18-21"><a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Phillips&quot;</span><span class="p">,</span>
</span><span id="__span-18-22"><a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pphillipss@1688.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-23"><a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;11.158.255.76&quot;</span>
</span><span id="__span-18-24"><a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a><span class="p">},</span>
</span><span id="__span-18-25"><a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a><span class="p">{</span>
</span><span id="__span-18-26"><a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Adam&quot;</span><span class="p">,</span>
</span><span id="__span-18-27"><a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Anderson&quot;</span><span class="p">,</span>
</span><span id="__span-18-28"><a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aanderson8@google.fr&quot;</span><span class="p">,</span>
</span><span id="__span-18-29"><a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;118.93.83.157&quot;</span>
</span><span id="__span-18-30"><a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a><span class="p">},</span>
</span><span id="__span-18-31"><a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a><span class="p">{</span>
</span><span id="__span-18-32"><a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Matthew&quot;</span><span class="p">,</span>
</span><span id="__span-18-33"><a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Porter&quot;</span><span class="p">,</span>
</span><span id="__span-18-34"><a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mporter9@europa.eu&quot;</span><span class="p">,</span>
</span><span id="__span-18-35"><a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;174.81.178.88&quot;</span>
</span><span id="__span-18-36"><a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a><span class="p">},</span>
</span><span id="__span-18-37"><a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a><span class="p">{</span>
</span><span id="__span-18-38"><a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Susan&quot;</span><span class="p">,</span>
</span><span id="__span-18-39"><a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Andrews&quot;</span><span class="p">,</span>
</span><span id="__span-18-40"><a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sandrewsn@google.co.jp&quot;</span><span class="p">,</span>
</span><span id="__span-18-41"><a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;228.214.9.251&quot;</span>
</span><span id="__span-18-42"><a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a><span class="p">},</span>
</span><span id="__span-18-43"><a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a><span class="p">{</span>
</span><span id="__span-18-44"><a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Catherine&quot;</span><span class="p">,</span>
</span><span id="__span-18-45"><a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Andrews&quot;</span><span class="p">,</span>
</span><span id="__span-18-46"><a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;candrewsp@noaa.gov&quot;</span><span class="p">,</span>
</span><span id="__span-18-47"><a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;112.111.87.178&quot;</span>
</span><span id="__span-18-48"><a id="__codelineno-18-48" name="__codelineno-18-48" href="#__codelineno-18-48"></a><span class="p">},</span>
</span><span id="__span-18-49"><a id="__codelineno-18-49" name="__codelineno-18-49" href="#__codelineno-18-49"></a><span class="p">{</span>
</span><span id="__span-18-50"><a id="__codelineno-18-50" name="__codelineno-18-50" href="#__codelineno-18-50"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Edward&quot;</span><span class="p">,</span>
</span><span id="__span-18-51"><a id="__codelineno-18-51" name="__codelineno-18-51" href="#__codelineno-18-51"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hicks&quot;</span><span class="p">,</span>
</span><span id="__span-18-52"><a id="__codelineno-18-52" name="__codelineno-18-52" href="#__codelineno-18-52"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ehicksc@pcworld.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-53"><a id="__codelineno-18-53" name="__codelineno-18-53" href="#__codelineno-18-53"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;199.153.27.1&quot;</span>
</span><span id="__span-18-54"><a id="__codelineno-18-54" name="__codelineno-18-54" href="#__codelineno-18-54"></a><span class="p">},</span>
</span><span id="__span-18-55"><a id="__codelineno-18-55" name="__codelineno-18-55" href="#__codelineno-18-55"></a><span class="p">{</span>
</span><span id="__span-18-56"><a id="__codelineno-18-56" name="__codelineno-18-56" href="#__codelineno-18-56"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Margaret&quot;</span><span class="p">,</span>
</span><span id="__span-18-57"><a id="__codelineno-18-57" name="__codelineno-18-57" href="#__codelineno-18-57"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Evans&quot;</span><span class="p">,</span>
</span><span id="__span-18-58"><a id="__codelineno-18-58" name="__codelineno-18-58" href="#__codelineno-18-58"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mevansh@pcworld.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-59"><a id="__codelineno-18-59" name="__codelineno-18-59" href="#__codelineno-18-59"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;162.10.86.196&quot;</span>
</span><span id="__span-18-60"><a id="__codelineno-18-60" name="__codelineno-18-60" href="#__codelineno-18-60"></a><span class="p">},</span>
</span><span id="__span-18-61"><a id="__codelineno-18-61" name="__codelineno-18-61" href="#__codelineno-18-61"></a><span class="p">{</span>
</span><span id="__span-18-62"><a id="__codelineno-18-62" name="__codelineno-18-62" href="#__codelineno-18-62"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Steven&quot;</span><span class="p">,</span>
</span><span id="__span-18-63"><a id="__codelineno-18-63" name="__codelineno-18-63" href="#__codelineno-18-63"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hamilton&quot;</span><span class="p">,</span>
</span><span id="__span-18-64"><a id="__codelineno-18-64" name="__codelineno-18-64" href="#__codelineno-18-64"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;shamiltonu@state.tx.us&quot;</span><span class="p">,</span>
</span><span id="__span-18-65"><a id="__codelineno-18-65" name="__codelineno-18-65" href="#__codelineno-18-65"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;38.194.91.201&quot;</span>
</span><span id="__span-18-66"><a id="__codelineno-18-66" name="__codelineno-18-66" href="#__codelineno-18-66"></a><span class="p">},</span>
</span><span id="__span-18-67"><a id="__codelineno-18-67" name="__codelineno-18-67" href="#__codelineno-18-67"></a><span class="p">{</span>
</span><span id="__span-18-68"><a id="__codelineno-18-68" name="__codelineno-18-68" href="#__codelineno-18-68"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Eric&quot;</span><span class="p">,</span>
</span><span id="__span-18-69"><a id="__codelineno-18-69" name="__codelineno-18-69" href="#__codelineno-18-69"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Miller&quot;</span><span class="p">,</span>
</span><span id="__span-18-70"><a id="__codelineno-18-70" name="__codelineno-18-70" href="#__codelineno-18-70"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;emillere@creativecommons.org&quot;</span><span class="p">,</span>
</span><span id="__span-18-71"><a id="__codelineno-18-71" name="__codelineno-18-71" href="#__codelineno-18-71"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;122.159.17.218&quot;</span>
</span><span id="__span-18-72"><a id="__codelineno-18-72" name="__codelineno-18-72" href="#__codelineno-18-72"></a><span class="p">},</span>
</span><span id="__span-18-73"><a id="__codelineno-18-73" name="__codelineno-18-73" href="#__codelineno-18-73"></a><span class="p">{</span>
</span><span id="__span-18-74"><a id="__codelineno-18-74" name="__codelineno-18-74" href="#__codelineno-18-74"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mildred&quot;</span><span class="p">,</span>
</span><span id="__span-18-75"><a id="__codelineno-18-75" name="__codelineno-18-75" href="#__codelineno-18-75"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Watkins&quot;</span><span class="p">,</span>
</span><span id="__span-18-76"><a id="__codelineno-18-76" name="__codelineno-18-76" href="#__codelineno-18-76"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mwatkins0@miibeian.gov.cn&quot;</span><span class="p">,</span>
</span><span id="__span-18-77"><a id="__codelineno-18-77" name="__codelineno-18-77" href="#__codelineno-18-77"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;150.67.132.64&quot;</span>
</span><span id="__span-18-78"><a id="__codelineno-18-78" name="__codelineno-18-78" href="#__codelineno-18-78"></a><span class="p">},</span>
</span><span id="__span-18-79"><a id="__codelineno-18-79" name="__codelineno-18-79" href="#__codelineno-18-79"></a><span class="p">{</span>
</span><span id="__span-18-80"><a id="__codelineno-18-80" name="__codelineno-18-80" href="#__codelineno-18-80"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Marie&quot;</span><span class="p">,</span>
</span><span id="__span-18-81"><a id="__codelineno-18-81" name="__codelineno-18-81" href="#__codelineno-18-81"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Thompson&quot;</span><span class="p">,</span>
</span><span id="__span-18-82"><a id="__codelineno-18-82" name="__codelineno-18-82" href="#__codelineno-18-82"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mthompsonz@yelp.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-83"><a id="__codelineno-18-83" name="__codelineno-18-83" href="#__codelineno-18-83"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;162.164.5.231&quot;</span>
</span><span id="__span-18-84"><a id="__codelineno-18-84" name="__codelineno-18-84" href="#__codelineno-18-84"></a><span class="p">},</span>
</span><span id="__span-18-85"><a id="__codelineno-18-85" name="__codelineno-18-85" href="#__codelineno-18-85"></a><span class="p">{</span>
</span><span id="__span-18-86"><a id="__codelineno-18-86" name="__codelineno-18-86" href="#__codelineno-18-86"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Steve&quot;</span><span class="p">,</span>
</span><span id="__span-18-87"><a id="__codelineno-18-87" name="__codelineno-18-87" href="#__codelineno-18-87"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sanders&quot;</span><span class="p">,</span>
</span><span id="__span-18-88"><a id="__codelineno-18-88" name="__codelineno-18-88" href="#__codelineno-18-88"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ssanders1b@wikispaces.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-89"><a id="__codelineno-18-89" name="__codelineno-18-89" href="#__codelineno-18-89"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;91.61.109.245&quot;</span>
</span><span id="__span-18-90"><a id="__codelineno-18-90" name="__codelineno-18-90" href="#__codelineno-18-90"></a><span class="p">},</span>
</span><span id="__span-18-91"><a id="__codelineno-18-91" name="__codelineno-18-91" href="#__codelineno-18-91"></a><span class="p">{</span>
</span><span id="__span-18-92"><a id="__codelineno-18-92" name="__codelineno-18-92" href="#__codelineno-18-92"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Anne&quot;</span><span class="p">,</span>
</span><span id="__span-18-93"><a id="__codelineno-18-93" name="__codelineno-18-93" href="#__codelineno-18-93"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Brooks&quot;</span><span class="p">,</span>
</span><span id="__span-18-94"><a id="__codelineno-18-94" name="__codelineno-18-94" href="#__codelineno-18-94"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;abrooks16@bravesites.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-95"><a id="__codelineno-18-95" name="__codelineno-18-95" href="#__codelineno-18-95"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;243.159.39.234&quot;</span>
</span><span id="__span-18-96"><a id="__codelineno-18-96" name="__codelineno-18-96" href="#__codelineno-18-96"></a><span class="p">},</span>
</span><span id="__span-18-97"><a id="__codelineno-18-97" name="__codelineno-18-97" href="#__codelineno-18-97"></a><span class="p">{</span>
</span><span id="__span-18-98"><a id="__codelineno-18-98" name="__codelineno-18-98" href="#__codelineno-18-98"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Andrea&quot;</span><span class="p">,</span>
</span><span id="__span-18-99"><a id="__codelineno-18-99" name="__codelineno-18-99" href="#__codelineno-18-99"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Gardner&quot;</span><span class="p">,</span>
</span><span id="__span-18-100"><a id="__codelineno-18-100" name="__codelineno-18-100" href="#__codelineno-18-100"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;agardnerv@woothemes.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-101"><a id="__codelineno-18-101" name="__codelineno-18-101" href="#__codelineno-18-101"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;179.91.0.30&quot;</span>
</span><span id="__span-18-102"><a id="__codelineno-18-102" name="__codelineno-18-102" href="#__codelineno-18-102"></a><span class="p">},</span>
</span><span id="__span-18-103"><a id="__codelineno-18-103" name="__codelineno-18-103" href="#__codelineno-18-103"></a><span class="p">{</span>
</span><span id="__span-18-104"><a id="__codelineno-18-104" name="__codelineno-18-104" href="#__codelineno-18-104"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sean&quot;</span><span class="p">,</span>
</span><span id="__span-18-105"><a id="__codelineno-18-105" name="__codelineno-18-105" href="#__codelineno-18-105"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Gibson&quot;</span><span class="p">,</span>
</span><span id="__span-18-106"><a id="__codelineno-18-106" name="__codelineno-18-106" href="#__codelineno-18-106"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sgibsony@alexa.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-107"><a id="__codelineno-18-107" name="__codelineno-18-107" href="#__codelineno-18-107"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;48.114.103.55&quot;</span>
</span><span id="__span-18-108"><a id="__codelineno-18-108" name="__codelineno-18-108" href="#__codelineno-18-108"></a><span class="p">},</span>
</span><span id="__span-18-109"><a id="__codelineno-18-109" name="__codelineno-18-109" href="#__codelineno-18-109"></a><span class="p">{</span>
</span><span id="__span-18-110"><a id="__codelineno-18-110" name="__codelineno-18-110" href="#__codelineno-18-110"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Roy&quot;</span><span class="p">,</span>
</span><span id="__span-18-111"><a id="__codelineno-18-111" name="__codelineno-18-111" href="#__codelineno-18-111"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Campbell&quot;</span><span class="p">,</span>
</span><span id="__span-18-112"><a id="__codelineno-18-112" name="__codelineno-18-112" href="#__codelineno-18-112"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rcampbell1@geocities.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-113"><a id="__codelineno-18-113" name="__codelineno-18-113" href="#__codelineno-18-113"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;237.232.34.20&quot;</span>
</span><span id="__span-18-114"><a id="__codelineno-18-114" name="__codelineno-18-114" href="#__codelineno-18-114"></a><span class="p">},</span>
</span><span id="__span-18-115"><a id="__codelineno-18-115" name="__codelineno-18-115" href="#__codelineno-18-115"></a><span class="p">{</span>
</span><span id="__span-18-116"><a id="__codelineno-18-116" name="__codelineno-18-116" href="#__codelineno-18-116"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bonnie&quot;</span><span class="p">,</span>
</span><span id="__span-18-117"><a id="__codelineno-18-117" name="__codelineno-18-117" href="#__codelineno-18-117"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Coleman&quot;</span><span class="p">,</span>
</span><span id="__span-18-118"><a id="__codelineno-18-118" name="__codelineno-18-118" href="#__codelineno-18-118"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bcoleman11@fc2.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-119"><a id="__codelineno-18-119" name="__codelineno-18-119" href="#__codelineno-18-119"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;109.150.122.102&quot;</span>
</span><span id="__span-18-120"><a id="__codelineno-18-120" name="__codelineno-18-120" href="#__codelineno-18-120"></a><span class="p">},</span>
</span><span id="__span-18-121"><a id="__codelineno-18-121" name="__codelineno-18-121" href="#__codelineno-18-121"></a><span class="p">{</span>
</span><span id="__span-18-122"><a id="__codelineno-18-122" name="__codelineno-18-122" href="#__codelineno-18-122"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Amanda&quot;</span><span class="p">,</span>
</span><span id="__span-18-123"><a id="__codelineno-18-123" name="__codelineno-18-123" href="#__codelineno-18-123"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nelson&quot;</span><span class="p">,</span>
</span><span id="__span-18-124"><a id="__codelineno-18-124" name="__codelineno-18-124" href="#__codelineno-18-124"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;anelson13@indiatimes.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-125"><a id="__codelineno-18-125" name="__codelineno-18-125" href="#__codelineno-18-125"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;161.185.121.245&quot;</span>
</span><span id="__span-18-126"><a id="__codelineno-18-126" name="__codelineno-18-126" href="#__codelineno-18-126"></a><span class="p">},</span>
</span><span id="__span-18-127"><a id="__codelineno-18-127" name="__codelineno-18-127" href="#__codelineno-18-127"></a><span class="p">{</span>
</span><span id="__span-18-128"><a id="__codelineno-18-128" name="__codelineno-18-128" href="#__codelineno-18-128"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sean&quot;</span><span class="p">,</span>
</span><span id="__span-18-129"><a id="__codelineno-18-129" name="__codelineno-18-129" href="#__codelineno-18-129"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cruz&quot;</span><span class="p">,</span>
</span><span id="__span-18-130"><a id="__codelineno-18-130" name="__codelineno-18-130" href="#__codelineno-18-130"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;scruz10@answers.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-131"><a id="__codelineno-18-131" name="__codelineno-18-131" href="#__codelineno-18-131"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;92.255.49.227&quot;</span>
</span><span id="__span-18-132"><a id="__codelineno-18-132" name="__codelineno-18-132" href="#__codelineno-18-132"></a><span class="p">},</span>
</span><span id="__span-18-133"><a id="__codelineno-18-133" name="__codelineno-18-133" href="#__codelineno-18-133"></a><span class="p">{</span>
</span><span id="__span-18-134"><a id="__codelineno-18-134" name="__codelineno-18-134" href="#__codelineno-18-134"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ruth&quot;</span><span class="p">,</span>
</span><span id="__span-18-135"><a id="__codelineno-18-135" name="__codelineno-18-135" href="#__codelineno-18-135"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jordan&quot;</span><span class="p">,</span>
</span><span id="__span-18-136"><a id="__codelineno-18-136" name="__codelineno-18-136" href="#__codelineno-18-136"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rjordan1a@smugmug.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-137"><a id="__codelineno-18-137" name="__codelineno-18-137" href="#__codelineno-18-137"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;193.140.80.64&quot;</span>
</span><span id="__span-18-138"><a id="__codelineno-18-138" name="__codelineno-18-138" href="#__codelineno-18-138"></a><span class="p">},</span>
</span><span id="__span-18-139"><a id="__codelineno-18-139" name="__codelineno-18-139" href="#__codelineno-18-139"></a><span class="p">{</span>
</span><span id="__span-18-140"><a id="__codelineno-18-140" name="__codelineno-18-140" href="#__codelineno-18-140"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mark&quot;</span><span class="p">,</span>
</span><span id="__span-18-141"><a id="__codelineno-18-141" name="__codelineno-18-141" href="#__codelineno-18-141"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Richardson&quot;</span><span class="p">,</span>
</span><span id="__span-18-142"><a id="__codelineno-18-142" name="__codelineno-18-142" href="#__codelineno-18-142"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mrichardson1d@ihg.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-143"><a id="__codelineno-18-143" name="__codelineno-18-143" href="#__codelineno-18-143"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;209.217.14.154&quot;</span>
</span><span id="__span-18-144"><a id="__codelineno-18-144" name="__codelineno-18-144" href="#__codelineno-18-144"></a><span class="p">},</span>
</span><span id="__span-18-145"><a id="__codelineno-18-145" name="__codelineno-18-145" href="#__codelineno-18-145"></a><span class="p">{</span>
</span><span id="__span-18-146"><a id="__codelineno-18-146" name="__codelineno-18-146" href="#__codelineno-18-146"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Antonio&quot;</span><span class="p">,</span>
</span><span id="__span-18-147"><a id="__codelineno-18-147" name="__codelineno-18-147" href="#__codelineno-18-147"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Kim&quot;</span><span class="p">,</span>
</span><span id="__span-18-148"><a id="__codelineno-18-148" name="__codelineno-18-148" href="#__codelineno-18-148"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;akim4@odnoklassniki.ru&quot;</span><span class="p">,</span>
</span><span id="__span-18-149"><a id="__codelineno-18-149" name="__codelineno-18-149" href="#__codelineno-18-149"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;168.244.191.78&quot;</span>
</span><span id="__span-18-150"><a id="__codelineno-18-150" name="__codelineno-18-150" href="#__codelineno-18-150"></a><span class="p">},</span>
</span><span id="__span-18-151"><a id="__codelineno-18-151" name="__codelineno-18-151" href="#__codelineno-18-151"></a><span class="p">{</span>
</span><span id="__span-18-152"><a id="__codelineno-18-152" name="__codelineno-18-152" href="#__codelineno-18-152"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Virginia&quot;</span><span class="p">,</span>
</span><span id="__span-18-153"><a id="__codelineno-18-153" name="__codelineno-18-153" href="#__codelineno-18-153"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Graham&quot;</span><span class="p">,</span>
</span><span id="__span-18-154"><a id="__codelineno-18-154" name="__codelineno-18-154" href="#__codelineno-18-154"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vgrahamk@aol.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-155"><a id="__codelineno-18-155" name="__codelineno-18-155" href="#__codelineno-18-155"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;165.219.171.1&quot;</span>
</span><span id="__span-18-156"><a id="__codelineno-18-156" name="__codelineno-18-156" href="#__codelineno-18-156"></a><span class="p">},</span>
</span><span id="__span-18-157"><a id="__codelineno-18-157" name="__codelineno-18-157" href="#__codelineno-18-157"></a><span class="p">{</span>
</span><span id="__span-18-158"><a id="__codelineno-18-158" name="__codelineno-18-158" href="#__codelineno-18-158"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Russell&quot;</span><span class="p">,</span>
</span><span id="__span-18-159"><a id="__codelineno-18-159" name="__codelineno-18-159" href="#__codelineno-18-159"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Brown&quot;</span><span class="p">,</span>
</span><span id="__span-18-160"><a id="__codelineno-18-160" name="__codelineno-18-160" href="#__codelineno-18-160"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rbrownq@nifty.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-161"><a id="__codelineno-18-161" name="__codelineno-18-161" href="#__codelineno-18-161"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;215.38.120.242&quot;</span>
</span><span id="__span-18-162"><a id="__codelineno-18-162" name="__codelineno-18-162" href="#__codelineno-18-162"></a><span class="p">},</span>
</span><span id="__span-18-163"><a id="__codelineno-18-163" name="__codelineno-18-163" href="#__codelineno-18-163"></a><span class="p">{</span>
</span><span id="__span-18-164"><a id="__codelineno-18-164" name="__codelineno-18-164" href="#__codelineno-18-164"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Kathleen&quot;</span><span class="p">,</span>
</span><span id="__span-18-165"><a id="__codelineno-18-165" name="__codelineno-18-165" href="#__codelineno-18-165"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Rose&quot;</span><span class="p">,</span>
</span><span id="__span-18-166"><a id="__codelineno-18-166" name="__codelineno-18-166" href="#__codelineno-18-166"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kroseg@pinterest.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-167"><a id="__codelineno-18-167" name="__codelineno-18-167" href="#__codelineno-18-167"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;222.172.140.56&quot;</span>
</span><span id="__span-18-168"><a id="__codelineno-18-168" name="__codelineno-18-168" href="#__codelineno-18-168"></a><span class="p">},</span>
</span><span id="__span-18-169"><a id="__codelineno-18-169" name="__codelineno-18-169" href="#__codelineno-18-169"></a><span class="p">{</span>
</span><span id="__span-18-170"><a id="__codelineno-18-170" name="__codelineno-18-170" href="#__codelineno-18-170"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ernest&quot;</span><span class="p">,</span>
</span><span id="__span-18-171"><a id="__codelineno-18-171" name="__codelineno-18-171" href="#__codelineno-18-171"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Coleman&quot;</span><span class="p">,</span>
</span><span id="__span-18-172"><a id="__codelineno-18-172" name="__codelineno-18-172" href="#__codelineno-18-172"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ecoleman15@businessweek.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-173"><a id="__codelineno-18-173" name="__codelineno-18-173" href="#__codelineno-18-173"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;213.173.4.7&quot;</span>
</span><span id="__span-18-174"><a id="__codelineno-18-174" name="__codelineno-18-174" href="#__codelineno-18-174"></a><span class="p">},</span>
</span><span id="__span-18-175"><a id="__codelineno-18-175" name="__codelineno-18-175" href="#__codelineno-18-175"></a><span class="p">{</span>
</span><span id="__span-18-176"><a id="__codelineno-18-176" name="__codelineno-18-176" href="#__codelineno-18-176"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Virginia&quot;</span><span class="p">,</span>
</span><span id="__span-18-177"><a id="__codelineno-18-177" name="__codelineno-18-177" href="#__codelineno-18-177"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hawkins&quot;</span><span class="p">,</span>
</span><span id="__span-18-178"><a id="__codelineno-18-178" name="__codelineno-18-178" href="#__codelineno-18-178"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vhawkinsf@ehow.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-179"><a id="__codelineno-18-179" name="__codelineno-18-179" href="#__codelineno-18-179"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;93.120.46.203&quot;</span>
</span><span id="__span-18-180"><a id="__codelineno-18-180" name="__codelineno-18-180" href="#__codelineno-18-180"></a><span class="p">},</span>
</span><span id="__span-18-181"><a id="__codelineno-18-181" name="__codelineno-18-181" href="#__codelineno-18-181"></a><span class="p">{</span>
</span><span id="__span-18-182"><a id="__codelineno-18-182" name="__codelineno-18-182" href="#__codelineno-18-182"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Russell&quot;</span><span class="p">,</span>
</span><span id="__span-18-183"><a id="__codelineno-18-183" name="__codelineno-18-183" href="#__codelineno-18-183"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Campbell&quot;</span><span class="p">,</span>
</span><span id="__span-18-184"><a id="__codelineno-18-184" name="__codelineno-18-184" href="#__codelineno-18-184"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rcampbell17@eventbrite.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-185"><a id="__codelineno-18-185" name="__codelineno-18-185" href="#__codelineno-18-185"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;251.2.92.63&quot;</span>
</span><span id="__span-18-186"><a id="__codelineno-18-186" name="__codelineno-18-186" href="#__codelineno-18-186"></a><span class="p">},</span>
</span><span id="__span-18-187"><a id="__codelineno-18-187" name="__codelineno-18-187" href="#__codelineno-18-187"></a><span class="p">{</span>
</span><span id="__span-18-188"><a id="__codelineno-18-188" name="__codelineno-18-188" href="#__codelineno-18-188"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jennifer&quot;</span><span class="p">,</span>
</span><span id="__span-18-189"><a id="__codelineno-18-189" name="__codelineno-18-189" href="#__codelineno-18-189"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Marshall&quot;</span><span class="p">,</span>
</span><span id="__span-18-190"><a id="__codelineno-18-190" name="__codelineno-18-190" href="#__codelineno-18-190"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jmarshallt@gnu.org&quot;</span><span class="p">,</span>
</span><span id="__span-18-191"><a id="__codelineno-18-191" name="__codelineno-18-191" href="#__codelineno-18-191"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;104.191.49.94&quot;</span>
</span><span id="__span-18-192"><a id="__codelineno-18-192" name="__codelineno-18-192" href="#__codelineno-18-192"></a><span class="p">},</span>
</span><span id="__span-18-193"><a id="__codelineno-18-193" name="__codelineno-18-193" href="#__codelineno-18-193"></a><span class="p">{</span>
</span><span id="__span-18-194"><a id="__codelineno-18-194" name="__codelineno-18-194" href="#__codelineno-18-194"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Rebecca&quot;</span><span class="p">,</span>
</span><span id="__span-18-195"><a id="__codelineno-18-195" name="__codelineno-18-195" href="#__codelineno-18-195"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cunningham&quot;</span><span class="p">,</span>
</span><span id="__span-18-196"><a id="__codelineno-18-196" name="__codelineno-18-196" href="#__codelineno-18-196"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rcunninghamd@mac.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-197"><a id="__codelineno-18-197" name="__codelineno-18-197" href="#__codelineno-18-197"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;65.79.191.52&quot;</span>
</span><span id="__span-18-198"><a id="__codelineno-18-198" name="__codelineno-18-198" href="#__codelineno-18-198"></a><span class="p">},</span>
</span><span id="__span-18-199"><a id="__codelineno-18-199" name="__codelineno-18-199" href="#__codelineno-18-199"></a><span class="p">{</span>
</span><span id="__span-18-200"><a id="__codelineno-18-200" name="__codelineno-18-200" href="#__codelineno-18-200"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Joan&quot;</span><span class="p">,</span>
</span><span id="__span-18-201"><a id="__codelineno-18-201" name="__codelineno-18-201" href="#__codelineno-18-201"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Roberts&quot;</span><span class="p">,</span>
</span><span id="__span-18-202"><a id="__codelineno-18-202" name="__codelineno-18-202" href="#__codelineno-18-202"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jroberts12@alibaba.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-203"><a id="__codelineno-18-203" name="__codelineno-18-203" href="#__codelineno-18-203"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4.91.143.62&quot;</span>
</span><span id="__span-18-204"><a id="__codelineno-18-204" name="__codelineno-18-204" href="#__codelineno-18-204"></a><span class="p">},</span>
</span><span id="__span-18-205"><a id="__codelineno-18-205" name="__codelineno-18-205" href="#__codelineno-18-205"></a><span class="p">{</span>
</span><span id="__span-18-206"><a id="__codelineno-18-206" name="__codelineno-18-206" href="#__codelineno-18-206"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Alan&quot;</span><span class="p">,</span>
</span><span id="__span-18-207"><a id="__codelineno-18-207" name="__codelineno-18-207" href="#__codelineno-18-207"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Vasquez&quot;</span><span class="p">,</span>
</span><span id="__span-18-208"><a id="__codelineno-18-208" name="__codelineno-18-208" href="#__codelineno-18-208"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;avasquezo@miibeian.gov.cn&quot;</span><span class="p">,</span>
</span><span id="__span-18-209"><a id="__codelineno-18-209" name="__codelineno-18-209" href="#__codelineno-18-209"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;178.109.86.172&quot;</span>
</span><span id="__span-18-210"><a id="__codelineno-18-210" name="__codelineno-18-210" href="#__codelineno-18-210"></a><span class="p">},</span>
</span><span id="__span-18-211"><a id="__codelineno-18-211" name="__codelineno-18-211" href="#__codelineno-18-211"></a><span class="p">{</span>
</span><span id="__span-18-212"><a id="__codelineno-18-212" name="__codelineno-18-212" href="#__codelineno-18-212"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Shirley&quot;</span><span class="p">,</span>
</span><span id="__span-18-213"><a id="__codelineno-18-213" name="__codelineno-18-213" href="#__codelineno-18-213"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Scott&quot;</span><span class="p">,</span>
</span><span id="__span-18-214"><a id="__codelineno-18-214" name="__codelineno-18-214" href="#__codelineno-18-214"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sscottm@macromedia.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-215"><a id="__codelineno-18-215" name="__codelineno-18-215" href="#__codelineno-18-215"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;219.237.108.82&quot;</span>
</span><span id="__span-18-216"><a id="__codelineno-18-216" name="__codelineno-18-216" href="#__codelineno-18-216"></a><span class="p">},</span>
</span><span id="__span-18-217"><a id="__codelineno-18-217" name="__codelineno-18-217" href="#__codelineno-18-217"></a><span class="p">{</span>
</span><span id="__span-18-218"><a id="__codelineno-18-218" name="__codelineno-18-218" href="#__codelineno-18-218"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nicole&quot;</span><span class="p">,</span>
</span><span id="__span-18-219"><a id="__codelineno-18-219" name="__codelineno-18-219" href="#__codelineno-18-219"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Thompson&quot;</span><span class="p">,</span>
</span><span id="__span-18-220"><a id="__codelineno-18-220" name="__codelineno-18-220" href="#__codelineno-18-220"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nthompson3@admin.ch&quot;</span><span class="p">,</span>
</span><span id="__span-18-221"><a id="__codelineno-18-221" name="__codelineno-18-221" href="#__codelineno-18-221"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;13.183.208.155&quot;</span>
</span><span id="__span-18-222"><a id="__codelineno-18-222" name="__codelineno-18-222" href="#__codelineno-18-222"></a><span class="p">},</span>
</span><span id="__span-18-223"><a id="__codelineno-18-223" name="__codelineno-18-223" href="#__codelineno-18-223"></a><span class="p">{</span>
</span><span id="__span-18-224"><a id="__codelineno-18-224" name="__codelineno-18-224" href="#__codelineno-18-224"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jeffrey&quot;</span><span class="p">,</span>
</span><span id="__span-18-225"><a id="__codelineno-18-225" name="__codelineno-18-225" href="#__codelineno-18-225"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ford&quot;</span><span class="p">,</span>
</span><span id="__span-18-226"><a id="__codelineno-18-226" name="__codelineno-18-226" href="#__codelineno-18-226"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jford14@cnet.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-227"><a id="__codelineno-18-227" name="__codelineno-18-227" href="#__codelineno-18-227"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;210.216.54.14&quot;</span>
</span><span id="__span-18-228"><a id="__codelineno-18-228" name="__codelineno-18-228" href="#__codelineno-18-228"></a><span class="p">},</span>
</span><span id="__span-18-229"><a id="__codelineno-18-229" name="__codelineno-18-229" href="#__codelineno-18-229"></a><span class="p">{</span>
</span><span id="__span-18-230"><a id="__codelineno-18-230" name="__codelineno-18-230" href="#__codelineno-18-230"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Deborah&quot;</span><span class="p">,</span>
</span><span id="__span-18-231"><a id="__codelineno-18-231" name="__codelineno-18-231" href="#__codelineno-18-231"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;George&quot;</span><span class="p">,</span>
</span><span id="__span-18-232"><a id="__codelineno-18-232" name="__codelineno-18-232" href="#__codelineno-18-232"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dgeorge6@furl.net&quot;</span><span class="p">,</span>
</span><span id="__span-18-233"><a id="__codelineno-18-233" name="__codelineno-18-233" href="#__codelineno-18-233"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;201.76.47.162&quot;</span>
</span><span id="__span-18-234"><a id="__codelineno-18-234" name="__codelineno-18-234" href="#__codelineno-18-234"></a><span class="p">},</span>
</span><span id="__span-18-235"><a id="__codelineno-18-235" name="__codelineno-18-235" href="#__codelineno-18-235"></a><span class="p">{</span>
</span><span id="__span-18-236"><a id="__codelineno-18-236" name="__codelineno-18-236" href="#__codelineno-18-236"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Eric&quot;</span><span class="p">,</span>
</span><span id="__span-18-237"><a id="__codelineno-18-237" name="__codelineno-18-237" href="#__codelineno-18-237"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Matthews&quot;</span><span class="p">,</span>
</span><span id="__span-18-238"><a id="__codelineno-18-238" name="__codelineno-18-238" href="#__codelineno-18-238"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ematthews5@independent.co.uk&quot;</span><span class="p">,</span>
</span><span id="__span-18-239"><a id="__codelineno-18-239" name="__codelineno-18-239" href="#__codelineno-18-239"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;138.194.30.1&quot;</span>
</span><span id="__span-18-240"><a id="__codelineno-18-240" name="__codelineno-18-240" href="#__codelineno-18-240"></a><span class="p">},</span>
</span><span id="__span-18-241"><a id="__codelineno-18-241" name="__codelineno-18-241" href="#__codelineno-18-241"></a><span class="p">{</span>
</span><span id="__span-18-242"><a id="__codelineno-18-242" name="__codelineno-18-242" href="#__codelineno-18-242"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Raymond&quot;</span><span class="p">,</span>
</span><span id="__span-18-243"><a id="__codelineno-18-243" name="__codelineno-18-243" href="#__codelineno-18-243"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mcdonald&quot;</span><span class="p">,</span>
</span><span id="__span-18-244"><a id="__codelineno-18-244" name="__codelineno-18-244" href="#__codelineno-18-244"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rmcdonald2@ihg.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-245"><a id="__codelineno-18-245" name="__codelineno-18-245" href="#__codelineno-18-245"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;161.24.42.24&quot;</span>
</span><span id="__span-18-246"><a id="__codelineno-18-246" name="__codelineno-18-246" href="#__codelineno-18-246"></a><span class="p">},</span>
</span><span id="__span-18-247"><a id="__codelineno-18-247" name="__codelineno-18-247" href="#__codelineno-18-247"></a><span class="p">{</span>
</span><span id="__span-18-248"><a id="__codelineno-18-248" name="__codelineno-18-248" href="#__codelineno-18-248"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Richard&quot;</span><span class="p">,</span>
</span><span id="__span-18-249"><a id="__codelineno-18-249" name="__codelineno-18-249" href="#__codelineno-18-249"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cruz&quot;</span><span class="p">,</span>
</span><span id="__span-18-250"><a id="__codelineno-18-250" name="__codelineno-18-250" href="#__codelineno-18-250"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rcruz7@unc.edu&quot;</span><span class="p">,</span>
</span><span id="__span-18-251"><a id="__codelineno-18-251" name="__codelineno-18-251" href="#__codelineno-18-251"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;235.124.23.221&quot;</span>
</span><span id="__span-18-252"><a id="__codelineno-18-252" name="__codelineno-18-252" href="#__codelineno-18-252"></a><span class="p">},</span>
</span><span id="__span-18-253"><a id="__codelineno-18-253" name="__codelineno-18-253" href="#__codelineno-18-253"></a><span class="p">{</span>
</span><span id="__span-18-254"><a id="__codelineno-18-254" name="__codelineno-18-254" href="#__codelineno-18-254"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mark&quot;</span><span class="p">,</span>
</span><span id="__span-18-255"><a id="__codelineno-18-255" name="__codelineno-18-255" href="#__codelineno-18-255"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Johnson&quot;</span><span class="p">,</span>
</span><span id="__span-18-256"><a id="__codelineno-18-256" name="__codelineno-18-256" href="#__codelineno-18-256"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mjohnsonj@hostgator.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-257"><a id="__codelineno-18-257" name="__codelineno-18-257" href="#__codelineno-18-257"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;73.87.135.206&quot;</span>
</span><span id="__span-18-258"><a id="__codelineno-18-258" name="__codelineno-18-258" href="#__codelineno-18-258"></a><span class="p">},</span>
</span><span id="__span-18-259"><a id="__codelineno-18-259" name="__codelineno-18-259" href="#__codelineno-18-259"></a><span class="p">{</span>
</span><span id="__span-18-260"><a id="__codelineno-18-260" name="__codelineno-18-260" href="#__codelineno-18-260"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Lisa&quot;</span><span class="p">,</span>
</span><span id="__span-18-261"><a id="__codelineno-18-261" name="__codelineno-18-261" href="#__codelineno-18-261"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Olson&quot;</span><span class="p">,</span>
</span><span id="__span-18-262"><a id="__codelineno-18-262" name="__codelineno-18-262" href="#__codelineno-18-262"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lolsonr@telegraph.co.uk&quot;</span><span class="p">,</span>
</span><span id="__span-18-263"><a id="__codelineno-18-263" name="__codelineno-18-263" href="#__codelineno-18-263"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;77.245.172.100&quot;</span>
</span><span id="__span-18-264"><a id="__codelineno-18-264" name="__codelineno-18-264" href="#__codelineno-18-264"></a><span class="p">},</span>
</span><span id="__span-18-265"><a id="__codelineno-18-265" name="__codelineno-18-265" href="#__codelineno-18-265"></a><span class="p">{</span>
</span><span id="__span-18-266"><a id="__codelineno-18-266" name="__codelineno-18-266" href="#__codelineno-18-266"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Eugene&quot;</span><span class="p">,</span>
</span><span id="__span-18-267"><a id="__codelineno-18-267" name="__codelineno-18-267" href="#__codelineno-18-267"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Williams&quot;</span><span class="p">,</span>
</span><span id="__span-18-268"><a id="__codelineno-18-268" name="__codelineno-18-268" href="#__codelineno-18-268"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ewilliamsi@deliciousdays.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-269"><a id="__codelineno-18-269" name="__codelineno-18-269" href="#__codelineno-18-269"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;67.208.26.182&quot;</span>
</span><span id="__span-18-270"><a id="__codelineno-18-270" name="__codelineno-18-270" href="#__codelineno-18-270"></a><span class="p">},</span>
</span><span id="__span-18-271"><a id="__codelineno-18-271" name="__codelineno-18-271" href="#__codelineno-18-271"></a><span class="p">{</span>
</span><span id="__span-18-272"><a id="__codelineno-18-272" name="__codelineno-18-272" href="#__codelineno-18-272"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ryan&quot;</span><span class="p">,</span>
</span><span id="__span-18-273"><a id="__codelineno-18-273" name="__codelineno-18-273" href="#__codelineno-18-273"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Burton&quot;</span><span class="p">,</span>
</span><span id="__span-18-274"><a id="__codelineno-18-274" name="__codelineno-18-274" href="#__codelineno-18-274"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rburton18@foxnews.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-275"><a id="__codelineno-18-275" name="__codelineno-18-275" href="#__codelineno-18-275"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;159.60.107.14&quot;</span>
</span><span id="__span-18-276"><a id="__codelineno-18-276" name="__codelineno-18-276" href="#__codelineno-18-276"></a><span class="p">},</span>
</span><span id="__span-18-277"><a id="__codelineno-18-277" name="__codelineno-18-277" href="#__codelineno-18-277"></a><span class="p">{</span>
</span><span id="__span-18-278"><a id="__codelineno-18-278" name="__codelineno-18-278" href="#__codelineno-18-278"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span>
</span><span id="__span-18-279"><a id="__codelineno-18-279" name="__codelineno-18-279" href="#__codelineno-18-279"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ortiz&quot;</span><span class="p">,</span>
</span><span id="__span-18-280"><a id="__codelineno-18-280" name="__codelineno-18-280" href="#__codelineno-18-280"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aortizw@histats.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-281"><a id="__codelineno-18-281" name="__codelineno-18-281" href="#__codelineno-18-281"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;179.52.222.21&quot;</span>
</span><span id="__span-18-282"><a id="__codelineno-18-282" name="__codelineno-18-282" href="#__codelineno-18-282"></a><span class="p">},</span>
</span><span id="__span-18-283"><a id="__codelineno-18-283" name="__codelineno-18-283" href="#__codelineno-18-283"></a><span class="p">{</span>
</span><span id="__span-18-284"><a id="__codelineno-18-284" name="__codelineno-18-284" href="#__codelineno-18-284"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jonathan&quot;</span><span class="p">,</span>
</span><span id="__span-18-285"><a id="__codelineno-18-285" name="__codelineno-18-285" href="#__codelineno-18-285"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Morales&quot;</span><span class="p">,</span>
</span><span id="__span-18-286"><a id="__codelineno-18-286" name="__codelineno-18-286" href="#__codelineno-18-286"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jmoralesa@ovh.net&quot;</span><span class="p">,</span>
</span><span id="__span-18-287"><a id="__codelineno-18-287" name="__codelineno-18-287" href="#__codelineno-18-287"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;97.65.110.105&quot;</span>
</span><span id="__span-18-288"><a id="__codelineno-18-288" name="__codelineno-18-288" href="#__codelineno-18-288"></a><span class="p">},</span>
</span><span id="__span-18-289"><a id="__codelineno-18-289" name="__codelineno-18-289" href="#__codelineno-18-289"></a><span class="p">{</span>
</span><span id="__span-18-290"><a id="__codelineno-18-290" name="__codelineno-18-290" href="#__codelineno-18-290"></a><span class="w">  </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tammy&quot;</span><span class="p">,</span>
</span><span id="__span-18-291"><a id="__codelineno-18-291" name="__codelineno-18-291" href="#__codelineno-18-291"></a><span class="w">  </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ray&quot;</span><span class="p">,</span>
</span><span id="__span-18-292"><a id="__codelineno-18-292" name="__codelineno-18-292" href="#__codelineno-18-292"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;trayx@weather.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-293"><a id="__codelineno-18-293" name="__codelineno-18-293" href="#__codelineno-18-293"></a><span class="w">  </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;192.243.38.190&quot;</span>
</span><span id="__span-18-294"><a id="__codelineno-18-294" name="__codelineno-18-294" href="#__codelineno-18-294"></a><span class="p">}]</span>
</span></code></pre></div>
</details>
<p>Speichern Sie dieses JSON-Array in einer Datei <code>members.json</code>.</p>
<h4 id="befullen-in-compass">Befüllen in Compass<a class="headerlink" href="#befullen-in-compass" title="Permanent link">&para;</a></h4>
<p>Wählen Sie in der linken Spalte die <em>Datenbank</em> <code>members</code> und darin die <em>Collection</em> <code>members</code> aus. Klicken Sie dann auf <code>ADD DATA</code> und darin <code>Import JSON or CSV file</code>. Wählen Sie die Datei <code>members.json</code> aus. Es werden alle Datensätze eingefügt. </p>
<h4 id="befullen-in-atlas">Befüllen in Atlas<a class="headerlink" href="#befullen-in-atlas" title="Permanent link">&para;</a></h4>
<p>Atlas bietet die gleiche Funktionalität wie Compass in sehr ähnlicher Nutzeroberfläche. Wählen Sie auch hier in der linken Spalte die <em>Datenbank</em> <code>members</code> und darin die <em>Collection</em> <code>members</code> aus. Klicken Sie dann auf <code>ADD DATA</code> und darin <code>Insert documents</code>. Kopieren Sie nun das obige JSON-Array in das Fenster und klicken dann <code>Insert</code>. Es werden alle Datensätze eingefügt. </p>
<h4 id="befullen-in-der-mongo-shell">Befüllen in der Mongo-Shell<a class="headerlink" href="#befullen-in-der-mongo-shell" title="Permanent link">&para;</a></h4>
<p>Wir befüllen diese Datenbank unter Verwendung des Befehls:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>db.collection.insertMany<span class="o">(</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">   </span><span class="o">[</span><span class="w"> </span>&lt;document<span class="w"> </span><span class="m">1</span>&gt;<span class="w"> </span>,<span class="w"> </span>&lt;document<span class="w"> </span><span class="m">2</span>&gt;,<span class="w"> </span>...<span class="w"> </span><span class="o">]</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="o">)</span>
</span></code></pre></div>
<p>Dabei sind die <code>&lt;documente&gt;</code> Objekte in <a href="../objekte/#javascript-object-notation-json">JavaScript Object Notation (JSON)</a> und <code>collection</code> stellt einen Namen (ähnlich einer Tabelle in relationalen Datenbanken) dar. Insgesamt sieht der Befehl mit unseren Daten so aus:</p>
<details>
<summary>Daten einfügen</summary>
<div class="language-text highlight"><pre><span></span><code>db.members.insertMany([
    {
      &quot;firstname&quot;: &quot;Alan&quot;,
      &quot;lastname&quot;: &quot;Bradley&quot;,
      &quot;email&quot;: &quot;abradley1c@globo.com&quot;,
      &quot;ipaddress&quot;: &quot;229.152.117.127&quot;
    },
    {
      &quot;firstname&quot;: &quot;Lillian&quot;,
      &quot;lastname&quot;: &quot;Stephens&quot;,
      &quot;email&quot;: &quot;lstephens19@hugedomains.com&quot;,
      &quot;ipaddress&quot;: &quot;89.85.137.204&quot;
    },
    {
      &quot;firstname&quot;: &quot;Marie&quot;,
      &quot;lastname&quot;: &quot;Morgan&quot;,
      &quot;email&quot;: &quot;mmorganb@cloudflare.com&quot;,
      &quot;ipaddress&quot;: &quot;226.79.152.112&quot;
    },
    {
      &quot;firstname&quot;: &quot;Peter&quot;,
      &quot;lastname&quot;: &quot;Phillips&quot;,
      &quot;email&quot;: &quot;pphillipss@1688.com&quot;,
      &quot;ipaddress&quot;: &quot;11.158.255.76&quot;
    },
    {
      &quot;firstname&quot;: &quot;Adam&quot;,
      &quot;lastname&quot;: &quot;Anderson&quot;,
      &quot;email&quot;: &quot;aanderson8@google.fr&quot;,
      &quot;ipaddress&quot;: &quot;118.93.83.157&quot;
    },
    {
      &quot;firstname&quot;: &quot;Matthew&quot;,
      &quot;lastname&quot;: &quot;Porter&quot;,
      &quot;email&quot;: &quot;mporter9@europa.eu&quot;,
      &quot;ipaddress&quot;: &quot;174.81.178.88&quot;
    },
    {
      &quot;firstname&quot;: &quot;Susan&quot;,
      &quot;lastname&quot;: &quot;Andrews&quot;,
      &quot;email&quot;: &quot;sandrewsn@google.co.jp&quot;,
      &quot;ipaddress&quot;: &quot;228.214.9.251&quot;
    },
    {
      &quot;firstname&quot;: &quot;Catherine&quot;,
      &quot;lastname&quot;: &quot;Andrews&quot;,
      &quot;email&quot;: &quot;candrewsp@noaa.gov&quot;,
      &quot;ipaddress&quot;: &quot;112.111.87.178&quot;
    },
    {
      &quot;firstname&quot;: &quot;Edward&quot;,
      &quot;lastname&quot;: &quot;Hicks&quot;,
      &quot;email&quot;: &quot;ehicksc@pcworld.com&quot;,
      &quot;ipaddress&quot;: &quot;199.153.27.1&quot;
    },
    {
      &quot;firstname&quot;: &quot;Margaret&quot;,
      &quot;lastname&quot;: &quot;Evans&quot;,
      &quot;email&quot;: &quot;mevansh@pcworld.com&quot;,
      &quot;ipaddress&quot;: &quot;162.10.86.196&quot;
    },
    {
      &quot;firstname&quot;: &quot;Steven&quot;,
      &quot;lastname&quot;: &quot;Hamilton&quot;,
      &quot;email&quot;: &quot;shamiltonu@state.tx.us&quot;,
      &quot;ipaddress&quot;: &quot;38.194.91.201&quot;
    },
    {
      &quot;firstname&quot;: &quot;Eric&quot;,
      &quot;lastname&quot;: &quot;Miller&quot;,
      &quot;email&quot;: &quot;emillere@creativecommons.org&quot;,
      &quot;ipaddress&quot;: &quot;122.159.17.218&quot;
    },
    {
      &quot;firstname&quot;: &quot;Mildred&quot;,
      &quot;lastname&quot;: &quot;Watkins&quot;,
      &quot;email&quot;: &quot;mwatkins0@miibeian.gov.cn&quot;,
      &quot;ipaddress&quot;: &quot;150.67.132.64&quot;
    },
    {
      &quot;firstname&quot;: &quot;Marie&quot;,
      &quot;lastname&quot;: &quot;Thompson&quot;,
      &quot;email&quot;: &quot;mthompsonz@yelp.com&quot;,
      &quot;ipaddress&quot;: &quot;162.164.5.231&quot;
    },
    {
      &quot;firstname&quot;: &quot;Steve&quot;,
      &quot;lastname&quot;: &quot;Sanders&quot;,
      &quot;email&quot;: &quot;ssanders1b@wikispaces.com&quot;,
      &quot;ipaddress&quot;: &quot;91.61.109.245&quot;
    },
    {
      &quot;firstname&quot;: &quot;Anne&quot;,
      &quot;lastname&quot;: &quot;Brooks&quot;,
      &quot;email&quot;: &quot;abrooks16@bravesites.com&quot;,
      &quot;ipaddress&quot;: &quot;243.159.39.234&quot;
    },
    {
      &quot;firstname&quot;: &quot;Andrea&quot;,
      &quot;lastname&quot;: &quot;Gardner&quot;,
      &quot;email&quot;: &quot;agardnerv@woothemes.com&quot;,
      &quot;ipaddress&quot;: &quot;179.91.0.30&quot;
    },
    {
      &quot;firstname&quot;: &quot;Sean&quot;,
      &quot;lastname&quot;: &quot;Gibson&quot;,
      &quot;email&quot;: &quot;sgibsony@alexa.com&quot;,
      &quot;ipaddress&quot;: &quot;48.114.103.55&quot;
    },
    {
      &quot;firstname&quot;: &quot;Roy&quot;,
      &quot;lastname&quot;: &quot;Campbell&quot;,
      &quot;email&quot;: &quot;rcampbell1@geocities.com&quot;,
      &quot;ipaddress&quot;: &quot;237.232.34.20&quot;
    },
    {
      &quot;firstname&quot;: &quot;Bonnie&quot;,
      &quot;lastname&quot;: &quot;Coleman&quot;,
      &quot;email&quot;: &quot;bcoleman11@fc2.com&quot;,
      &quot;ipaddress&quot;: &quot;109.150.122.102&quot;
    },
    {
      &quot;firstname&quot;: &quot;Amanda&quot;,
      &quot;lastname&quot;: &quot;Nelson&quot;,
      &quot;email&quot;: &quot;anelson13@indiatimes.com&quot;,
      &quot;ipaddress&quot;: &quot;161.185.121.245&quot;
    },
    {
      &quot;firstname&quot;: &quot;Sean&quot;,
      &quot;lastname&quot;: &quot;Cruz&quot;,
      &quot;email&quot;: &quot;scruz10@answers.com&quot;,
      &quot;ipaddress&quot;: &quot;92.255.49.227&quot;
    },
    {
      &quot;firstname&quot;: &quot;Ruth&quot;,
      &quot;lastname&quot;: &quot;Jordan&quot;,
      &quot;email&quot;: &quot;rjordan1a@smugmug.com&quot;,
      &quot;ipaddress&quot;: &quot;193.140.80.64&quot;
    },
    {
      &quot;firstname&quot;: &quot;Mark&quot;,
      &quot;lastname&quot;: &quot;Richardson&quot;,
      &quot;email&quot;: &quot;mrichardson1d@ihg.com&quot;,
      &quot;ipaddress&quot;: &quot;209.217.14.154&quot;
    },
    {
      &quot;firstname&quot;: &quot;Antonio&quot;,
      &quot;lastname&quot;: &quot;Kim&quot;,
      &quot;email&quot;: &quot;akim4@odnoklassniki.ru&quot;,
      &quot;ipaddress&quot;: &quot;168.244.191.78&quot;
    },
    {
      &quot;firstname&quot;: &quot;Virginia&quot;,
      &quot;lastname&quot;: &quot;Graham&quot;,
      &quot;email&quot;: &quot;vgrahamk@aol.com&quot;,
      &quot;ipaddress&quot;: &quot;165.219.171.1&quot;
    },
    {
      &quot;firstname&quot;: &quot;Russell&quot;,
      &quot;lastname&quot;: &quot;Brown&quot;,
      &quot;email&quot;: &quot;rbrownq@nifty.com&quot;,
      &quot;ipaddress&quot;: &quot;215.38.120.242&quot;
    },
    {
      &quot;firstname&quot;: &quot;Kathleen&quot;,
      &quot;lastname&quot;: &quot;Rose&quot;,
      &quot;email&quot;: &quot;kroseg@pinterest.com&quot;,
      &quot;ipaddress&quot;: &quot;222.172.140.56&quot;
    },
    {
      &quot;firstname&quot;: &quot;Ernest&quot;,
      &quot;lastname&quot;: &quot;Coleman&quot;,
      &quot;email&quot;: &quot;ecoleman15@businessweek.com&quot;,
      &quot;ipaddress&quot;: &quot;213.173.4.7&quot;
    },
    {
      &quot;firstname&quot;: &quot;Virginia&quot;,
      &quot;lastname&quot;: &quot;Hawkins&quot;,
      &quot;email&quot;: &quot;vhawkinsf@ehow.com&quot;,
      &quot;ipaddress&quot;: &quot;93.120.46.203&quot;
    },
    {
      &quot;firstname&quot;: &quot;Russell&quot;,
      &quot;lastname&quot;: &quot;Campbell&quot;,
      &quot;email&quot;: &quot;rcampbell17@eventbrite.com&quot;,
      &quot;ipaddress&quot;: &quot;251.2.92.63&quot;
    },
    {
      &quot;firstname&quot;: &quot;Jennifer&quot;,
      &quot;lastname&quot;: &quot;Marshall&quot;,
      &quot;email&quot;: &quot;jmarshallt@gnu.org&quot;,
      &quot;ipaddress&quot;: &quot;104.191.49.94&quot;
    },
    {
      &quot;firstname&quot;: &quot;Rebecca&quot;,
      &quot;lastname&quot;: &quot;Cunningham&quot;,
      &quot;email&quot;: &quot;rcunninghamd@mac.com&quot;,
      &quot;ipaddress&quot;: &quot;65.79.191.52&quot;
    },
    {
      &quot;firstname&quot;: &quot;Joan&quot;,
      &quot;lastname&quot;: &quot;Roberts&quot;,
      &quot;email&quot;: &quot;jroberts12@alibaba.com&quot;,
      &quot;ipaddress&quot;: &quot;4.91.143.62&quot;
    },
    {
      &quot;firstname&quot;: &quot;Alan&quot;,
      &quot;lastname&quot;: &quot;Vasquez&quot;,
      &quot;email&quot;: &quot;avasquezo@miibeian.gov.cn&quot;,
      &quot;ipaddress&quot;: &quot;178.109.86.172&quot;
    },
    {
      &quot;firstname&quot;: &quot;Shirley&quot;,
      &quot;lastname&quot;: &quot;Scott&quot;,
      &quot;email&quot;: &quot;sscottm@macromedia.com&quot;,
      &quot;ipaddress&quot;: &quot;219.237.108.82&quot;
    },
    {
      &quot;firstname&quot;: &quot;Nicole&quot;,
      &quot;lastname&quot;: &quot;Thompson&quot;,
      &quot;email&quot;: &quot;nthompson3@admin.ch&quot;,
      &quot;ipaddress&quot;: &quot;13.183.208.155&quot;
    },
    {
      &quot;firstname&quot;: &quot;Jeffrey&quot;,
      &quot;lastname&quot;: &quot;Ford&quot;,
      &quot;email&quot;: &quot;jford14@cnet.com&quot;,
      &quot;ipaddress&quot;: &quot;210.216.54.14&quot;
    },
    {
      &quot;firstname&quot;: &quot;Deborah&quot;,
      &quot;lastname&quot;: &quot;George&quot;,
      &quot;email&quot;: &quot;dgeorge6@furl.net&quot;,
      &quot;ipaddress&quot;: &quot;201.76.47.162&quot;
    },
    {
      &quot;firstname&quot;: &quot;Eric&quot;,
      &quot;lastname&quot;: &quot;Matthews&quot;,
      &quot;email&quot;: &quot;ematthews5@independent.co.uk&quot;,
      &quot;ipaddress&quot;: &quot;138.194.30.1&quot;
    },
    {
      &quot;firstname&quot;: &quot;Raymond&quot;,
      &quot;lastname&quot;: &quot;Mcdonald&quot;,
      &quot;email&quot;: &quot;rmcdonald2@ihg.com&quot;,
      &quot;ipaddress&quot;: &quot;161.24.42.24&quot;
    },
    {
      &quot;firstname&quot;: &quot;Richard&quot;,
      &quot;lastname&quot;: &quot;Cruz&quot;,
      &quot;email&quot;: &quot;rcruz7@unc.edu&quot;,
      &quot;ipaddress&quot;: &quot;235.124.23.221&quot;
    },
    {
      &quot;firstname&quot;: &quot;Mark&quot;,
      &quot;lastname&quot;: &quot;Johnson&quot;,
      &quot;email&quot;: &quot;mjohnsonj@hostgator.com&quot;,
      &quot;ipaddress&quot;: &quot;73.87.135.206&quot;
    },
    {
      &quot;firstname&quot;: &quot;Lisa&quot;,
      &quot;lastname&quot;: &quot;Olson&quot;,
      &quot;email&quot;: &quot;lolsonr@telegraph.co.uk&quot;,
      &quot;ipaddress&quot;: &quot;77.245.172.100&quot;
    },
    {
      &quot;firstname&quot;: &quot;Eugene&quot;,
      &quot;lastname&quot;: &quot;Williams&quot;,
      &quot;email&quot;: &quot;ewilliamsi@deliciousdays.com&quot;,
      &quot;ipaddress&quot;: &quot;67.208.26.182&quot;
    },
    {
      &quot;firstname&quot;: &quot;Ryan&quot;,
      &quot;lastname&quot;: &quot;Burton&quot;,
      &quot;email&quot;: &quot;rburton18@foxnews.com&quot;,
      &quot;ipaddress&quot;: &quot;159.60.107.14&quot;
    },
    {
      &quot;firstname&quot;: &quot;Alice&quot;,
      &quot;lastname&quot;: &quot;Ortiz&quot;,
      &quot;email&quot;: &quot;aortizw@histats.com&quot;,
      &quot;ipaddress&quot;: &quot;179.52.222.21&quot;
    },
    {
      &quot;firstname&quot;: &quot;Jonathan&quot;,
      &quot;lastname&quot;: &quot;Morales&quot;,
      &quot;email&quot;: &quot;jmoralesa@ovh.net&quot;,
      &quot;ipaddress&quot;: &quot;97.65.110.105&quot;
    },
    {
      &quot;firstname&quot;: &quot;Tammy&quot;,
      &quot;lastname&quot;: &quot;Ray&quot;,
      &quot;email&quot;: &quot;trayx@weather.com&quot;,
      &quot;ipaddress&quot;: &quot;192.243.38.190&quot;
    }])
</code></pre></div>
</details>
<p>Im Terminal erscheint eine Ausgabe in der folgenden Form:</p>
<details>
<summary>Ausgabe im Terminal</summary>
<div class="language-text highlight"><pre><span></span><code>{
  acknowledged: true,
  insertedIds: {
    &#39;0&#39;: ObjectId(&quot;61af491bfef87d1bebfa13d4&quot;),
    &#39;1&#39;: ObjectId(&quot;61af491bfef87d1bebfa13d5&quot;),
    &#39;2&#39;: ObjectId(&quot;61af491bfef87d1bebfa13d6&quot;),
    &#39;3&#39;: ObjectId(&quot;61af491bfef87d1bebfa13d7&quot;),
    &#39;4&#39;: ObjectId(&quot;61af491bfef87d1bebfa13d8&quot;),
    &#39;5&#39;: ObjectId(&quot;61af491bfef87d1bebfa13d9&quot;),
    &#39;6&#39;: ObjectId(&quot;61af491bfef87d1bebfa13da&quot;),
    &#39;7&#39;: ObjectId(&quot;61af491bfef87d1bebfa13db&quot;),
    &#39;8&#39;: ObjectId(&quot;61af491bfef87d1bebfa13dc&quot;),
    &#39;9&#39;: ObjectId(&quot;61af491bfef87d1bebfa13dd&quot;),
    &#39;10&#39;: ObjectId(&quot;61af491bfef87d1bebfa13de&quot;),
    &#39;11&#39;: ObjectId(&quot;61af491bfef87d1bebfa13df&quot;),
    &#39;12&#39;: ObjectId(&quot;61af491bfef87d1bebfa13e0&quot;),
    &#39;13&#39;: ObjectId(&quot;61af491bfef87d1bebfa13e1&quot;),
    &#39;14&#39;: ObjectId(&quot;61af491bfef87d1bebfa13e2&quot;),
    &#39;15&#39;: ObjectId(&quot;61af491bfef87d1bebfa13e3&quot;),
    &#39;16&#39;: ObjectId(&quot;61af491bfef87d1bebfa13e4&quot;),
    &#39;17&#39;: ObjectId(&quot;61af491bfef87d1bebfa13e5&quot;),
    &#39;18&#39;: ObjectId(&quot;61af491bfef87d1bebfa13e6&quot;),
    &#39;19&#39;: ObjectId(&quot;61af491bfef87d1bebfa13e7&quot;),
    &#39;20&#39;: ObjectId(&quot;61af491bfef87d1bebfa13e8&quot;),
    &#39;21&#39;: ObjectId(&quot;61af491bfef87d1bebfa13e9&quot;),
    &#39;22&#39;: ObjectId(&quot;61af491bfef87d1bebfa13ea&quot;),
    &#39;23&#39;: ObjectId(&quot;61af491bfef87d1bebfa13eb&quot;),
    &#39;24&#39;: ObjectId(&quot;61af491bfef87d1bebfa13ec&quot;),
    &#39;25&#39;: ObjectId(&quot;61af491bfef87d1bebfa13ed&quot;),
    &#39;26&#39;: ObjectId(&quot;61af491bfef87d1bebfa13ee&quot;),
    &#39;27&#39;: ObjectId(&quot;61af491bfef87d1bebfa13ef&quot;),
    &#39;28&#39;: ObjectId(&quot;61af491bfef87d1bebfa13f0&quot;),
    &#39;29&#39;: ObjectId(&quot;61af491bfef87d1bebfa13f1&quot;),
    &#39;30&#39;: ObjectId(&quot;61af491bfef87d1bebfa13f2&quot;),
    &#39;31&#39;: ObjectId(&quot;61af491bfef87d1bebfa13f3&quot;),
    &#39;32&#39;: ObjectId(&quot;61af491bfef87d1bebfa13f4&quot;),
    &#39;33&#39;: ObjectId(&quot;61af491bfef87d1bebfa13f5&quot;),
    &#39;34&#39;: ObjectId(&quot;61af491bfef87d1bebfa13f6&quot;),
    &#39;35&#39;: ObjectId(&quot;61af491bfef87d1bebfa13f7&quot;),
    &#39;36&#39;: ObjectId(&quot;61af491bfef87d1bebfa13f8&quot;),
    &#39;37&#39;: ObjectId(&quot;61af491bfef87d1bebfa13f9&quot;),
    &#39;38&#39;: ObjectId(&quot;61af491bfef87d1bebfa13fa&quot;),
    &#39;39&#39;: ObjectId(&quot;61af491bfef87d1bebfa13fb&quot;),
    &#39;40&#39;: ObjectId(&quot;61af491bfef87d1bebfa13fc&quot;),
    &#39;41&#39;: ObjectId(&quot;61af491bfef87d1bebfa13fd&quot;),
    &#39;42&#39;: ObjectId(&quot;61af491bfef87d1bebfa13fe&quot;),
    &#39;43&#39;: ObjectId(&quot;61af491bfef87d1bebfa13ff&quot;),
    &#39;44&#39;: ObjectId(&quot;61af491bfef87d1bebfa1400&quot;),
    &#39;45&#39;: ObjectId(&quot;61af491bfef87d1bebfa1401&quot;),
    &#39;46&#39;: ObjectId(&quot;61af491bfef87d1bebfa1402&quot;),
    &#39;47&#39;: ObjectId(&quot;61af491bfef87d1bebfa1403&quot;),
    &#39;48&#39;: ObjectId(&quot;61af491bfef87d1bebfa1404&quot;),
    &#39;49&#39;: ObjectId(&quot;61af491bfef87d1bebfa1405&quot;)
  }
}
members&gt;
</code></pre></div>
</details>
<p>Die Datenbank <code>members</code> existiert nun und ist mit Daten befüllt. Wir können uns z.B. alle diese Daten mit </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>db.members.find<span class="o">()</span>
</span></code></pre></div>
<p>anzeigen lassen oder z.B. mit </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>db.members.find<span class="o">(</span><span class="w"> </span><span class="o">{</span><span class="w"> </span>forename:<span class="w"> </span><span class="s2">&quot;Sean&quot;</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">)</span>
</span></code></pre></div>
<p>alle Einträge anzeigen lassen, in denen <code>forename</code> den Wert <code>'Sean'</code> hat:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="o">[</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">  </span><span class="o">{</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span>_id:<span class="w"> </span>ObjectId<span class="o">(</span><span class="s2">&quot;61af491bfef87d1bebfa13e1&quot;</span><span class="o">)</span>,
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">    </span>forename:<span class="w"> </span><span class="s1">&#39;Sean&#39;</span>,
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">    </span>surname:<span class="w"> </span><span class="s1">&#39;Cruz&#39;</span>,
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">    </span>email:<span class="w"> </span><span class="s1">&#39;scruz10@answers.com&#39;</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">  </span><span class="o">}</span>,
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">  </span><span class="o">{</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">    </span>_id:<span class="w"> </span>ObjectId<span class="o">(</span><span class="s2">&quot;61af491bfef87d1bebfa13e7&quot;</span><span class="o">)</span>,
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">    </span>forename:<span class="w"> </span><span class="s1">&#39;Sean&#39;</span>,
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="w">    </span>surname:<span class="w"> </span><span class="s1">&#39;Gibson&#39;</span>,
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">    </span>email:<span class="w"> </span><span class="s1">&#39;sgibsony@alexa.com&#39;</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">  </span><span class="o">}</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="o">]</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>members&gt;<span class="w"> </span>
</span></code></pre></div>
<h3 id="mongodb-in-vscode">MongoDB in VSCode<a class="headerlink" href="#mongodb-in-vscode" title="Permanent link">&para;</a></h3>
<p>Falls Sie <em>Visual Studio Code</em> verwenden und darin die <a href="https://code.visualstudio.com/docs/azure/mongodb">MongoDB for VS Code</a>-Erweiterung installiert haben, können Sie auf der linken Seite auf das MongoDB-Blatt klicken und das <code>Advanced Connection Settings</code> mit dem Formular <code>Open form</code> anklicken.</p>
<p>Sie geben <code>mongodb://127.0.0.1:27017</code> ein (falls Sie MongoDB lokal installiert haben) und dass Sie keine Authentifizierung verwenden. Öffnen Sie die <code>connection</code> und darin <code>members</code> und es erscheint</p>
<p><img alt="mongodb" src="../files/220_mongodb.png" /></p>
<h2 id="node-projekt-mit-mongodb-verbinden">Node-Projekt mit MongoDB verbinden<a class="headerlink" href="#node-projekt-mit-mongodb-verbinden" title="Permanent link">&para;</a></h2>
<p>Zur Anbindung der Datenbank an unser Node.js-Projekt verwenden wir <a href="https://www.npmjs.com/package/mongoose">Mongoose</a>. Siehe dazu auch <a href="https://mongoosejs.com/">mongoosejs.com</a>. <em>Mongoose</em> ist ein <em>Object Modeling</em> Werkzeug und interpretiert die Dokumente einer MongoDB als Objekte. Wir installieren <em>Mongoose</em> mittels</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>npm<span class="w"> </span>i<span class="w"> </span>mongoose
</span></code></pre></div>
<p>Es erscheint </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>added<span class="w"> </span><span class="m">17</span><span class="w"> </span>packages,<span class="w"> </span>and<span class="w"> </span>audited<span class="w"> </span><span class="m">84</span><span class="w"> </span>packages<span class="w"> </span><span class="k">in</span><span class="w"> </span>2s
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="m">15</span><span class="w"> </span>packages<span class="w"> </span>are<span class="w"> </span>looking<span class="w"> </span><span class="k">for</span><span class="w"> </span>funding
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">  </span>run<span class="w"> </span><span class="sb">`</span>npm<span class="w"> </span>fund<span class="sb">`</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>details
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>found<span class="w"> </span><span class="m">0</span><span class="w"> </span>vulnerabilities
</span></code></pre></div>
<p>und in der <code>package.json</code></p>
<div class="language-json highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-16">16</a></span>
<span class="normal"><a href="#__codelineno-25-17">17</a></span>
<span class="normal"><a href="#__codelineno-25-18">18</a></span>
<span class="normal"><a href="#__codelineno-25-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16"></a><span class="w">  </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17"></a><span class="w">    </span><span class="nt">&quot;express&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^5.1.0&quot;</span><span class="p">,</span>
</span><span id="__span-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18"></a><span class="hll"><span class="w">    </span><span class="nt">&quot;mongoose&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^8.15.1&quot;</span>
</span></span><span id="__span-25-19"><a id="__codelineno-25-19" name="__codelineno-25-19"></a><span class="w">  </span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Um sich in Node.js mit der MongoDB zu verbinden, geben Sie </p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">server.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span>
<span class="normal"><a href="#__codelineno-26-15">15</a></span>
<span class="normal"><a href="#__codelineno-26-16">16</a></span>
<span class="normal"><a href="#__codelineno-26-17">17</a></span>
<span class="normal"><a href="#__codelineno-26-18">18</a></span>
<span class="normal"><a href="#__codelineno-26-19">19</a></span>
<span class="normal"><a href="#__codelineno-26-20">20</a></span>
<span class="normal"><a href="#__codelineno-26-21">21</a></span>
<span class="normal"><a href="#__codelineno-26-22">22</a></span>
<span class="normal"><a href="#__codelineno-26-23">23</a></span>
<span class="normal"><a href="#__codelineno-26-24">24</a></span>
<span class="normal"><a href="#__codelineno-26-25">25</a></span>
<span class="normal"><a href="#__codelineno-26-26">26</a></span>
<span class="normal"><a href="#__codelineno-26-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./routes&#39;</span><span class="p">);</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">mongoose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mongoose&#39;</span><span class="p">);</span>
</span></span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4"></a>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">();</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="kd">const</span><span class="w"> </span><span class="nx">PORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3000</span><span class="p">;</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7"></a>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">routes</span><span class="p">);</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10"></a>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="hll"><span class="c1">// connect to mongoDB</span>
</span></span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="hll"><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">&#39;mongodb+srv://&lt;username&gt;:&lt;passwort&gt;@cluster0.g3nbd.mongodb.net&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">dbName</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;members&#39;</span><span class="w"> </span><span class="p">});</span>
</span></span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connection</span><span class="p">;</span>
</span></span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="hll"><span class="nx">db</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="hll"><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
</span></span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16"></a><span class="hll"><span class="p">});</span>
</span></span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17"></a><span class="hll"><span class="nx">db</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18"></a><span class="hll"><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;connected to DB&#39;</span><span class="p">);</span>
</span></span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19"></a><span class="hll"><span class="p">});</span>
</span></span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20"></a>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21"></a><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Server started and listening on port </span><span class="si">${</span><span class="nx">PORT</span><span class="si">}</span><span class="sb"> ... `</span><span class="p">);</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27"></a><span class="p">});</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>ein. Sie müssen natürlich Ihren Nutzerinnennamen und Ihr Passwort einsetzen. Sollten Sie eine MongoDB lokal installiert haben, dann verbinden Sie sich mit <code>mongodb://127.0.0.1:27017</code> (bzw. <code>mongodb://127.0.0.1:27017/members</code>). Im Terminal sollte dann</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="o">[</span>nodemon<span class="o">]</span><span class="w"> </span>restarting<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>changes...
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="o">[</span>nodemon<span class="o">]</span><span class="w"> </span>starting<span class="w"> </span><span class="sb">`</span>node<span class="w"> </span>./server.js<span class="sb">`</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>Server<span class="w"> </span>started<span class="w"> </span>and<span class="w"> </span>listening<span class="w"> </span>on<span class="w"> </span>port<span class="w"> </span><span class="m">3000</span><span class="w"> </span>...
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>connected<span class="w"> </span>to<span class="w"> </span>DB
</span></code></pre></div>
<p>erscheinen. </p>
<h3 id="dotenv-fur-sichere-zugangsdaten">Dotenv für sichere Zugangsdaten<a class="headerlink" href="#dotenv-fur-sichere-zugangsdaten" title="Permanent link">&para;</a></h3>
<p>Für die "geheimen" Zugangsdaten (die jetzt noch gar nicht "geheim" sind) verwenden wir das <a href="https://www.npmjs.com/package/dotenv">dotenv</a>-Paket:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>npm<span class="w"> </span>install<span class="w"> </span>dotenv<span class="w"> </span>--save
</span></code></pre></div>
<p>Im Projektordner erstellen wir und eine Datei <code>.env</code> (mit Punkt!) und schreiben darin entweder für die lokale MongoDB</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">.env</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="nx">DB_CONNECTION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mongodb</span><span class="o">:</span><span class="c1">//127.0.0.1:27017/members</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>oder für die Atlas-Verbindung</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">.env</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span>
<span class="normal"><a href="#__codelineno-30-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="nx">DB_CONNECTION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mongodb</span><span class="o">+</span><span class="nx">srv</span><span class="o">:</span><span class="c1">//&lt;username&gt;:&lt;passwort&gt;@cluster0.g3nbd.mongodb.net</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="nx">DATABASE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">members</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Beachten Sie, dass der Wert nicht in Hochkomma steht (kann aber! - ist bei Sonderzeichen sogar notwendig) und dass auch kein Semikolon folgt! 
Wir fügen <code>dotenv</code> n die <code>server.js</code> ein und greifen mithilfe von <code>process.env.DB_CONNECTION</code> auf den Wert von <code>DB_CONNECTION</code> zu (und mit <code>process.env.DATEBASE</code> auf den Wert von <code>DATABASE</code>) :</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">server.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-31-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-31-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-31-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-31-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-31-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-31-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-31-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-31-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-31-10">10</a></span>
<span class="normal"><a href="#__codelineno-31-11">11</a></span>
<span class="normal"><a href="#__codelineno-31-12">12</a></span>
<span class="normal"><a href="#__codelineno-31-13">13</a></span>
<span class="normal"><a href="#__codelineno-31-14">14</a></span>
<span class="normal"><a href="#__codelineno-31-15">15</a></span>
<span class="normal"><a href="#__codelineno-31-16">16</a></span>
<span class="normal"><a href="#__codelineno-31-17">17</a></span>
<span class="normal"><a href="#__codelineno-31-18">18</a></span>
<span class="normal"><a href="#__codelineno-31-19">19</a></span>
<span class="normal"><a href="#__codelineno-31-20">20</a></span>
<span class="normal"><a href="#__codelineno-31-21">21</a></span>
<span class="normal"><a href="#__codelineno-31-22">22</a></span>
<span class="normal"><a href="#__codelineno-31-23">23</a></span>
<span class="normal"><a href="#__codelineno-31-24">24</a></span>
<span class="normal"><a href="#__codelineno-31-25">25</a></span>
<span class="normal"><a href="#__codelineno-31-26">26</a></span>
<span class="normal"><a href="#__codelineno-31-27">27</a></span>
<span class="normal"><a href="#__codelineno-31-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./routes&#39;</span><span class="p">);</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">mongoose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mongoose&#39;</span><span class="p">);</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="hll"><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;dotenv&#39;</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>
</span></span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5"></a>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">();</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="kd">const</span><span class="w"> </span><span class="nx">PORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3000</span><span class="p">;</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8"></a>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">routes</span><span class="p">);</span>
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11"></a>
</span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12"></a><span class="c1">// connect to mongoDB</span>
</span><span id="__span-31-13"><a id="__codelineno-31-13" name="__codelineno-31-13"></a><span class="hll"><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DB_CONNECTION</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">dbName</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABASE</span><span class="w"> </span><span class="p">});</span>
</span></span><span id="__span-31-14"><a id="__codelineno-31-14" name="__codelineno-31-14"></a><span class="kd">const</span><span class="w"> </span><span class="nx">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connection</span><span class="p">;</span>
</span><span id="__span-31-15"><a id="__codelineno-31-15" name="__codelineno-31-15"></a><span class="nx">db</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-16"><a id="__codelineno-31-16" name="__codelineno-31-16"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
</span><span id="__span-31-17"><a id="__codelineno-31-17" name="__codelineno-31-17"></a><span class="p">});</span>
</span><span id="__span-31-18"><a id="__codelineno-31-18" name="__codelineno-31-18"></a><span class="nx">db</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-19"><a id="__codelineno-31-19" name="__codelineno-31-19"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;connected to DB&#39;</span><span class="p">);</span>
</span><span id="__span-31-20"><a id="__codelineno-31-20" name="__codelineno-31-20"></a><span class="p">});</span>
</span><span id="__span-31-21"><a id="__codelineno-31-21" name="__codelineno-31-21"></a>
</span><span id="__span-31-22"><a id="__codelineno-31-22" name="__codelineno-31-22"></a><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-23"><a id="__codelineno-31-23" name="__codelineno-31-23"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-24"><a id="__codelineno-31-24" name="__codelineno-31-24"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-31-25"><a id="__codelineno-31-25" name="__codelineno-31-25"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-26"><a id="__codelineno-31-26" name="__codelineno-31-26"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Server started and listening on port </span><span class="si">${</span><span class="nx">PORT</span><span class="si">}</span><span class="sb"> ... `</span><span class="p">);</span>
</span><span id="__span-31-27"><a id="__codelineno-31-27" name="__codelineno-31-27"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-31-28"><a id="__codelineno-31-28" name="__codelineno-31-28"></a><span class="p">});</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>In Zeil <code>3</code> wird das <code>dotenv</code>-Paket importiert. Mithilfe der <code>config()</code>-Funktion wird die <code>.env</code>-datei eingelesen. Auf die in der <code>.env</code>-Datei hinterlegten Schlüssel-Werte-Paare (mit <code>=</code> dazwischen) kann dann mittels <code>process.env.&lt;Schlüssel&gt;</code> zugegriffen werden (siehe Zeile <code>14</code>). </p>
<p>Beachten Sie, die <code>.env</code>-Datei in die <code>.gitignore</code> einzutragen. Die <code>.env</code>-Datei sollte <strong>nicht</strong> committed werden!</p>
<h3 id="ein-model-erstellen">Ein Model erstellen<a class="headerlink" href="#ein-model-erstellen" title="Permanent link">&para;</a></h3>
<p>Mongoose ist <a href="https://mongoosejs.com/docs/guide.html">Schema</a>-basiert. Ein Schema kann man sich wie ein Datenmodell vorstellen. Tatsächlich wird es verwendet, um ein entsprechendes Mongoose-Model zu erstellen. Ein Schema wird unter Aufruf des Konstruktors (<code>new Schema()</code>) in Mongoose erstellt. Unter Verwendung des Schemas wird dann mithilfe der <code>model()</code>-Funktion das Datenmodell erzeugt. </p>
<p>Wir werden im Folgenden zeigen, wie ein Schema für <code>members</code> erstellt wird. Das Datenmodell heißt dann <code>Member</code>. Um später auch weitere Schemata, z.B. für <code>user</code> o.ä. zu entwicklen und diese zu trennen, erstellen wir das Schema in einem eigenen Ordner <code>models</code>. Das bedeutet, wir erstellen im Projektordner </p>
<ul>
<li>ein Ordner <code>models</code> und</li>
<li>darin eine Datei <code>models/members.js</code></li>
</ul>
<p>Die Datei <code>members.js</code> bekommt folgenden Inhalt:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">models/members.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">mongoose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mongoose&#39;</span><span class="p">);</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">schema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">Schema</span><span class="p">({</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">    </span><span class="nx">firstname</span><span class="o">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">    </span><span class="nx">lastname</span><span class="o">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">    </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="w">    </span><span class="nx">ipaddress</span><span class="o">:</span><span class="w"> </span><span class="nb">String</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="p">});</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s1">&#39;Member&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">schema</span><span class="p">);</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>Weiterführende Informationen zu Mongoose-Models finden Sie z.B. <a href="https://mongoosejs.com/docs/models.html">hier</a>. Das Thema Schema wird z.B. <a href="https://mongoosejs.com/docs/guide.html">hier</a> näher erläutert. </p>
<h3 id="zugriffe-auf-die-datenbank">Zugriffe auf die Datenbank<a class="headerlink" href="#zugriffe-auf-die-datenbank" title="Permanent link">&para;</a></h3>
<p>Nun haben wir alles, was wir benötigen, um unsere Anfragen zu implementieren. Wir nutzen den <code>express.Router</code>, um die Routen zu definieren und können mithilfe des Mongoose-Models auf die MongoDB zugreifen. Wir werden nun sukzessive alle Anfragen in die <code>routes.js</code> einfügen. </p>
<h4 id="r-read-all">R - read all<a class="headerlink" href="#r-read-all" title="Permanent link">&para;</a></h4>
<p>Wir beginnen mit der Anfrage, alle Daten aus der Datenbank auszulesen. Für die MongoDB erfolgt dies mit der Funktion <code>find()</code>. In <code>routes.js</code> ändern wir unsere <code>GET</code>-Anfrage wie folgt: </p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">routes.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-javascript highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-33-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-33-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-33-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-33-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-33-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span>
<span class="normal"><a href="#__codelineno-33-11">11</a></span>
<span class="normal"><a href="#__codelineno-33-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">router</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">Member</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./models/members&#39;</span><span class="p">);</span>
</span></span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4"></a>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="c1">// get all members</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="hll"><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/members&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="hll"><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">allMembers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">Member</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</span></span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="hll"><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">allMembers</span><span class="p">);</span>
</span></span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="hll"><span class="w">    </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">allMembers</span><span class="p">);</span>
</span></span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="hll"><span class="p">});</span>
</span></span><span id="__span-33-11"><a id="__codelineno-33-11" name="__codelineno-33-11"></a>
</span><span id="__span-33-12"><a id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">router</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Beachten Sie, dass wir dazu nun das <code>Member</code>-Model in die <code>routes.js</code> einbinden (Zeile <code>3</code>). Die Route wird mit <code>localhost:3000/members</code> definiert. Die anonyme Callback-Funktion enthält noch zwei Schlüsselwörter: <code>async</code> und <code>await</code>. Die Funktion <code>find()</code> ist ein sogenanntes <em>Promise</em> (siehe dazu <a href="../promises/#promises">hier</a>). Die Funktion <code>find()</code> wird asynchron ausgeführt und "irgendwann" ist entweder das Ergebnis dieser Funktion verfügbar oder die Funktion gibt einen Fehler zurück. Auf eines der beiden wird gewartet (<code>await</code>). Nur eine als <code>async</code> deklarierte Funktion darf einen <code>await</code>-Aufruf enthalten (siehe dazu z.B. <a href="https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Statements/async_function">hier</a>).</p>
<p>Die Ausgabe der Werte auf die Konsole (Zeile <code>8</code>) ist natürlich nicht erforderlich und Sie können sie auch löschen, wenn Sie wollen. Wenn Sie nun in Postman <code>GET http://localhost:3000/members</code> aufrufen, erscheinen alle Einträge aus der Datenbank:</p>
<p><img alt="postman" src="../files/94_postman.png" /></p>
<h4 id="c-create">C - create<a class="headerlink" href="#c-create" title="Permanent link">&para;</a></h4>
<p>Als nächstes implementieren wir einen Endpunkt, an dem wir einen neuen Datensatz in die Datenbank anlegen können. Dafür gibt es die http-Methode <code>POST</code>. Wir führen also nicht mehr eine <code>GET</code>-, sondern eine <code>POST</code>-Anfrage durch. Bei dieser <code>POST</code>-Anfrage wird der neue Datensatz an den Webserver mitgeschickt. Dies erfolgt im <code>body</code> des <code>request</code>-Objektes. Das Schreiben des Datensatzes in die Datenbank erfolgt mithilfe der <code>save()</code>-Funktion von MongoDB. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:1"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">routes.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-javascript highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-12">12</a></span>
<span class="normal"><a href="#__codelineno-34-13">13</a></span>
<span class="normal"><a href="#__codelineno-34-14">14</a></span>
<span class="normal"><a href="#__codelineno-34-15">15</a></span>
<span class="normal"><a href="#__codelineno-34-16">16</a></span>
<span class="normal"><a href="#__codelineno-34-17">17</a></span>
<span class="normal"><a href="#__codelineno-34-18">18</a></span>
<span class="normal"><a href="#__codelineno-34-19">19</a></span>
<span class="normal"><a href="#__codelineno-34-20">20</a></span>
<span class="normal"><a href="#__codelineno-34-21">21</a></span>
<span class="normal"><a href="#__codelineno-34-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12"></a><span class="c1">// post one member</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13"></a><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/members&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">newMember</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Member</span><span class="p">({</span>
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15"></a><span class="w">        </span><span class="nx">firstname</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">firstname</span><span class="p">,</span>
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16"></a><span class="w">        </span><span class="nx">lastname</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">lastname</span><span class="p">,</span>
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17"></a><span class="w">        </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18"></a><span class="w">        </span><span class="nx">ipaddress</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">ipaddress</span>
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20"></a><span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">newMember</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</span><span id="__span-34-21"><a id="__codelineno-34-21" name="__codelineno-34-21"></a><span class="w">    </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">newMember</span><span class="p">);</span>
</span><span id="__span-34-22"><a id="__codelineno-34-22" name="__codelineno-34-22"></a><span class="p">});</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>In den Zeilen <code>15-17</code> werden die Daten aus dem <code>body</code> des <code>request</code>-Objektes ausgelesen und mit diesen Daten ein neues <code>Member</code>-Objekt erzeugt. Dieses neue <code>Member</code>-Objekt (<code>newMember</code>) wird in Zeile <code>19</code> in die Datenbank gespeichert und in Zeile <code>20</code> als <code>response</code> zurückgeschickt.  </p>
<p>Nun geben wir in Postman <code>POST http://localhost:3000/members</code> ein und befüllen den <code>Body</code> z.B. mit:</p>
<div class="language-json highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1">1</a></span>
<span class="normal"><a href="#__codelineno-35-2">2</a></span>
<span class="normal"><a href="#__codelineno-35-3">3</a></span>
<span class="normal"><a href="#__codelineno-35-4">4</a></span>
<span class="normal"><a href="#__codelineno-35-5">5</a></span>
<span class="normal"><a href="#__codelineno-35-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="p">{</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="w">    </span><span class="nt">&quot;firstname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Maria&quot;</span><span class="p">,</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="w">    </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Musterfrau&quot;</span><span class="p">,</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;maria@musterfrau.fr&quot;</span><span class="p">,</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="w">    </span><span class="nt">&quot;ipaddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;146.146.11.46&quot;</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Achten Sie darauf, dass in der zweiten Menüzeile rechts <code>JSON</code> ausgewählt ist (im Bild blau) - nicht <code>Text</code>. Wir klicken auf <code>Send</code> und es erscheint:</p>
<p><img alt="postman" src="../files/95_postman.png" /></p>
<p>Schauen Sie auch in Compass nach, ob der Datensatz dort erscheint:</p>
<p><img alt="phpmyadmin" src="../files/267_mongodb.png" /></p>
<h4 id="r-read-one">R - read one<a class="headerlink" href="#r-read-one" title="Permanent link">&para;</a></h4>
<p>Wir erweitern die <code>routes.js</code> um einen Endpunkt, der uns für eine gegebene <code>id</code> den entsprechenden Datensatz zurückliefert. Die <code>_id</code> werden von MongoDB automatisch vergeben und sind recht kryptisch, also z.B. <code>"61b0e4fcc050789546f979d3"</code>. Wir können natürlich nach jedem beliebigen Wert für jeden Schlüssel in der Datenbank suchen. Wir nehmen hier beispielhaft die <code>_id</code>. </p>
<p>Die <code>id</code> wird aus der URL des Endpunktes ausgelesen, d.h. wenn wir bspw. den Endpunkt <code>GET http://localhost:3000/members/61b0e4fcc050789546f979d3</code> eingeben, dann soll der Datensatz mit der <code>_id: 61b0e4fcc050789546f979d3</code> im JSON-Format zurückgegeben werden. Wir nutzen dazu parametrisierte Routen und lesen die <code>id</code> aus der Parameterliste aus. Paremtrisierte Routen werden per <code>:</code> und dann den Namen des Parameters (hier <code>id</code>) erstellt. Um dann den Wert des Parametrs <code>id</code> aus der Parameterliste auszulesen, wird <code>params</code> verwendet. Im folgenden Code lassen wir <code>req.params</code> auf die Konsole ausgeben, um die Funktionsweise zu erläutern. Diese Ausgabe kann natürlich gelöscht werden (Zeile <code>27</code>). </p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:1"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">routes.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-javascript highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-23">23</a></span>
<span class="normal"><a href="#__codelineno-36-24">24</a></span>
<span class="normal"><a href="#__codelineno-36-25">25</a></span>
<span class="normal"><a href="#__codelineno-36-26">26</a></span>
<span class="normal"><a href="#__codelineno-36-27">27</a></span>
<span class="normal"><a href="#__codelineno-36-28">28</a></span>
<span class="normal"><a href="#__codelineno-36-29">29</a></span>
<span class="normal"><a href="#__codelineno-36-30">30</a></span>
<span class="normal"><a href="#__codelineno-36-31">31</a></span>
<span class="normal"><a href="#__codelineno-36-32">32</a></span>
<span class="normal"><a href="#__codelineno-36-33">33</a></span>
<span class="normal"><a href="#__codelineno-36-34">34</a></span>
<span class="normal"><a href="#__codelineno-36-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-36-23"><a id="__codelineno-36-23" name="__codelineno-36-23"></a><span class="c1">// get one member via id</span>
</span><span id="__span-36-24"><a id="__codelineno-36-24" name="__codelineno-36-24"></a><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/members/:id&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-25"><a id="__codelineno-36-25" name="__codelineno-36-25"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">member</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">Member</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="w"> </span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-36-26"><a id="__codelineno-36-26" name="__codelineno-36-26"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">);</span>
</span><span id="__span-36-27"><a id="__codelineno-36-27" name="__codelineno-36-27"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">member</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-28"><a id="__codelineno-36-28" name="__codelineno-36-28"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">member</span><span class="p">);</span>
</span><span id="__span-36-29"><a id="__codelineno-36-29" name="__codelineno-36-29"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-30"><a id="__codelineno-36-30" name="__codelineno-36-30"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">404</span><span class="p">);</span>
</span><span id="__span-36-31"><a id="__codelineno-36-31" name="__codelineno-36-31"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span><span id="__span-36-32"><a id="__codelineno-36-32" name="__codelineno-36-32"></a><span class="w">            </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Member does not exist!&quot;</span>
</span><span id="__span-36-33"><a id="__codelineno-36-33" name="__codelineno-36-33"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-36-34"><a id="__codelineno-36-34" name="__codelineno-36-34"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-36-35"><a id="__codelineno-36-35" name="__codelineno-36-35"></a><span class="p">})</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Zum Finden eines einzelnen Datensatzes wird in MongoDB die Funktion <code>findOne()</code> verwendet (siehe <a href="https://docs.mongodb.com/manual/reference/method/db.collection.findOne">hier</a>). Wird der Datensatz gefunden, d.h. existiert die entsprechende <code>_id</code>, dann wird dieser in der <code>response</code> zurückgesendet (Zeile <code>28</code>). Existiert er nicht, wird der HTTP-Statuscode <code>404</code> gesendet (Zeile <code>30</code>) und ein JSON mit der <code>error</code>-Nachricht <code>Member does not exist!</code> (Zeile <code>31</code>). </p>
<p>Nach Neustart des Servers geben wir in Postman z.B. <code>GET http://localhost:3000/members/639a0121ff0ff0884ce0dd24</code> ein (bei Ihnen sind die <code>_id</code>-Werte andere!) und erhalten:</p>
<p><img alt="postman" src="../files/97_postman.png" /></p>
<p>Probieren Sie auch einmal <code>GET http://localhost:3000/members/0</code> aus, um die Fehlermeldung als JSON zu sehen. </p>
<h4 id="u-update">U - update<a class="headerlink" href="#u-update" title="Permanent link">&para;</a></h4>
<p>Um einen bereits existierenden Datensatz zu ändern, kann entweder die HTTP-Anfrage <code>PUT</code> oder <code>PATCH</code> verwendet werden. Zur Unterscheidung zwischen <code>PUT</code> und <code>PATCH</code> siehe z.B. <a href="https://www.geeksforgeeks.org/difference-between-put-and-patch-request/">hier</a> oder <a href="https://stackoverflow.com/questions/21660791/what-is-the-main-difference-between-patch-and-put-request">hier</a>. Um einen Datensatz in der MongoDB zu ändern, stehen verschiedene Funktionen zur Verfügung:</p>
<ul>
<li><code>updateOne()</code>: ändert einzelne (oder alle) Teile eines Datensatzes und sendet die <code>_id</code> zurück, falls ein neur Datensatz angelegt wurde,</li>
<li><code>findOneAndUpdate()</code>: ändert einzelne (oder alle) Teile eines Datensatzes und sendet den kompletten Datensatz zurück,</li>
<li><code>replaceOne()</code>: ändert den kompletten Datensatz. </li>
</ul>
<p>In der folgenden Implementierung haben wir uns für die HTTP-Anfragemethode <code>PATCH</code> und für die MongoDB-Funktion <code>updateOne()</code> entschieden. Diese Funktion erwartet als ersten Parameter einen <code>&lt;filter&gt;</code>, d.h. die Werte, nach denen nach einem Datensatz gesucht werden soll. Im folgenden Beispiel ist der Filter die <code>_id</code>. Dazu wird erneute ein Parameter <code>id</code> für die URL definiert. Der zweite Parameter der <code>updateOne()</code>-Funktion sind die zu ändernden Werte für diesen Datensatz. In der folgenden Implementierung werden diese zu ändernden Werte als ein JSON dem <code>body</code> des <code>request</code>-Objektes übergeben. Um zu ermöglichen, dass ein, zwei oder drei Schlüssel-Werte-Paare in diesem JSON enthalten sein können, prüfen wir die Einträge im <code>body</code> und setzen daraus ein neues <code>member</code>-Objekt zusammen, wenn es bereits in der Datenbank existiert (deshalb zunächst <code>findOne()</code>):</p>
<div class="tabbed-set tabbed-alternate" data-tabs="12:1"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">router.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-javascript highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-37">37</a></span>
<span class="normal"><a href="#__codelineno-37-38">38</a></span>
<span class="normal"><a href="#__codelineno-37-39">39</a></span>
<span class="normal"><a href="#__codelineno-37-40">40</a></span>
<span class="normal"><a href="#__codelineno-37-41">41</a></span>
<span class="normal"><a href="#__codelineno-37-42">42</a></span>
<span class="normal"><a href="#__codelineno-37-43">43</a></span>
<span class="normal"><a href="#__codelineno-37-44">44</a></span>
<span class="normal"><a href="#__codelineno-37-45">45</a></span>
<span class="normal"><a href="#__codelineno-37-46">46</a></span>
<span class="normal"><a href="#__codelineno-37-47">47</a></span>
<span class="normal"><a href="#__codelineno-37-48">48</a></span>
<span class="normal"><a href="#__codelineno-37-49">49</a></span>
<span class="normal"><a href="#__codelineno-37-50">50</a></span>
<span class="normal"><a href="#__codelineno-37-51">51</a></span>
<span class="normal"><a href="#__codelineno-37-52">52</a></span>
<span class="normal"><a href="#__codelineno-37-53">53</a></span>
<span class="normal"><a href="#__codelineno-37-54">54</a></span>
<span class="normal"><a href="#__codelineno-37-55">55</a></span>
<span class="normal"><a href="#__codelineno-37-56">56</a></span>
<span class="normal"><a href="#__codelineno-37-57">57</a></span>
<span class="normal"><a href="#__codelineno-37-58">58</a></span>
<span class="normal"><a href="#__codelineno-37-59">59</a></span>
<span class="normal"><a href="#__codelineno-37-60">60</a></span>
<span class="normal"><a href="#__codelineno-37-61">61</a></span>
<span class="normal"><a href="#__codelineno-37-62">62</a></span>
<span class="normal"><a href="#__codelineno-37-63">63</a></span>
<span class="normal"><a href="#__codelineno-37-64">64</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-37-37"><a id="__codelineno-37-37" name="__codelineno-37-37"></a><span class="c1">// update one member</span>
</span><span id="__span-37-38"><a id="__codelineno-37-38" name="__codelineno-37-38"></a><span class="nx">router</span><span class="p">.</span><span class="nx">patch</span><span class="p">(</span><span class="s1">&#39;/members/:id&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-39"><a id="__codelineno-37-39" name="__codelineno-37-39"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-40"><a id="__codelineno-37-40" name="__codelineno-37-40"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">member</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">Member</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="w"> </span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="p">})</span>
</span><span id="__span-37-41"><a id="__codelineno-37-41" name="__codelineno-37-41"></a>
</span><span id="__span-37-42"><a id="__codelineno-37-42" name="__codelineno-37-42"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">firstname</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-43"><a id="__codelineno-37-43" name="__codelineno-37-43"></a><span class="w">            </span><span class="nx">member</span><span class="p">.</span><span class="nx">firstname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">firstname</span>
</span><span id="__span-37-44"><a id="__codelineno-37-44" name="__codelineno-37-44"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-37-45"><a id="__codelineno-37-45" name="__codelineno-37-45"></a>
</span><span id="__span-37-46"><a id="__codelineno-37-46" name="__codelineno-37-46"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">lastname</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-47"><a id="__codelineno-37-47" name="__codelineno-37-47"></a><span class="w">            </span><span class="nx">member</span><span class="p">.</span><span class="nx">lastname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">lastname</span>
</span><span id="__span-37-48"><a id="__codelineno-37-48" name="__codelineno-37-48"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-37-49"><a id="__codelineno-37-49" name="__codelineno-37-49"></a>
</span><span id="__span-37-50"><a id="__codelineno-37-50" name="__codelineno-37-50"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-51"><a id="__codelineno-37-51" name="__codelineno-37-51"></a><span class="w">            </span><span class="nx">member</span><span class="p">.</span><span class="nx">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">email</span>
</span><span id="__span-37-52"><a id="__codelineno-37-52" name="__codelineno-37-52"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-37-53"><a id="__codelineno-37-53" name="__codelineno-37-53"></a>
</span><span id="__span-37-54"><a id="__codelineno-37-54" name="__codelineno-37-54"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">ipaddress</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-55"><a id="__codelineno-37-55" name="__codelineno-37-55"></a><span class="w">            </span><span class="nx">member</span><span class="p">.</span><span class="nx">ipaddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">ipaddress</span>
</span><span id="__span-37-56"><a id="__codelineno-37-56" name="__codelineno-37-56"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-37-57"><a id="__codelineno-37-57" name="__codelineno-37-57"></a>
</span><span id="__span-37-58"><a id="__codelineno-37-58" name="__codelineno-37-58"></a><span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="nx">Member</span><span class="p">.</span><span class="nx">updateOne</span><span class="p">({</span><span class="w"> </span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">member</span><span class="p">);</span>
</span><span id="__span-37-59"><a id="__codelineno-37-59" name="__codelineno-37-59"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">member</span><span class="p">)</span>
</span><span id="__span-37-60"><a id="__codelineno-37-60" name="__codelineno-37-60"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-61"><a id="__codelineno-37-61" name="__codelineno-37-61"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">404</span><span class="p">)</span>
</span><span id="__span-37-62"><a id="__codelineno-37-62" name="__codelineno-37-62"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Member does not exist!&quot;</span><span class="w"> </span><span class="p">})</span>
</span><span id="__span-37-63"><a id="__codelineno-37-63" name="__codelineno-37-63"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-37-64"><a id="__codelineno-37-64" name="__codelineno-37-64"></a><span class="p">});</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wir können diese Funktion in Postman ausprobieren, indem wir im <code>body</code> z.B. das JSON </p>
<div class="language-json highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span>
<span class="normal"><a href="#__codelineno-38-2">2</a></span>
<span class="normal"><a href="#__codelineno-38-3">3</a></span>
<span class="normal"><a href="#__codelineno-38-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="p">{</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="w">    </span><span class="nt">&quot;lastname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mustermann&quot;</span><span class="p">,</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;maria@mustermann.fr&quot;</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>mit unserem Request übergeben und <code>PATCH http://localhost:3000/members/639a0121ff0ff0884ce0dd24</code> wählen (bei Ihnen eine andere <code>id</code>!). Der Datensatz mit der <code>_id=639a0121ff0ff0884ce0dd24</code> wird dann aktualisiert. </p>
<p>Vor Ausführung der Anfrage:</p>
<p><img alt="postman" src="../files/98a_postman.png" /></p>
<p>Nach Ausführung der Anfrage:</p>
<p><img alt="postman" src="../files/98b_postman.png" /></p>
<p>Schauen Sie auch in der Datenbank nach (z.B. in VSCode) und wählen auch ruhig nochmal <code>GET http://localhost:3000/members</code> (z.B. in Postman).</p>
<h4 id="d-delete-one">D - delete one<a class="headerlink" href="#d-delete-one" title="Permanent link">&para;</a></h4>
<p>Jetzt implementieren wir noch den Endpunkt, um einen Datensatz zu löschen. Dazu werden die HTTP-Anfragemethode <code>DELETE</code> und die MongoDB-Funktion <code>deleteOne()</code> verwendet. Im folgenden Beispiel wird der Datensatz erneut über die <code>_id</code> ermittelt und dafür erneut die parametrisierte URL ausgelesen:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:1"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">routes.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-javascript highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-87">87</a></span>
<span class="normal"><a href="#__codelineno-39-88">88</a></span>
<span class="normal"><a href="#__codelineno-39-89">89</a></span>
<span class="normal"><a href="#__codelineno-39-90">90</a></span>
<span class="normal"><a href="#__codelineno-39-91">91</a></span>
<span class="normal"><a href="#__codelineno-39-92">92</a></span>
<span class="normal"><a href="#__codelineno-39-93">93</a></span>
<span class="normal"><a href="#__codelineno-39-94">94</a></span>
<span class="normal"><a href="#__codelineno-39-95">95</a></span>
<span class="normal"><a href="#__codelineno-39-96">96</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-39-87"><a id="__codelineno-39-87" name="__codelineno-39-87"></a><span class="c1">// delete one member via id</span>
</span><span id="__span-39-88"><a id="__codelineno-39-88" name="__codelineno-39-88"></a><span class="nx">router</span><span class="p">.</span><span class="ow">delete</span><span class="p">(</span><span class="s1">&#39;/members/:id&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-89"><a id="__codelineno-39-89" name="__codelineno-39-89"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-90"><a id="__codelineno-39-90" name="__codelineno-39-90"></a><span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="nx">Member</span><span class="p">.</span><span class="nx">deleteOne</span><span class="p">({</span><span class="w"> </span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="p">})</span>
</span><span id="__span-39-91"><a id="__codelineno-39-91" name="__codelineno-39-91"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">204</span><span class="p">).</span><span class="nx">send</span><span class="p">()</span>
</span><span id="__span-39-92"><a id="__codelineno-39-92" name="__codelineno-39-92"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-93"><a id="__codelineno-39-93" name="__codelineno-39-93"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">404</span><span class="p">)</span>
</span><span id="__span-39-94"><a id="__codelineno-39-94" name="__codelineno-39-94"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Member does not exist!&quot;</span><span class="w"> </span><span class="p">})</span>
</span><span id="__span-39-95"><a id="__codelineno-39-95" name="__codelineno-39-95"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-39-96"><a id="__codelineno-39-96" name="__codelineno-39-96"></a><span class="p">});</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wenn wir nun in Postman z.B. <code>DELETE http://localhost:3000/members/639a0121ff0ff0884ce0dd24</code> wählen (bei Ihnen eine andere <code>id</code>!), wird der Datensatz mit der <code>_id=639a0121ff0ff0884ce0dd24</code> aus der Datenbank gelöscht. </p>
<p>Hier nochmal die vollständige <code>routes.js</code>:</p>
<details>
<summary>routes.js</summary>
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span>
<span class="normal"><a href="#__codelineno-40-13">13</a></span>
<span class="normal"><a href="#__codelineno-40-14">14</a></span>
<span class="normal"><a href="#__codelineno-40-15">15</a></span>
<span class="normal"><a href="#__codelineno-40-16">16</a></span>
<span class="normal"><a href="#__codelineno-40-17">17</a></span>
<span class="normal"><a href="#__codelineno-40-18">18</a></span>
<span class="normal"><a href="#__codelineno-40-19">19</a></span>
<span class="normal"><a href="#__codelineno-40-20">20</a></span>
<span class="normal"><a href="#__codelineno-40-21">21</a></span>
<span class="normal"><a href="#__codelineno-40-22">22</a></span>
<span class="normal"><a href="#__codelineno-40-23">23</a></span>
<span class="normal"><a href="#__codelineno-40-24">24</a></span>
<span class="normal"><a href="#__codelineno-40-25">25</a></span>
<span class="normal"><a href="#__codelineno-40-26">26</a></span>
<span class="normal"><a href="#__codelineno-40-27">27</a></span>
<span class="normal"><a href="#__codelineno-40-28">28</a></span>
<span class="normal"><a href="#__codelineno-40-29">29</a></span>
<span class="normal"><a href="#__codelineno-40-30">30</a></span>
<span class="normal"><a href="#__codelineno-40-31">31</a></span>
<span class="normal"><a href="#__codelineno-40-32">32</a></span>
<span class="normal"><a href="#__codelineno-40-33">33</a></span>
<span class="normal"><a href="#__codelineno-40-34">34</a></span>
<span class="normal"><a href="#__codelineno-40-35">35</a></span>
<span class="normal"><a href="#__codelineno-40-36">36</a></span>
<span class="normal"><a href="#__codelineno-40-37">37</a></span>
<span class="normal"><a href="#__codelineno-40-38">38</a></span>
<span class="normal"><a href="#__codelineno-40-39">39</a></span>
<span class="normal"><a href="#__codelineno-40-40">40</a></span>
<span class="normal"><a href="#__codelineno-40-41">41</a></span>
<span class="normal"><a href="#__codelineno-40-42">42</a></span>
<span class="normal"><a href="#__codelineno-40-43">43</a></span>
<span class="normal"><a href="#__codelineno-40-44">44</a></span>
<span class="normal"><a href="#__codelineno-40-45">45</a></span>
<span class="normal"><a href="#__codelineno-40-46">46</a></span>
<span class="normal"><a href="#__codelineno-40-47">47</a></span>
<span class="normal"><a href="#__codelineno-40-48">48</a></span>
<span class="normal"><a href="#__codelineno-40-49">49</a></span>
<span class="normal"><a href="#__codelineno-40-50">50</a></span>
<span class="normal"><a href="#__codelineno-40-51">51</a></span>
<span class="normal"><a href="#__codelineno-40-52">52</a></span>
<span class="normal"><a href="#__codelineno-40-53">53</a></span>
<span class="normal"><a href="#__codelineno-40-54">54</a></span>
<span class="normal"><a href="#__codelineno-40-55">55</a></span>
<span class="normal"><a href="#__codelineno-40-56">56</a></span>
<span class="normal"><a href="#__codelineno-40-57">57</a></span>
<span class="normal"><a href="#__codelineno-40-58">58</a></span>
<span class="normal"><a href="#__codelineno-40-59">59</a></span>
<span class="normal"><a href="#__codelineno-40-60">60</a></span>
<span class="normal"><a href="#__codelineno-40-61">61</a></span>
<span class="normal"><a href="#__codelineno-40-62">62</a></span>
<span class="normal"><a href="#__codelineno-40-63">63</a></span>
<span class="normal"><a href="#__codelineno-40-64">64</a></span>
<span class="normal"><a href="#__codelineno-40-65">65</a></span>
<span class="normal"><a href="#__codelineno-40-66">66</a></span>
<span class="normal"><a href="#__codelineno-40-67">67</a></span>
<span class="normal"><a href="#__codelineno-40-68">68</a></span>
<span class="normal"><a href="#__codelineno-40-69">69</a></span>
<span class="normal"><a href="#__codelineno-40-70">70</a></span>
<span class="normal"><a href="#__codelineno-40-71">71</a></span>
<span class="normal"><a href="#__codelineno-40-72">72</a></span>
<span class="normal"><a href="#__codelineno-40-73">73</a></span>
<span class="normal"><a href="#__codelineno-40-74">74</a></span>
<span class="normal"><a href="#__codelineno-40-75">75</a></span>
<span class="normal"><a href="#__codelineno-40-76">76</a></span>
<span class="normal"><a href="#__codelineno-40-77">77</a></span>
<span class="normal"><a href="#__codelineno-40-78">78</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">router</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">Member</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./models/members&#39;</span><span class="p">);</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4"></a>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="c1">// get all members</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/members&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">allMembers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">Member</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">allMembers</span><span class="p">);</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="w">    </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">allMembers</span><span class="p">);</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="p">});</span>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11"></a>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="c1">// post one member</span>
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13"></a><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/members&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-14"><a id="__codelineno-40-14" name="__codelineno-40-14"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">newMember</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Member</span><span class="p">({</span>
</span><span id="__span-40-15"><a id="__codelineno-40-15" name="__codelineno-40-15"></a><span class="w">        </span><span class="nx">firstname</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">firstname</span><span class="p">,</span>
</span><span id="__span-40-16"><a id="__codelineno-40-16" name="__codelineno-40-16"></a><span class="w">        </span><span class="nx">lastname</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">lastname</span><span class="p">,</span>
</span><span id="__span-40-17"><a id="__codelineno-40-17" name="__codelineno-40-17"></a><span class="w">        </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
</span><span id="__span-40-18"><a id="__codelineno-40-18" name="__codelineno-40-18"></a><span class="w">        </span><span class="nx">ipaddress</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">ipaddress</span>
</span><span id="__span-40-19"><a id="__codelineno-40-19" name="__codelineno-40-19"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-40-20"><a id="__codelineno-40-20" name="__codelineno-40-20"></a><span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">newMember</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</span><span id="__span-40-21"><a id="__codelineno-40-21" name="__codelineno-40-21"></a><span class="w">    </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">newMember</span><span class="p">);</span>
</span><span id="__span-40-22"><a id="__codelineno-40-22" name="__codelineno-40-22"></a><span class="p">});</span>
</span><span id="__span-40-23"><a id="__codelineno-40-23" name="__codelineno-40-23"></a>
</span><span id="__span-40-24"><a id="__codelineno-40-24" name="__codelineno-40-24"></a><span class="c1">// get one member via id</span>
</span><span id="__span-40-25"><a id="__codelineno-40-25" name="__codelineno-40-25"></a><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/members/:id&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-26"><a id="__codelineno-40-26" name="__codelineno-40-26"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">member</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">Member</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="w"> </span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-40-27"><a id="__codelineno-40-27" name="__codelineno-40-27"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">);</span>
</span><span id="__span-40-28"><a id="__codelineno-40-28" name="__codelineno-40-28"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">member</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-29"><a id="__codelineno-40-29" name="__codelineno-40-29"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">member</span><span class="p">);</span>
</span><span id="__span-40-30"><a id="__codelineno-40-30" name="__codelineno-40-30"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-31"><a id="__codelineno-40-31" name="__codelineno-40-31"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">404</span><span class="p">);</span>
</span><span id="__span-40-32"><a id="__codelineno-40-32" name="__codelineno-40-32"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span><span id="__span-40-33"><a id="__codelineno-40-33" name="__codelineno-40-33"></a><span class="w">            </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Member does not exist!&quot;</span>
</span><span id="__span-40-34"><a id="__codelineno-40-34" name="__codelineno-40-34"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-40-35"><a id="__codelineno-40-35" name="__codelineno-40-35"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-40-36"><a id="__codelineno-40-36" name="__codelineno-40-36"></a><span class="p">})</span>
</span><span id="__span-40-37"><a id="__codelineno-40-37" name="__codelineno-40-37"></a>
</span><span id="__span-40-38"><a id="__codelineno-40-38" name="__codelineno-40-38"></a><span class="c1">// update one member</span>
</span><span id="__span-40-39"><a id="__codelineno-40-39" name="__codelineno-40-39"></a><span class="nx">router</span><span class="p">.</span><span class="nx">patch</span><span class="p">(</span><span class="s1">&#39;/members/:id&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-40"><a id="__codelineno-40-40" name="__codelineno-40-40"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-41"><a id="__codelineno-40-41" name="__codelineno-40-41"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">member</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">Member</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="w"> </span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="p">})</span>
</span><span id="__span-40-42"><a id="__codelineno-40-42" name="__codelineno-40-42"></a>
</span><span id="__span-40-43"><a id="__codelineno-40-43" name="__codelineno-40-43"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">firstname</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-44"><a id="__codelineno-40-44" name="__codelineno-40-44"></a><span class="w">            </span><span class="nx">member</span><span class="p">.</span><span class="nx">firstname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">firstname</span>
</span><span id="__span-40-45"><a id="__codelineno-40-45" name="__codelineno-40-45"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-40-46"><a id="__codelineno-40-46" name="__codelineno-40-46"></a>
</span><span id="__span-40-47"><a id="__codelineno-40-47" name="__codelineno-40-47"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">lastname</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-48"><a id="__codelineno-40-48" name="__codelineno-40-48"></a><span class="w">            </span><span class="nx">member</span><span class="p">.</span><span class="nx">lastname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">lastname</span>
</span><span id="__span-40-49"><a id="__codelineno-40-49" name="__codelineno-40-49"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-40-50"><a id="__codelineno-40-50" name="__codelineno-40-50"></a>
</span><span id="__span-40-51"><a id="__codelineno-40-51" name="__codelineno-40-51"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-52"><a id="__codelineno-40-52" name="__codelineno-40-52"></a><span class="w">            </span><span class="nx">member</span><span class="p">.</span><span class="nx">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">email</span>
</span><span id="__span-40-53"><a id="__codelineno-40-53" name="__codelineno-40-53"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-40-54"><a id="__codelineno-40-54" name="__codelineno-40-54"></a>
</span><span id="__span-40-55"><a id="__codelineno-40-55" name="__codelineno-40-55"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">ipaddress</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-56"><a id="__codelineno-40-56" name="__codelineno-40-56"></a><span class="w">            </span><span class="nx">member</span><span class="p">.</span><span class="nx">ipaddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">ipaddress</span>
</span><span id="__span-40-57"><a id="__codelineno-40-57" name="__codelineno-40-57"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-40-58"><a id="__codelineno-40-58" name="__codelineno-40-58"></a>
</span><span id="__span-40-59"><a id="__codelineno-40-59" name="__codelineno-40-59"></a><span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="nx">Member</span><span class="p">.</span><span class="nx">updateOne</span><span class="p">({</span><span class="w"> </span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">member</span><span class="p">);</span>
</span><span id="__span-40-60"><a id="__codelineno-40-60" name="__codelineno-40-60"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">member</span><span class="p">)</span>
</span><span id="__span-40-61"><a id="__codelineno-40-61" name="__codelineno-40-61"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-62"><a id="__codelineno-40-62" name="__codelineno-40-62"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">404</span><span class="p">)</span>
</span><span id="__span-40-63"><a id="__codelineno-40-63" name="__codelineno-40-63"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Member does not exist!&quot;</span><span class="w"> </span><span class="p">})</span>
</span><span id="__span-40-64"><a id="__codelineno-40-64" name="__codelineno-40-64"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-40-65"><a id="__codelineno-40-65" name="__codelineno-40-65"></a><span class="p">});</span>
</span><span id="__span-40-66"><a id="__codelineno-40-66" name="__codelineno-40-66"></a>
</span><span id="__span-40-67"><a id="__codelineno-40-67" name="__codelineno-40-67"></a><span class="c1">// delete one member via id</span>
</span><span id="__span-40-68"><a id="__codelineno-40-68" name="__codelineno-40-68"></a><span class="nx">router</span><span class="p">.</span><span class="ow">delete</span><span class="p">(</span><span class="s1">&#39;/members/:id&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-69"><a id="__codelineno-40-69" name="__codelineno-40-69"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-70"><a id="__codelineno-40-70" name="__codelineno-40-70"></a><span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="nx">Member</span><span class="p">.</span><span class="nx">deleteOne</span><span class="p">({</span><span class="w"> </span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="p">})</span>
</span><span id="__span-40-71"><a id="__codelineno-40-71" name="__codelineno-40-71"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">204</span><span class="p">).</span><span class="nx">send</span><span class="p">()</span>
</span><span id="__span-40-72"><a id="__codelineno-40-72" name="__codelineno-40-72"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-73"><a id="__codelineno-40-73" name="__codelineno-40-73"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">404</span><span class="p">)</span>
</span><span id="__span-40-74"><a id="__codelineno-40-74" name="__codelineno-40-74"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Member does not exist!&quot;</span><span class="w"> </span><span class="p">})</span>
</span><span id="__span-40-75"><a id="__codelineno-40-75" name="__codelineno-40-75"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-40-76"><a id="__codelineno-40-76" name="__codelineno-40-76"></a><span class="p">});</span>
</span><span id="__span-40-77"><a id="__codelineno-40-77" name="__codelineno-40-77"></a>
</span><span id="__span-40-78"><a id="__codelineno-40-78" name="__codelineno-40-78"></a><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">router</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div>
</details>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>Wir haben unser Backend erfolgreich als REST-Server implementiert, der alle CRUD-Funktionalitäten umsetzt. Wir werden im nächsten Schritt das Frontend nun so gestalten, dass es auf die REST-API zugreift und das Backend für die Datenverwaltung verwendet. </p>
</div>
<h3 id="cross-origin-resource-sharing-cors">Cross-Origin Resource Sharing (CORS)<a class="headerlink" href="#cross-origin-resource-sharing-cors" title="Permanent link">&para;</a></h3>
<p>Die <em>Same Origin Policy (SOP)</em> ist ein Sicherheitskonzept, das clientseitig Skriptsprachen (also z.B. JavaScript oder CSS) untersagt, Ressourcen aus verschiedenen Herkunften zu verwenden, also von verschiedenen Servern. Dadurch soll verhindert werden, dass fremde Skripte in die bestehende Client-Server-Kommunikation eingeschleust werden. Gleiche <em>Herkunft (origin)</em> bedeutet, dass das gleiche Protokoll (z.B. <code>http</code> oder <code>https</code>), von der gleichen Domain (z.B. <code>localhost</code> oder <code>htw-berlin</code>) sowie dem gleichen Port (z.B. <code>80</code> oder <code>4200</code>) verwendet werden. Es müssen alle drei Eigenschaften übereinstimmen. </p>
<p>Mit dem Aufkommen von Single Page Applications und dem darin benötigten AJAX kam jedoch der Bedarf auf, die SOP aufzuweichen. Es sollte möglich sein, dass z.B. JavaScript sowohl client-seitig das DOM ändert als auch einen Request an den Server (das Backend) sendet. Der Kompromiss, der dafür gefunden wurde, nennt sich <em>Cross-Origin Resource Sharing (CORS)</em>. Damit ist es möglich, für einige oder alle Anfragen zu definieren, dass sie im Sinne der SOP trotzdem erlaub sein sollen. </p>
<p>Um CORS für Ihr Backend zu aktivieren, wechseln Sie im Terminal in Ihren <code>backend</code>-Ordner und geben dort</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>npm<span class="w"> </span>install<span class="w"> </span>cors
</span></code></pre></div>
<p>ein. Öffnen Sie dann die <code>server.js</code> und fügen Sie die hervorgehobenen Zeilen ein:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">server.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-javascript highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-42-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-42-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-42-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-42-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-42-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-42-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-42-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-42-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-42-10">10</a></span>
<span class="normal"><a href="#__codelineno-42-11">11</a></span>
<span class="normal"><a href="#__codelineno-42-12">12</a></span>
<span class="normal"><a href="#__codelineno-42-13">13</a></span>
<span class="normal"><a href="#__codelineno-42-14">14</a></span>
<span class="normal"><a href="#__codelineno-42-15">15</a></span>
<span class="normal"><a href="#__codelineno-42-16">16</a></span>
<span class="normal"><a href="#__codelineno-42-17">17</a></span>
<span class="normal"><a href="#__codelineno-42-18">18</a></span>
<span class="normal"><a href="#__codelineno-42-19">19</a></span>
<span class="normal"><a href="#__codelineno-42-20">20</a></span>
<span class="normal"><a href="#__codelineno-42-21">21</a></span>
<span class="normal"><a href="#__codelineno-42-22">22</a></span>
<span class="normal"><a href="#__codelineno-42-23">23</a></span>
<span class="normal"><a href="#__codelineno-42-24">24</a></span>
<span class="normal"><a href="#__codelineno-42-25">25</a></span>
<span class="normal"><a href="#__codelineno-42-26">26</a></span>
<span class="normal"><a href="#__codelineno-42-27">27</a></span>
<span class="normal"><a href="#__codelineno-42-28">28</a></span>
<span class="normal"><a href="#__codelineno-42-29">29</a></span>
<span class="normal"><a href="#__codelineno-42-30">30</a></span>
<span class="normal"><a href="#__codelineno-42-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">cors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cors&#39;</span><span class="p">);</span>
</span></span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./routes&#39;</span><span class="p">);</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">mongoose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mongoose&#39;</span><span class="p">);</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;dotenv&#39;</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6"></a>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">();</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8"></a><span class="kd">const</span><span class="w"> </span><span class="nx">PORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3000</span><span class="p">;</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9"></a>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10"></a><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11"></a><span class="hll"><span class="c1">// enable cors for all requests</span>
</span></span><span id="__span-42-12"><a id="__codelineno-42-12" name="__codelineno-42-12"></a><span class="hll"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">());</span>
</span></span><span id="__span-42-13"><a id="__codelineno-42-13" name="__codelineno-42-13"></a><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">routes</span><span class="p">);</span>
</span><span id="__span-42-14"><a id="__codelineno-42-14" name="__codelineno-42-14"></a>
</span><span id="__span-42-15"><a id="__codelineno-42-15" name="__codelineno-42-15"></a><span class="c1">// connect to mongoDB</span>
</span><span id="__span-42-16"><a id="__codelineno-42-16" name="__codelineno-42-16"></a><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DB_CONNECTION</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">dbName</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABASE</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-42-17"><a id="__codelineno-42-17" name="__codelineno-42-17"></a><span class="kd">const</span><span class="w"> </span><span class="nx">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connection</span><span class="p">;</span>
</span><span id="__span-42-18"><a id="__codelineno-42-18" name="__codelineno-42-18"></a><span class="nx">db</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-19"><a id="__codelineno-42-19" name="__codelineno-42-19"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
</span><span id="__span-42-20"><a id="__codelineno-42-20" name="__codelineno-42-20"></a><span class="p">});</span>
</span><span id="__span-42-21"><a id="__codelineno-42-21" name="__codelineno-42-21"></a><span class="nx">db</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-22"><a id="__codelineno-42-22" name="__codelineno-42-22"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;connected to DB&#39;</span><span class="p">);</span>
</span><span id="__span-42-23"><a id="__codelineno-42-23" name="__codelineno-42-23"></a><span class="p">});</span>
</span><span id="__span-42-24"><a id="__codelineno-42-24" name="__codelineno-42-24"></a>
</span><span id="__span-42-25"><a id="__codelineno-42-25" name="__codelineno-42-25"></a><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-26"><a id="__codelineno-42-26" name="__codelineno-42-26"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-27"><a id="__codelineno-42-27" name="__codelineno-42-27"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-42-28"><a id="__codelineno-42-28" name="__codelineno-42-28"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-29"><a id="__codelineno-42-29" name="__codelineno-42-29"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Server started and listening on port </span><span class="si">${</span><span class="nx">PORT</span><span class="si">}</span><span class="sb"> ... `</span><span class="p">);</span>
</span><span id="__span-42-30"><a id="__codelineno-42-30" name="__codelineno-42-30"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-42-31"><a id="__codelineno-42-31" name="__codelineno-42-31"></a><span class="p">});</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wenn Sie z.B. nur die <code>get</code>-Anfrage teilen wollen, dann wählen Sie nicht <code>app.use(cors());</code>, sondern </p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">cors</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Hello FIW!&quot;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="w">    </span><span class="p">});</span>
</span></code></pre></div>
<p>Mehr zum CORS-Paket von node.js bzw. express finden Sie <a href="https://expressjs.com/en/resources/middleware/cors.html">hier</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Fußzeile" >
        
          
          <a href="../signals/" class="md-footer__link md-footer__link--prev" aria-label="Zurück: Angular - Datenfluss und Signals">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Zurück
              </span>
              <div class="md-ellipsis">
                Angular - Datenfluss und Signals
              </div>
            </div>
          </a>
        
        
          
          <a href="../backend_pg/" class="md-footer__link md-footer__link--next" aria-label="Weiter: Backend (PostgreSQL)">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Weiter
              </span>
              <div class="md-ellipsis">
                Backend (PostgreSQL)
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Jörn Freiheit
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["instant", "tabs", "content.code.copy", "navigation.footer"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}}</script>
    
    
      <script src="../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>