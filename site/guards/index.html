
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Lehrmaterial, Übungen, Aufgaben und Hilfen für WebTech">
      
      
        <meta name="author" content="Jörn Freiheit">
      
      
        <link rel="canonical" href="http://freiheit.f4.htw-berlin.de/webtech/guards/">
      
      
        <link rel="prev" href="../fe-be-anbindung/">
      
      
        <link rel="next" href="../deployment/">
      
      
      <link rel="icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Front- & Backend - Guards - WebTech</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#subject-observable-observer-und-guards" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href=".." title="WebTech" class="md-header__button md-logo" aria-label="WebTech" data-md-component="logo">
      
  <img src="../img/fiw.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WebTech
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Front- & Backend - Guards
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" title="Zurücksetzen" aria-label="Zurücksetzen" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/jfreiheit/webtech" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    webtech
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="WebTech" class="md-nav__button md-logo" aria-label="WebTech" data-md-component="logo">
      
  <img src="../img/fiw.jpg" alt="logo">

    </a>
    WebTech
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jfreiheit/webtech" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    webtech
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../einfuehrung/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Einführung
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../html/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTML
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../css/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSS - Selektoren und Eigenschaften
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../rwd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSS - Responsive Web-Design
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../javascript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaScript - DOM und Arrays
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../objekte/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaScript - Objekte und JSON
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../promises/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaScript - Promises und Fetch
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../angular/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Angular - Komponenten
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Angular - Templates
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../routing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Angular -  Routing und Services
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../signals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Angular - Datenfluss und Signals
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../backend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backend (MongoDB)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../backend_pg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backend (PostgreSQL)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../fe-be-anbindung/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Front- & Backend - Anbindung
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Front- & Backend - Guards
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Front- & Backend - Guards
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sicherheitskonzepte" class="md-nav__link">
    <span class="md-ellipsis">
      Sicherheitskonzepte
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abgesicherte-rest-api-zur-nutzerverwaltung-backend" class="md-nav__link">
    <span class="md-ellipsis">
      Abgesicherte REST-API zur Nutzerverwaltung (Backend)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registrierungs-endpunkt" class="md-nav__link">
    <span class="md-ellipsis">
      Registrierungs-Endpunkt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#login-endpunkt" class="md-nav__link">
    <span class="md-ellipsis">
      Login-Endpunkt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read-all" class="md-nav__link">
    <span class="md-ellipsis">
      Read all
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Read all">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-web-token-jwt" class="md-nav__link">
    <span class="md-ellipsis">
      JSON-Web-Token (JWT)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read-all-endpunkt" class="md-nav__link">
    <span class="md-ellipsis">
      Read-all-Endpunkt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read-one-user-by-username" class="md-nav__link">
    <span class="md-ellipsis">
      Read one user by username
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-password" class="md-nav__link">
    <span class="md-ellipsis">
      Change password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolle-user-auf-admin-setzen" class="md-nav__link">
    <span class="md-ellipsis">
      Rolle user auf admin setzen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-one-user-by-id" class="md-nav__link">
    <span class="md-ellipsis">
      Delete one user by id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testen-der-abgesicherten-endpunkte-in-postman" class="md-nav__link">
    <span class="md-ellipsis">
      Testen der abgesicherten Endpunkte in Postman
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registrierung-und-login-frontend" class="md-nav__link">
    <span class="md-ellipsis">
      Registrierung und Login (Frontend)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Registrierung und Login (Frontend)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#registrierung" class="md-nav__link">
    <span class="md-ellipsis">
      Registrierung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-verwenden" class="md-nav__link">
    <span class="md-ellipsis">
      Service verwenden
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validierungen" class="md-nav__link">
    <span class="md-ellipsis">
      Validierungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modaler-dialog-zur-bestatigung" class="md-nav__link">
    <span class="md-ellipsis">
      Modaler Dialog zur Bestätigung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login-komponente" class="md-nav__link">
    <span class="md-ellipsis">
      Login-Komponente
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-anbinden" class="md-nav__link">
    <span class="md-ellipsis">
      Service anbinden
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#speichern-des-jwt-im-service" class="md-nav__link">
    <span class="md-ellipsis">
      Speichern des JWT im Service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mogliche-erweiterungen-in-der-login-komponente" class="md-nav__link">
    <span class="md-ellipsis">
      Mögliche Erweiterungen in der Login-Komponente
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nutzen-der-signals" class="md-nav__link">
    <span class="md-ellipsis">
      Nutzen der Signals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guards" class="md-nav__link">
    <span class="md-ellipsis">
      Guards
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Guards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#userlist-komponente" class="md-nav__link">
    <span class="md-ellipsis">
      userlist-Komponente
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guard-fur-den-komponentenzugriff-logged-in" class="md-nav__link">
    <span class="md-ellipsis">
      Guard für den Komponentenzugriff - Logged in
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#letzte-anpassung-an-die-navcomponent" class="md-nav__link">
    <span class="md-ellipsis">
      Letzte Anpassung an die NavComponent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#home-komponente" class="md-nav__link">
    <span class="md-ellipsis">
      Home-Komponente
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Front- & Backend - Deployment
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../uebungen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Übungen
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Werkzeuge
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sicherheitskonzepte" class="md-nav__link">
    <span class="md-ellipsis">
      Sicherheitskonzepte
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abgesicherte-rest-api-zur-nutzerverwaltung-backend" class="md-nav__link">
    <span class="md-ellipsis">
      Abgesicherte REST-API zur Nutzerverwaltung (Backend)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registrierungs-endpunkt" class="md-nav__link">
    <span class="md-ellipsis">
      Registrierungs-Endpunkt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#login-endpunkt" class="md-nav__link">
    <span class="md-ellipsis">
      Login-Endpunkt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read-all" class="md-nav__link">
    <span class="md-ellipsis">
      Read all
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Read all">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-web-token-jwt" class="md-nav__link">
    <span class="md-ellipsis">
      JSON-Web-Token (JWT)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read-all-endpunkt" class="md-nav__link">
    <span class="md-ellipsis">
      Read-all-Endpunkt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read-one-user-by-username" class="md-nav__link">
    <span class="md-ellipsis">
      Read one user by username
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-password" class="md-nav__link">
    <span class="md-ellipsis">
      Change password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolle-user-auf-admin-setzen" class="md-nav__link">
    <span class="md-ellipsis">
      Rolle user auf admin setzen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-one-user-by-id" class="md-nav__link">
    <span class="md-ellipsis">
      Delete one user by id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testen-der-abgesicherten-endpunkte-in-postman" class="md-nav__link">
    <span class="md-ellipsis">
      Testen der abgesicherten Endpunkte in Postman
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registrierung-und-login-frontend" class="md-nav__link">
    <span class="md-ellipsis">
      Registrierung und Login (Frontend)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Registrierung und Login (Frontend)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#registrierung" class="md-nav__link">
    <span class="md-ellipsis">
      Registrierung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-verwenden" class="md-nav__link">
    <span class="md-ellipsis">
      Service verwenden
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validierungen" class="md-nav__link">
    <span class="md-ellipsis">
      Validierungen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modaler-dialog-zur-bestatigung" class="md-nav__link">
    <span class="md-ellipsis">
      Modaler Dialog zur Bestätigung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login-komponente" class="md-nav__link">
    <span class="md-ellipsis">
      Login-Komponente
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-anbinden" class="md-nav__link">
    <span class="md-ellipsis">
      Service anbinden
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#speichern-des-jwt-im-service" class="md-nav__link">
    <span class="md-ellipsis">
      Speichern des JWT im Service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mogliche-erweiterungen-in-der-login-komponente" class="md-nav__link">
    <span class="md-ellipsis">
      Mögliche Erweiterungen in der Login-Komponente
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nutzen-der-signals" class="md-nav__link">
    <span class="md-ellipsis">
      Nutzen der Signals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guards" class="md-nav__link">
    <span class="md-ellipsis">
      Guards
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Guards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#userlist-komponente" class="md-nav__link">
    <span class="md-ellipsis">
      userlist-Komponente
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guard-fur-den-komponentenzugriff-logged-in" class="md-nav__link">
    <span class="md-ellipsis">
      Guard für den Komponentenzugriff - Logged in
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#letzte-anpassung-an-die-navcomponent" class="md-nav__link">
    <span class="md-ellipsis">
      Letzte Anpassung an die NavComponent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#home-komponente" class="md-nav__link">
    <span class="md-ellipsis">
      Home-Komponente
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="subject-observable-observer-und-guards">Subject, Observable, Observer und Guards<a class="headerlink" href="#subject-observable-observer-und-guards" title="Permanent link">&para;</a></h1>
<p>Wir wollen am Beispiel einer Nutzerverwaltung die Verwendung von <em>Subject</em>, <em>Observable</em>, <em>Observer</em> und <em>Guards</em> demonstrieren. Alle diese Konzepte werden im Frontend verwendet. <em>Subject</em>, <em>Observable</em>, <em>Observer</em> dienen dazu, Werte an <em>Subscriber</em> zu propagieren. Eine gute Übersicht über <em>Subject</em>, <em>Observable</em>, <em>Observer</em> bietet die folgende Abbildung (<a href="https://www.tektutorialshub.com/angular/subjects-in-angular">hier</a> entnommen).</p>
<p><img alt="users" src="../files/283_users.png" /></p>
<p><em>Subject</em>, <em>Observable</em>, <em>Observer</em> finden sich im <a href="https://rxjs.dev/">RxJS</a>-Paket. <a href="https://rxjs.dev/guide/subject">Subject</a> hat den großen Vorteil, dass ein (neuer) Wert an viele Subscriber gesendet (<em>multicast</em>) werden kann. Wir werden <em>Subjects</em> z.B. verwenden, um der <code>nav</code>-Komponente mitzuteilen, dass sich eine Nutzerin ein- bzw. ausgelogged hat. Ein <em>Subject</em> ist sowohl ein <em>Observer</em> als auch ein <em>Observable</em>. <a href="">Observable</a> kann mehrere Werte (nacheinander) <em>pushen</em> (an die <em>Subscriber</em>). Folgende Tabelle <a href="">aus</a> gibt einen guten Überblick über die Funktionalität eines *Observable*s.</p>
<p><img alt="users" src="../files/284_users.png" /></p>
<p>Ein <a href="https://rxjs.dev/guide/observer">Observer</a> konsumiert die Werte, die ein <a href="https://rxjs.dev/guide/observable">Observable</a> liefert. Alle Funktionen des HTTP-Clients sind <em>Observables</em>. Sie liefern die Werte vom Backend (mittels einer <code>next</code>-Funktion). Mithilfe eines Observers werden wir diese Werte empfangen (<code>next</code>, <code>error</code>, <code>complete</code>).</p>
<h2 id="sicherheitskonzepte">Sicherheitskonzepte<a class="headerlink" href="#sicherheitskonzepte" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>Wir werden in diesem Abschnitt unterschiedliche "Sicherheitskonzepte" umsetzen. Einerseits werden wir die REST-API so gestalten, dass nicht alle Endpunkte frei verfügbar sind, sondern für einige Endpunkte nur dann eine wirksame Funktionalität ausgeführt wird, wenn sich der Aufrufer des Endpunktes als Administrator "ausweisen" kann. Wir werden dazu <a href="https://jwt.io/">JSON Web Tokens</a> verwenden. </p>
</li>
<li>
<p>Außerdem zeigen wir, wie wir Passworte verschlüsselt in der Datenbank ablegen und wie dann ein Passwort-Vergleich durchgeführt wird. Dazu verwenden wir <a href="https://www.npmjs.com/package/bcrypt">bcrypt</a>.  </p>
</li>
<li>
<p>Mithilfe von <em>Guards</em> wird die Verwendung von Komponenten im Frontend gesteuert. Eine Komponente soll z.B. nur dann aufgerufen werden können, wenn die Nutzerin eingelogged ist. </p>
</li>
</ul>
<p>Der letzte Punkt betrifft das Frontend. Die ersten beiden Punkte betreffen das Backend. Damit fangen wir an. </p>
<h2 id="abgesicherte-rest-api-zur-nutzerverwaltung-backend">Abgesicherte REST-API zur Nutzerverwaltung (Backend)<a class="headerlink" href="#abgesicherte-rest-api-zur-nutzerverwaltung-backend" title="Permanent link">&para;</a></h2>
<p>Folgende Endpunkte soll die REST-API zur Verfügung stellen:</p>
<table>
<thead>
<tr>
<th>Endpunkt</th>
<th>Beschreibung</th>
<th>Abgesichert</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET /user</code></td>
<td>gebe alle <code>user</code>-Einträge zurück</td>
<td>kann nur durch einen <code>admin</code> aufgerufen werden</td>
</tr>
<tr>
<td><code>GET /user/:username</code></td>
<td>gibt den <code>user</code> mit <code>username</code> zurück</td>
<td>kann nur durch einen <code>admin</code> aufgerufen werden</td>
</tr>
<tr>
<td><code>POST /user/register</code></td>
<td>erstelle einen neuen <code>user</code> (<code>Registrierung</code>-Funktion)</td>
<td>frei verfügbar, Registrierung jedoch nur als Rolle <code>user</code></td>
</tr>
<tr>
<td><code>POST /user/login</code></td>
<td>Prüft, ob <code>username</code> existiert und ob das Passwort stimmt (<code>Login</code>-Funktion)</td>
<td>frei verfügbar</td>
</tr>
<tr>
<td><code>DELETE /user/:id</code></td>
<td>löscht den <code>user</code> mit <code>id == id</code></td>
<td>kann nur durch einen <code>admin</code> aufgerufen werden</td>
</tr>
<tr>
<td><code>PUT /changepasswaord</code></td>
<td>ändert das Passwort einer Nutzerin</td>
<td>frei verfügbar</td>
</tr>
<tr>
<td><code>PUT /setadmin</code></td>
<td>setzt die Rolle für eine Nutzerin von <code>user</code> auf <code>admin</code></td>
<td>kann nur durch einen <code>admin</code> aufgerufen werden</td>
</tr>
</tbody>
</table>
<p>Wir gehen wie in <a href="../backend_pg/#rest-api">REST-API (PostgreSQL)</a> vor und erstellen uns ein <code>Node.js</code>-Projekt:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>mkdir<span class="w"> </span>backend
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">cd</span><span class="w"> </span>backend
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>npm<span class="w"> </span>init
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>npm<span class="w"> </span>i<span class="w"> </span>express<span class="w"> </span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>npm<span class="w"> </span>i<span class="w"> </span>pg<span class="w"> </span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>npm<span class="w"> </span>i<span class="w"> </span>dotenv<span class="w"> </span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>npm<span class="w"> </span>i<span class="w"> </span>cors<span class="w"> </span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>npm<span class="w"> </span>i<span class="w"> </span>bcrypt
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>npm<span class="w"> </span>i<span class="w"> </span>jsonwebtoken
</span></code></pre></div>
<p>Als Einstiegspunkt wählen wir <code>server.js</code>. Diese sieht wie folgt aus:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">server.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">cors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cors&#39;</span><span class="p">)</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;dotenv&#39;</span><span class="p">).</span><span class="nx">config</span><span class="p">()</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./routes&#39;</span><span class="p">)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">()</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="kd">const</span><span class="w"> </span><span class="nx">PORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3000</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">())</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">routes</span><span class="p">)</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12"></a>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;backend not started&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Server started and listening on port </span><span class="si">${</span><span class="nx">PORT</span><span class="si">}</span><span class="sb"> ...`</span><span class="p">)</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="p">})</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Die Verbindungsdaten zur PostgreSQL-Datenbank stehen in der <code>.env</code>-Datei. Die Verbindung zur Datenbank stellen wir im Skript <code>db.js</code> her: </p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">.env</label><label for="__tabbed_2_2">db.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-json highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="err">PGUSER=&lt;s</span><span class="mf">05...</span><span class="err">&gt;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="err">PGHOST=psql.</span><span class="kc">f</span><span class="mf">4.</span><span class="err">h</span><span class="kc">t</span><span class="err">w</span><span class="mi">-</span><span class="err">berli</span><span class="kc">n</span><span class="err">.de</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="err">PGPASSWORD=&#39;ihr_passwor</span><span class="kc">t</span><span class="err">&#39;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="err">PGDATABASE=&lt;</span><span class="kc">na</span><span class="err">me_der_da</span><span class="kc">ten</span><span class="err">ba</span><span class="kc">n</span><span class="err">k_au</span><span class="kc">f</span><span class="err">_ocea</span><span class="kc">n</span><span class="err">&gt;</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="err">PGPORT=</span><span class="mi">5432</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-js highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">pg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;pg&#39;</span><span class="p">);</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">pg</span><span class="p">.</span><span class="nx">Client</span><span class="p">({</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PGUSER</span><span class="p">,</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="nx">host</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PGHOST</span><span class="p">,</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="nx">database</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PGDATABASE</span><span class="p">,</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">OCEAN_PASSWORD</span><span class="p">,</span><span class="w"> </span><span class="cm">/* bei Ihnen PGPASSWORD */</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="nx">port</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PGPORT</span><span class="p">,</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="p">});</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="nx">db</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">err</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Connection to DB ...&#39;</span><span class="p">);</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="p">});</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">db</span><span class="p">;</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>Für die Endpunkte (Routen) erstellen wir ein Skript <code>routes.js</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">routes.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">)</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">router</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">bcrypt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;bcrypt&#39;</span><span class="p">)</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./db&#39;</span><span class="p">)</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="kd">var</span><span class="w"> </span><span class="nx">jwt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jsonwebtoken&#39;</span><span class="p">);</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="c1">// call only once at the beginning - creates table users (id, username, password, email, role)</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/createtable&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;DROP TABLE IF EXISTS users; CREATE TABLE users(id serial PRIMARY KEY, username VARCHAR(50), password VARCHAR(255), email VARCHAR(50), role VARCHAR(50));&#39;</span><span class="p">)</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="sb">`table users in database </span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PGDATABASE</span><span class="si">}</span><span class="sb"> created`</span><span class="p">})</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11"></a>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="p">})</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13"></a>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="cm">/* hier fügen wir im Folgenden die weiteren Endpunkte hinzu */</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15"></a>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">router</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wir haben zunächst einen Endpunkt implementiert, den wir einmalig zum Erstellen der Tabelle <code>users</code> in der Datenbank benötigen. Wenn wir das Backend mit</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>node<span class="w"> </span>--watch<span class="w"> </span>server.js
</span></code></pre></div>
<p>starten und den Endpunkt <code>GET localhost:3000/user/createtable</code> aufrufen (im Browser oder in Postman), dann wird in unserer Datenbank (in meinem Beispiel <code>users_jf</code>) eine Tabelle <code>users</code> mit den Spalten <code>id</code>, <code>username</code>, <code>password</code>, <code>email</code> und <code>role</code> erzeugt.</p>
<p><img alt="guards" src="../files/315_guards.png" /></p>
<h2 id="registrierungs-endpunkt"><code>Registrierungs</code>-Endpunkt<a class="headerlink" href="#registrierungs-endpunkt" title="Permanent link">&para;</a></h2>
<p>Wir fügen unserer <code>routes.js</code> folgende Implementierung hinzu:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">POST /user/register in routes.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span>
<span class="normal"><a href="#__codelineno-6-22">22</a></span>
<span class="normal"><a href="#__codelineno-6-23">23</a></span>
<span class="normal"><a href="#__codelineno-6-24">24</a></span>
<span class="normal"><a href="#__codelineno-6-25">25</a></span>
<span class="normal"><a href="#__codelineno-6-26">26</a></span>
<span class="normal"><a href="#__codelineno-6-27">27</a></span>
<span class="normal"><a href="#__codelineno-6-28">28</a></span>
<span class="normal"><a href="#__codelineno-6-29">29</a></span>
<span class="normal"><a href="#__codelineno-6-30">30</a></span>
<span class="normal"><a href="#__codelineno-6-31">31</a></span>
<span class="normal"><a href="#__codelineno-6-32">32</a></span>
<span class="normal"><a href="#__codelineno-6-33">33</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="c1">// post one user - register as role user</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/register&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">username</span><span class="p">;</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">password</span><span class="p">;</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">hashPassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">bcrypt</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">);</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;hash : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">hashPassword</span><span class="p">)</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">email</span><span class="p">;</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21"></a>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM users WHERE email = $1 OR username = $2&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">email</span><span class="p">,</span><span class="w"> </span><span class="nx">username</span><span class="p">])</span><span class="w"> </span>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">check</span><span class="p">.</span><span class="nx">rowCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">)</span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="sb">`E-Mail </span><span class="si">${</span><span class="nx">email</span><span class="si">}</span><span class="sb"> and/or username </span><span class="si">${</span><span class="nx">username</span><span class="si">}</span><span class="sb"> already exists`</span><span class="p">})</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`INSERT INTO users(username, password, email, role) VALUES ($1, $2, $3, $4) RETURNING *`</span><span class="p">;</span>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28"></a>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">hashPassword</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;user&#39;</span><span class="p">]);</span>
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">201</span><span class="p">)</span>
</span><span id="__span-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span>
</span><span id="__span-6-32"><a id="__codelineno-6-32" name="__codelineno-6-32"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-33"><a id="__codelineno-6-33" name="__codelineno-6-33"></a><span class="p">})</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Erläuterungen:</p>
<ul>
<li>
<p>zur Registrierung muss das JSON-Objekt im <code>body</code> des <code>requests</code> Werte für die Eigenschaften <code>username</code>, <code>password</code> und <code>email</code> enthalten. </p>
</li>
<li>
<p>Die Registrierung wird nur dann vorgenommen, wenn weder <code>username</code> noch <code>email</code> bereits in der Datenbank enthalten sind. Wenn einer der beiden Werte bereits vorkommt, wird Status-Code <code>401</code> gesendet und die Nachricht <code>E-Mail ${email} and/or username ${username} already exists</code> (Zeilen <code>23-26</code>). </p>
</li>
<li>
<p>Wir verschlüsseln die Passwörter mithilfe von <a href="https://www.npmjs.com/package/bcrypt">bcrypt</a>. Dazu installieren wir uns dieses Paket zunächst mit <code>npm i bcrypt</code> (siehe oben). Eingebunden wird es mithilfe von <code>const bcrypt = require('bcrypt')</code> (siehe oben).</p>
</li>
<li>
<p>In Zeile <code>18</code> wird die <code>hash()</code>-Funktion von <code>bcrypt</code> aufgerufen. Das <code>password</code> wird als erster Parameter übergeben. Die <code>10</code> ist der Wert für die <code>saltRounds</code> und ist der empfohlene Wert. Der <code>hash</code> wird erzeugt und als Wert der Variablen <code>hashPassword</code> zuegwiesen. Dieser Hash-Wert wird in der Datenbank gespeichert (Zeile <code>29)</code>. </p>
</li>
</ul>
<p><img alt="users" src="../files/277_users.png" /></p>
<p>Es bleibt anzumerken, dass aus dem <code>hash</code> nicht wieder das Passwort rückerzeugt werden kann. Um sich einzuloggen, muss das einegebene Passwort mit dem <code>hash</code> verglichen werden. Dazu stellt <code>bcrypt</code> ebenfalls eine Funktion zur Verfügung. Diese verwenden wir beim Login. </p>
<h2 id="login-endpunkt"><code>Login</code>-Endpunkt<a class="headerlink" href="#login-endpunkt" title="Permanent link">&para;</a></h2>
<p>Eine <code>Login</code>-Funktion soll überprüfen, ob ein <code>username</code> existiert und ob das dazugehörige <code>password</code> korrekt ist. Dazu müssen beide Informationen mit dem <em>Request</em> übermittelt werden. Deshalb wird als Anfragemethode <code>POST</code> verwendet. Um diesen <code>POST</code>-Endpunkt vom vorherigen Endpunkt zu unterscheiden, wird der URL anstelle von <code>/register</code> hier <code>/login</code> angehängt. </p>
<p>Die Implementierung dieser Funktion in der <code>routes.js</code> könnte wie folgt aussehen:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">POST /user/login in routes.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-35">35</a></span>
<span class="normal"><a href="#__codelineno-7-36">36</a></span>
<span class="normal"><a href="#__codelineno-7-37">37</a></span>
<span class="normal"><a href="#__codelineno-7-38">38</a></span>
<span class="normal"><a href="#__codelineno-7-39">39</a></span>
<span class="normal"><a href="#__codelineno-7-40">40</a></span>
<span class="normal"><a href="#__codelineno-7-41">41</a></span>
<span class="normal"><a href="#__codelineno-7-42">42</a></span>
<span class="normal"><a href="#__codelineno-7-43">43</a></span>
<span class="normal"><a href="#__codelineno-7-44">44</a></span>
<span class="normal"><a href="#__codelineno-7-45">45</a></span>
<span class="normal"><a href="#__codelineno-7-46">46</a></span>
<span class="normal"><a href="#__codelineno-7-47">47</a></span>
<span class="normal"><a href="#__codelineno-7-48">48</a></span>
<span class="normal"><a href="#__codelineno-7-49">49</a></span>
<span class="normal"><a href="#__codelineno-7-50">50</a></span>
<span class="normal"><a href="#__codelineno-7-51">51</a></span>
<span class="normal"><a href="#__codelineno-7-52">52</a></span>
<span class="normal"><a href="#__codelineno-7-53">53</a></span>
<span class="normal"><a href="#__codelineno-7-54">54</a></span>
<span class="normal"><a href="#__codelineno-7-55">55</a></span>
<span class="normal"><a href="#__codelineno-7-56">56</a></span>
<span class="normal"><a href="#__codelineno-7-57">57</a></span>
<span class="normal"><a href="#__codelineno-7-58">58</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35"></a><span class="c1">// post one user - login</span>
</span><span id="__span-7-36"><a id="__codelineno-7-36" name="__codelineno-7-36"></a><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-37"><a id="__codelineno-7-37" name="__codelineno-7-37"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">username</span><span class="p">;</span>
</span><span id="__span-7-38"><a id="__codelineno-7-38" name="__codelineno-7-38"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">password</span><span class="p">;</span>
</span><span id="__span-7-39"><a id="__codelineno-7-39" name="__codelineno-7-39"></a>
</span><span id="__span-7-40"><a id="__codelineno-7-40" name="__codelineno-7-40"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM users WHERE username = $1&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">username</span><span class="p">])</span><span class="w"> </span>
</span><span id="__span-7-41"><a id="__codelineno-7-41" name="__codelineno-7-41"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">rowCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-42"><a id="__codelineno-7-42" name="__codelineno-7-42"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
</span><span id="__span-7-43"><a id="__codelineno-7-43" name="__codelineno-7-43"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">bcrypt</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span>
</span><span id="__span-7-44"><a id="__codelineno-7-44" name="__codelineno-7-44"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-45"><a id="__codelineno-7-45" name="__codelineno-7-45"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">userWithoutPassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">role</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">};</span>
</span><span id="__span-7-46"><a id="__codelineno-7-46" name="__codelineno-7-46"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">userWithoutPassword</span><span class="p">,</span><span class="w"> </span><span class="nx">username</span><span class="p">);</span>
</span><span id="__span-7-47"><a id="__codelineno-7-47" name="__codelineno-7-47"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">200</span><span class="p">)</span>
</span><span id="__span-7-48"><a id="__codelineno-7-48" name="__codelineno-7-48"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="nx">token</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="nx">userWithoutPassword</span><span class="w"> </span><span class="p">})</span>
</span><span id="__span-7-49"><a id="__codelineno-7-49" name="__codelineno-7-49"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-7-50"><a id="__codelineno-7-50" name="__codelineno-7-50"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-51"><a id="__codelineno-7-51" name="__codelineno-7-51"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">)</span>
</span><span id="__span-7-52"><a id="__codelineno-7-52" name="__codelineno-7-52"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;username/password wrong&quot;</span><span class="p">})</span><span class="w"> </span><span class="cm">/* hier weiß man Passwort falsch */</span>
</span><span id="__span-7-53"><a id="__codelineno-7-53" name="__codelineno-7-53"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-7-54"><a id="__codelineno-7-54" name="__codelineno-7-54"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-55"><a id="__codelineno-7-55" name="__codelineno-7-55"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">)</span>
</span><span id="__span-7-56"><a id="__codelineno-7-56" name="__codelineno-7-56"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;username/password wrong&quot;</span><span class="p">})</span><span class="w">     </span><span class="cm">/* hier weiß man, username falsch */</span>
</span><span id="__span-7-57"><a id="__codelineno-7-57" name="__codelineno-7-57"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-58"><a id="__codelineno-7-58" name="__codelineno-7-58"></a><span class="p">})</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Erläuterungen: </p>
<ul>
<li>
<p>Es wird zunächst geprüft, ob es überhaupt einen passenden <code>username</code> in der Datenbank gibt (Zeile <code>40</code>). Existiert ein solcher EIntrag nicht, wird HTTP-Status <code>401</code> zurückgesendet mit der Meldung <code>username/password wrong</code>. Man könnte hier natürlich auch konkreter <code>username does not exist</code> zurückgeben, aber zu viele Details bei einem fehlerhaften Login-Versuch sind kein guter Datenschutz.  </p>
</li>
<li>
<p>Existiert ein Eintrag für <code>username</code>, wird das <code>password</code> dieses Eintrages mit dem <code>password</code> aus dem <em>Request</em> unter Verwendung der <code>compare()</code>-Funktion von <code>bcrypt</code> miteinander verglichen (Zeile <code>43</code>). Sind die Passwärter gleich, ist <code>match == true</code>. </p>
</li>
<li>
<p>Für den Fall, dass <code>match==true</code> ist, wird die Nutzerin eingelogged. Dafür wird mithilfe des <code>jsonwebtoken</code>-Paketes ein solcher <code>JSON Web Token (jwt)</code> erzeugt. Dies geschieht mithilfe der <code>sign()</code>-Funktion. Der Token enthält die Daten über die Nutzerin (außer das gehashte Passwort) als <em>payload</em>. Als Sicherheitsschlüssel wird hier der <code>username</code> verwendet (siehe <a href="https://www.npmjs.com/package/jsonwebtoken">jsonwebtoken</a>). </p>
</li>
<li>
<p>Für den Fall, dass <code>match==false</code> ist, stimmte das Passwort nicht. Auch hier geben wir <code>401</code> und <code>username/password wrong</code> zurück und geben keine weiteren Informationen preis. </p>
</li>
</ul>
<p><img alt="guards" src="../files/316_guards.png" /></p>
<p><img alt="guards" src="../files/317_guards.png" /></p>
<h2 id="read-all">Read all<a class="headerlink" href="#read-all" title="Permanent link">&para;</a></h2>
<p>Das Auslesen aller Nutzerinnen soll nur einem Nutzer in der Rolle <code>admin</code> möglich sein. Wir haben derzeit keine Möglichkeit, einen <code>admin</code>-Nutzer zu kreieren. Wir werden zwar später noch einen Endpunkt implementieren, der für eine Nutzerin die Rolle <code>user</code> in die Rolle <code>admin</code> wechselt, aber auch dies wird nur einem <code>admin</code> möglich sein. Wir benötigen also einmalig einen Nutzer in der Rolle <code>admin</code> in unserer Tabelle. Diesen können wir entweder über </p>
<ul>
<li><a href="https://www.pgadmin.org/">pgAdmin</a> oder</li>
<li><a href="https://www.timescale.com/blog/how-to-install-psql-on-mac-ubuntu-debian-windows">psql</a> </li>
</ul>
<p>direkt in die Tabelle mit z.B. <code>INSERT INTO users(username, password, email, role) VALUES ("admin1", hashPassword, "admin1@test.de", "admin")</code> einrichten. Das <code>hasPassword</code> lässt sich z.B. auf <a href="https://bcrypt.online/">bcrypt.online</a> erzeugen. Oder wir passen den Endpunkt <code>GET /user/createtablle</code> kurz wie folgt an:</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1">// call only once at the beginning - creates table users (id, username, password, email, role)</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/createtable&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">bcrypt</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="s1">&#39;pass1234&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">)</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`INSERT INTO users(username, password, email, role) VALUES ($1, $2, $3, $4);`</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;DROP TABLE IF EXISTS users;&#39;</span><span class="p">)</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE users(id serial PRIMARY KEY, username VARCHAR(50), password VARCHAR(255), email VARCHAR(50), role VARCHAR(50));&#39;</span><span class="p">)</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;admin1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;admin1@test.de&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;admin&quot;</span><span class="p">])</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">    </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="sb">`table users in database </span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PGDATABASE</span><span class="si">}</span><span class="sb"> created`</span><span class="p">})</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="p">})</span>
</span></code></pre></div>
<p>Dann sollten wir ihn aber nach einmaliger Ausführung auch wieder aus unserem Backend entfernen.</p>
<p>Nun haben wir eine Nutzerin in der <code>admin</code>-Rolle und erzeugen beim Einloggen (wie für alle Nutzerinnen beim Einloggen) ein JSON-Web-Token (jwt).</p>
<h3 id="json-web-token-jwt">JSON-Web-Token (JWT)<a class="headerlink" href="#json-web-token-jwt" title="Permanent link">&para;</a></h3>
<p>Über JSON-Web-Tokens (JWT) können Sie sich <a href="https://jwt.io/introduction">hier</a> und aber auch in dem frei verfügbaren <a href="https://auth0.com/resources/ebooks/jwt-handbook">Handbuch</a> informieren. JWT ist ein offener <a href="https://datatracker.ietf.org/doc/html/rfc7519">Standard</a> und dient dem sicheren Informationsaustausch zwischen zwei Parteien. Am häufigsten wird JWT zur Autorisierung, d.h. zur Überprüfung von Zugriffsrechten genutzt. </p>
<div class="admonition info">
<p class="admonition-title">Autorisierung vs. Authentififizierung</p>
<p>Durch <strong>Authentifizierung</strong> wird bestätigt, dass Benutzer diejenigen sind, die sie zu sein vorgeben, während diese Benutzer per <strong>Autorisierung</strong> die Erlaubnis erhalten, auf Ressourcen zuzugreifen.</p>
</div>
<p>Um eine Ressource nutzen zu können, autorisiert man den Zugriff mithilfe eines Tokens. Wenn wir einen Endpunkt einer REST-API nutzen wollen, dann senden wir diesen Token im <code>header</code> des Requests mit. Zunächst muss der Token jedoch erzeugt werden. Dies passiert beim Login. Wir schauen uns einen solchen Token im Detail an:</p>
<p>Ein JWT besteht aus </p>
<ul>
<li>einem <em>Header</em>,</li>
<li>einem <em>Paload</em> und</li>
<li>einer <em>Signatur</em>.</li>
</ul>
<p>Der <em>Header</em> enthält zwei Einträge: den Typ des Tokens (<code>JWT</code>) und den Algorithmus, der zum Signieren des Tokens verwendet wird, z.B. <a href="https://de.wikipedia.org/wiki/HMAC">HMAC SH265</a> oder <a href="https://de.wikipedia.org/wiki/RSA-Kryptosystem">RSA</a>. Ein Beispiel für den <em>Header</em>  könnte sein:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="nt">&quot;alg&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;HS256&quot;</span><span class="p">,</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">  </span><span class="nt">&quot;typ&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;JWT&quot;</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="p">}</span>
</span></code></pre></div>
<p>Der <em>Payload</em> enthält typischerweise Daten über den Nutzer, z.B.</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="p">{</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;muster&quot;</span><span class="p">,</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;muster@test.de&quot;</span><span class="p">,</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">  </span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;admin&quot;</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="p">}</span>
</span></code></pre></div>
<p>Die <em>Signatur</em> verschlüsselt den <em>Header</em> und den <em>Payload</em> mit dem angegebenen Signaturalgorithmus und verwendet dabei ein <code>secret</code>. Dieses <code>secret</code> kann ein öffentlicher Schlüssel oder einfach ein alphanumerischer String sein. </p>
<p>Zur Erzeugung und Prüfung von JWT verwenden wir in unserem Backend das <a href="https://www.npmjs.com/package/jsonwebtoken">jsonwebtoken</a>-Paket. Zur Erzeugung des Tokens stellt dieses Package die Funktion <code>sign()</code> zur Verfügung. </p>
<p>Wir zeigen zunächst nochmal den Code, der beim <code>Login</code> zur Erstellung des Tokens führt:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">aus POST /user/login</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-48">48</a></span>
<span class="normal"><a href="#__codelineno-11-49">49</a></span>
<span class="normal"><a href="#__codelineno-11-50">50</a></span>
<span class="normal"><a href="#__codelineno-11-51">51</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-48"><a id="__codelineno-11-48" name="__codelineno-11-48"></a><span class="kd">const</span><span class="w"> </span><span class="nx">userWithoutPassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">role</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">};</span>
</span><span id="__span-11-49"><a id="__codelineno-11-49" name="__codelineno-11-49"></a><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">userWithoutPassword</span><span class="p">,</span><span class="w"> </span><span class="nx">username</span><span class="p">);</span>
</span><span id="__span-11-50"><a id="__codelineno-11-50" name="__codelineno-11-50"></a><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">200</span><span class="p">)</span>
</span><span id="__span-11-51"><a id="__codelineno-11-51" name="__codelineno-11-51"></a><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="nx">token</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="nx">userWithoutPassword</span><span class="w"> </span><span class="p">})</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wir verwenden darin das <code>userWithoutPassword</code>-Objekt als <em>Payload</em> des JWT und den <code>username</code> als <code>secret</code>. Wenn nun ein Endpunkt angesprochen wird, der eine Autorisierung verlangt, prüfen wir folgendes:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Autorisierung mit JWT</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span>
<span class="normal"><a href="#__codelineno-12-15">15</a></span>
<span class="normal"><a href="#__codelineno-12-16">16</a></span>
<span class="normal"><a href="#__codelineno-12-17">17</a></span>
<span class="normal"><a href="#__codelineno-12-18">18</a></span>
<span class="normal"><a href="#__codelineno-12-19">19</a></span>
<span class="normal"><a href="#__codelineno-12-20">20</a></span>
<span class="normal"><a href="#__codelineno-12-21">21</a></span>
<span class="normal"><a href="#__codelineno-12-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="cm">/* ------------------ check if caller is admin    ---- start --------------------- */</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;request headers: &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">)</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;authorization&#39;</span><span class="p">];</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">callerusername</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">];</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5"></a>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;No token provided&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="p">}</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">decoded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="nx">token</span><span class="p">,</span><span class="w"> </span><span class="nx">callerusername</span><span class="p">)</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;decoded : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">decoded</span><span class="p">)</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12"></a>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM users WHERE username=$1&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">decoded</span><span class="p">.</span><span class="nx">username</span><span class="p">])</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;check &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">check</span><span class="p">)</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">check</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">role</span><span class="o">!=</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;you are not an admin&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18"></a>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19"></a><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Invalid token&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21"></a><span class="p">}</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22"></a><span class="cm">/* ------------------ check if caller is admin    ---- end --------------------- */</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Erläuterungen:</p>
<ul>
<li>
<p>In den Zeilen <code>3</code> und <code>4</code> lesen wir den <code>token</code> und den <code>callerusername</code> aus, die beide im <code>header</code> des <em>requests</em> gesendet werden. </p>
</li>
<li>
<p>Wenn im <code>header</code> unter dem Schlüssel <code>authorization</code> kein <code>token</code> gesendet wird, wird die Anfrage mit einer <code>401</code>-Response abgelehnt (Zeilen <code>6-8</code>).</p>
</li>
<li>
<p>Wenn ein <code>token</code> verfügbar ist, wird dieser mithilfe der Funktion <code>verify()</code> des <code>jsonwebtoken</code>-Paketes dekodiert. Dabei wird der <code>callerusername</code> als <code>secret</code> verwendet (wie beim Signieren). </p>
</li>
<li>
<p>Nun fragen wir in der Datenbank an, ob es sich bei dem <code>callerusername</code> um einen <code>admin</code> handelt. Das steht zwar auch im <em>payload</em> des <code>token</code>, kann sich aber in der Zwischenzeit theoretisch geändert haben. </p>
</li>
<li>
<p>Wenn es sich nicht um einen <code>admin</code> handelt, wird die Anfrage ebenfalls mit einer <code>401</code>-Response abgelehnt (Zeilen <code>15-17</code>).</p>
</li>
<li>
<p>Falls die <code>verify()</code>-Funktion einen Fehler geworfen hat, z.B. weil das <code>secret</code> nicht korrekt war, wird ebenfalls die Anfrage mit einer <code>401</code>-Response abgelehnt. </p>
</li>
</ul>
<p>Erst, wenn diese Prüfungen alle erfolgreich absolviert werden, kann der nachfolgende Code ausgeführt werden. Wir werden die oben gezeigt Implementierung nun in jedem Endpunkt voranstellen, der <code>admin</code>-Rechte zur Anbfrage benötigt. </p>
<h3 id="read-all-endpunkt">Read-all-Endpunkt<a class="headerlink" href="#read-all-endpunkt" title="Permanent link">&para;</a></h3>
<p>Der <em>read-all</em>-Endpunkt (<code>GET /user</code>) sieht demnach so aus:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">GET /user</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-13-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-13-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-13-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-13-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-13-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-13-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-13-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-13-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-13-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-13-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-13-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-13-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-13-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-13-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-13-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-13-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-13-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-13-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-13-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-13-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-13-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-13-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-13-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-13-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-13-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-13-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-13-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-13-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-13-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-13-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-13-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-13-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-13-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-13-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-13-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-13-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-13-100">100</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-63"><a id="__codelineno-13-63" name="__codelineno-13-63"></a><span class="c1">// get all users</span>
</span><span id="__span-13-64"><a id="__codelineno-13-64" name="__codelineno-13-64"></a><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-65"><a id="__codelineno-13-65" name="__codelineno-13-65"></a>
</span><span id="__span-13-66"><a id="__codelineno-13-66" name="__codelineno-13-66"></a><span class="w">    </span><span class="cm">/* ------------------ check if caller is admin    ---- start --------------------- */</span>
</span><span id="__span-13-67"><a id="__codelineno-13-67" name="__codelineno-13-67"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;request headers: &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">)</span>
</span><span id="__span-13-68"><a id="__codelineno-13-68" name="__codelineno-13-68"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;authorization&#39;</span><span class="p">];</span>
</span><span id="__span-13-69"><a id="__codelineno-13-69" name="__codelineno-13-69"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">callerusername</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">];</span>
</span><span id="__span-13-70"><a id="__codelineno-13-70" name="__codelineno-13-70"></a>
</span><span id="__span-13-71"><a id="__codelineno-13-71" name="__codelineno-13-71"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-72"><a id="__codelineno-13-72" name="__codelineno-13-72"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;No token provided&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-13-73"><a id="__codelineno-13-73" name="__codelineno-13-73"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-74"><a id="__codelineno-13-74" name="__codelineno-13-74"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-75"><a id="__codelineno-13-75" name="__codelineno-13-75"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">decoded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="nx">token</span><span class="p">,</span><span class="w"> </span><span class="nx">callerusername</span><span class="p">)</span>
</span><span id="__span-13-76"><a id="__codelineno-13-76" name="__codelineno-13-76"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;decoded : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">decoded</span><span class="p">)</span>
</span><span id="__span-13-77"><a id="__codelineno-13-77" name="__codelineno-13-77"></a>
</span><span id="__span-13-78"><a id="__codelineno-13-78" name="__codelineno-13-78"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM users WHERE username=$1&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">decoded</span><span class="p">.</span><span class="nx">username</span><span class="p">])</span>
</span><span id="__span-13-79"><a id="__codelineno-13-79" name="__codelineno-13-79"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;check &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">check</span><span class="p">)</span>
</span><span id="__span-13-80"><a id="__codelineno-13-80" name="__codelineno-13-80"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">check</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">role</span><span class="o">!=</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-81"><a id="__codelineno-13-81" name="__codelineno-13-81"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;you are not an admin&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-13-82"><a id="__codelineno-13-82" name="__codelineno-13-82"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-13-83"><a id="__codelineno-13-83" name="__codelineno-13-83"></a>
</span><span id="__span-13-84"><a id="__codelineno-13-84" name="__codelineno-13-84"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-85"><a id="__codelineno-13-85" name="__codelineno-13-85"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Invalid token&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-13-86"><a id="__codelineno-13-86" name="__codelineno-13-86"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-87"><a id="__codelineno-13-87" name="__codelineno-13-87"></a><span class="w">    </span><span class="cm">/* ------------------ check if caller is admin    ---- end --------------------- */</span>
</span><span id="__span-13-88"><a id="__codelineno-13-88" name="__codelineno-13-88"></a>
</span><span id="__span-13-89"><a id="__codelineno-13-89" name="__codelineno-13-89"></a><span class="w">    </span><span class="cm">/* ------- if caller is admin, then do the following --------------------------- */</span>
</span><span id="__span-13-90"><a id="__codelineno-13-90" name="__codelineno-13-90"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`SELECT * FROM users `</span><span class="p">;</span>
</span><span id="__span-13-91"><a id="__codelineno-13-91" name="__codelineno-13-91"></a>
</span><span id="__span-13-92"><a id="__codelineno-13-92" name="__codelineno-13-92"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-93"><a id="__codelineno-13-93" name="__codelineno-13-93"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
</span><span id="__span-13-94"><a id="__codelineno-13-94" name="__codelineno-13-94"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span>
</span><span id="__span-13-95"><a id="__codelineno-13-95" name="__codelineno-13-95"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">200</span><span class="p">)</span>
</span><span id="__span-13-96"><a id="__codelineno-13-96" name="__codelineno-13-96"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">rows</span><span class="p">);</span>
</span><span id="__span-13-97"><a id="__codelineno-13-97" name="__codelineno-13-97"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-98"><a id="__codelineno-13-98" name="__codelineno-13-98"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">)</span>
</span><span id="__span-13-99"><a id="__codelineno-13-99" name="__codelineno-13-99"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-100"><a id="__codelineno-13-100" name="__codelineno-13-100"></a><span class="p">});</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Abzüglich der Überprüfung des JWT sieht der Endpunkt also so aus, wie wir ihn bereits kennen. Das gilt im Prinzip auch für die folgenden Endpunkte.</p>
<h3 id="read-one-user-by-username">Read one <code>user</code> by <code>username</code><a class="headerlink" href="#read-one-user-by-username" title="Permanent link">&para;</a></h3>
<p>Im <code>header</code> wird hier wieder unter <code>authorization</code> der JWT und unter <code>username</code> der <code>callerusername</code> erwartet. Als Parameter wird der <code>username</code> aufgerufen, dessen Daten gesendet werden, falls er existiert.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">GET /user/:username</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-103">103</a></span>
<span class="normal"><a href="#__codelineno-14-104">104</a></span>
<span class="normal"><a href="#__codelineno-14-105">105</a></span>
<span class="normal"><a href="#__codelineno-14-106">106</a></span>
<span class="normal"><a href="#__codelineno-14-107">107</a></span>
<span class="normal"><a href="#__codelineno-14-108">108</a></span>
<span class="normal"><a href="#__codelineno-14-109">109</a></span>
<span class="normal"><a href="#__codelineno-14-110">110</a></span>
<span class="normal"><a href="#__codelineno-14-111">111</a></span>
<span class="normal"><a href="#__codelineno-14-112">112</a></span>
<span class="normal"><a href="#__codelineno-14-113">113</a></span>
<span class="normal"><a href="#__codelineno-14-114">114</a></span>
<span class="normal"><a href="#__codelineno-14-115">115</a></span>
<span class="normal"><a href="#__codelineno-14-116">116</a></span>
<span class="normal"><a href="#__codelineno-14-117">117</a></span>
<span class="normal"><a href="#__codelineno-14-118">118</a></span>
<span class="normal"><a href="#__codelineno-14-119">119</a></span>
<span class="normal"><a href="#__codelineno-14-120">120</a></span>
<span class="normal"><a href="#__codelineno-14-121">121</a></span>
<span class="normal"><a href="#__codelineno-14-122">122</a></span>
<span class="normal"><a href="#__codelineno-14-123">123</a></span>
<span class="normal"><a href="#__codelineno-14-124">124</a></span>
<span class="normal"><a href="#__codelineno-14-125">125</a></span>
<span class="normal"><a href="#__codelineno-14-126">126</a></span>
<span class="normal"><a href="#__codelineno-14-127">127</a></span>
<span class="normal"><a href="#__codelineno-14-128">128</a></span>
<span class="normal"><a href="#__codelineno-14-129">129</a></span>
<span class="normal"><a href="#__codelineno-14-130">130</a></span>
<span class="normal"><a href="#__codelineno-14-131">131</a></span>
<span class="normal"><a href="#__codelineno-14-132">132</a></span>
<span class="normal"><a href="#__codelineno-14-133">133</a></span>
<span class="normal"><a href="#__codelineno-14-134">134</a></span>
<span class="normal"><a href="#__codelineno-14-135">135</a></span>
<span class="normal"><a href="#__codelineno-14-136">136</a></span>
<span class="normal"><a href="#__codelineno-14-137">137</a></span>
<span class="normal"><a href="#__codelineno-14-138">138</a></span>
<span class="normal"><a href="#__codelineno-14-139">139</a></span>
<span class="normal"><a href="#__codelineno-14-140">140</a></span>
<span class="normal"><a href="#__codelineno-14-141">141</a></span>
<span class="normal"><a href="#__codelineno-14-142">142</a></span>
<span class="normal"><a href="#__codelineno-14-143">143</a></span>
<span class="normal"><a href="#__codelineno-14-144">144</a></span>
<span class="normal"><a href="#__codelineno-14-145">145</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-103"><a id="__codelineno-14-103" name="__codelineno-14-103"></a><span class="c1">// get one user bei username</span>
</span><span id="__span-14-104"><a id="__codelineno-14-104" name="__codelineno-14-104"></a><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/:username&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-105"><a id="__codelineno-14-105" name="__codelineno-14-105"></a>
</span><span id="__span-14-106"><a id="__codelineno-14-106" name="__codelineno-14-106"></a><span class="w">    </span><span class="cm">/* ------------------ check if caller is admin    ---- start --------------------- */</span>
</span><span id="__span-14-107"><a id="__codelineno-14-107" name="__codelineno-14-107"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;request headers: &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">)</span>
</span><span id="__span-14-108"><a id="__codelineno-14-108" name="__codelineno-14-108"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;authorization&#39;</span><span class="p">];</span>
</span><span id="__span-14-109"><a id="__codelineno-14-109" name="__codelineno-14-109"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">callerusername</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">];</span>
</span><span id="__span-14-110"><a id="__codelineno-14-110" name="__codelineno-14-110"></a>
</span><span id="__span-14-111"><a id="__codelineno-14-111" name="__codelineno-14-111"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-112"><a id="__codelineno-14-112" name="__codelineno-14-112"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;No token provided&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-14-113"><a id="__codelineno-14-113" name="__codelineno-14-113"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-14-114"><a id="__codelineno-14-114" name="__codelineno-14-114"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-115"><a id="__codelineno-14-115" name="__codelineno-14-115"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">decoded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="nx">token</span><span class="p">,</span><span class="w"> </span><span class="nx">callerusername</span><span class="p">)</span>
</span><span id="__span-14-116"><a id="__codelineno-14-116" name="__codelineno-14-116"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;decoded : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">decoded</span><span class="p">)</span>
</span><span id="__span-14-117"><a id="__codelineno-14-117" name="__codelineno-14-117"></a>
</span><span id="__span-14-118"><a id="__codelineno-14-118" name="__codelineno-14-118"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM users WHERE username=$1&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">decoded</span><span class="p">.</span><span class="nx">username</span><span class="p">])</span>
</span><span id="__span-14-119"><a id="__codelineno-14-119" name="__codelineno-14-119"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;check &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">check</span><span class="p">)</span>
</span><span id="__span-14-120"><a id="__codelineno-14-120" name="__codelineno-14-120"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">check</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">role</span><span class="o">!=</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-121"><a id="__codelineno-14-121" name="__codelineno-14-121"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;you are not an admin&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-14-122"><a id="__codelineno-14-122" name="__codelineno-14-122"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-14-123"><a id="__codelineno-14-123" name="__codelineno-14-123"></a>
</span><span id="__span-14-124"><a id="__codelineno-14-124" name="__codelineno-14-124"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-125"><a id="__codelineno-14-125" name="__codelineno-14-125"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Invalid token&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-14-126"><a id="__codelineno-14-126" name="__codelineno-14-126"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-14-127"><a id="__codelineno-14-127" name="__codelineno-14-127"></a><span class="w">    </span><span class="cm">/* ------------------ check if caller is admin    ---- end --------------------- */</span>
</span><span id="__span-14-128"><a id="__codelineno-14-128" name="__codelineno-14-128"></a>
</span><span id="__span-14-129"><a id="__codelineno-14-129" name="__codelineno-14-129"></a><span class="w">    </span><span class="cm">/* ------- if caller is admin, then do the following --------------------------- */</span>
</span><span id="__span-14-130"><a id="__codelineno-14-130" name="__codelineno-14-130"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`SELECT * FROM users WHERE username = $1`</span><span class="p">;</span>
</span><span id="__span-14-131"><a id="__codelineno-14-131" name="__codelineno-14-131"></a>
</span><span id="__span-14-132"><a id="__codelineno-14-132" name="__codelineno-14-132"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-133"><a id="__codelineno-14-133" name="__codelineno-14-133"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">username</span><span class="p">;</span>
</span><span id="__span-14-134"><a id="__codelineno-14-134" name="__codelineno-14-134"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">username</span><span class="p">])</span>
</span><span id="__span-14-135"><a id="__codelineno-14-135" name="__codelineno-14-135"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">rowCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-136"><a id="__codelineno-14-136" name="__codelineno-14-136"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">200</span><span class="p">)</span>
</span><span id="__span-14-137"><a id="__codelineno-14-137" name="__codelineno-14-137"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
</span><span id="__span-14-138"><a id="__codelineno-14-138" name="__codelineno-14-138"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-139"><a id="__codelineno-14-139" name="__codelineno-14-139"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">404</span><span class="p">)</span>
</span><span id="__span-14-140"><a id="__codelineno-14-140" name="__codelineno-14-140"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="sb">`user with username </span><span class="si">${</span><span class="nx">username</span><span class="si">}</span><span class="sb"> does not exist`</span><span class="p">});</span>
</span><span id="__span-14-141"><a id="__codelineno-14-141" name="__codelineno-14-141"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-14-142"><a id="__codelineno-14-142" name="__codelineno-14-142"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-143"><a id="__codelineno-14-143" name="__codelineno-14-143"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">)</span>
</span><span id="__span-14-144"><a id="__codelineno-14-144" name="__codelineno-14-144"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-14-145"><a id="__codelineno-14-145" name="__codelineno-14-145"></a><span class="p">});</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="change-password">Change password<a class="headerlink" href="#change-password" title="Permanent link">&para;</a></h3>
<p>Im <code>body</code> des Requests wird der <code>username</code>, das <code>oldpassword</code> und das <code>newpassword</code> erwartet. Das <code>oldpassword</code> wird mittels <code>bcrypt.compare()</code> mit dem in der Datenbank gespeicherten Passwort verglichen. Bei Erfolg, wird das gehashte <code>newpassword</code> (<code>bcrypt.hash()</code>) in die Datenbank anstelle des alten Passwortes gespeichert. Der Endpunkt benötigt keine Autorisierung.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:1"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">PUT /user/changepassword</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-147">147</a></span>
<span class="normal"><a href="#__codelineno-15-148">148</a></span>
<span class="normal"><a href="#__codelineno-15-149">149</a></span>
<span class="normal"><a href="#__codelineno-15-150">150</a></span>
<span class="normal"><a href="#__codelineno-15-151">151</a></span>
<span class="normal"><a href="#__codelineno-15-152">152</a></span>
<span class="normal"><a href="#__codelineno-15-153">153</a></span>
<span class="normal"><a href="#__codelineno-15-154">154</a></span>
<span class="normal"><a href="#__codelineno-15-155">155</a></span>
<span class="normal"><a href="#__codelineno-15-156">156</a></span>
<span class="normal"><a href="#__codelineno-15-157">157</a></span>
<span class="normal"><a href="#__codelineno-15-158">158</a></span>
<span class="normal"><a href="#__codelineno-15-159">159</a></span>
<span class="normal"><a href="#__codelineno-15-160">160</a></span>
<span class="normal"><a href="#__codelineno-15-161">161</a></span>
<span class="normal"><a href="#__codelineno-15-162">162</a></span>
<span class="normal"><a href="#__codelineno-15-163">163</a></span>
<span class="normal"><a href="#__codelineno-15-164">164</a></span>
<span class="normal"><a href="#__codelineno-15-165">165</a></span>
<span class="normal"><a href="#__codelineno-15-166">166</a></span>
<span class="normal"><a href="#__codelineno-15-167">167</a></span>
<span class="normal"><a href="#__codelineno-15-168">168</a></span>
<span class="normal"><a href="#__codelineno-15-169">169</a></span>
<span class="normal"><a href="#__codelineno-15-170">170</a></span>
<span class="normal"><a href="#__codelineno-15-171">171</a></span>
<span class="normal"><a href="#__codelineno-15-172">172</a></span>
<span class="normal"><a href="#__codelineno-15-173">173</a></span>
<span class="normal"><a href="#__codelineno-15-174">174</a></span>
<span class="normal"><a href="#__codelineno-15-175">175</a></span>
<span class="normal"><a href="#__codelineno-15-176">176</a></span>
<span class="normal"><a href="#__codelineno-15-177">177</a></span>
<span class="normal"><a href="#__codelineno-15-178">178</a></span>
<span class="normal"><a href="#__codelineno-15-179">179</a></span>
<span class="normal"><a href="#__codelineno-15-180">180</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-15-147"><a id="__codelineno-15-147" name="__codelineno-15-147"></a><span class="c1">// put ({username, oldpassword, newpassword}) - changepassword</span>
</span><span id="__span-15-148"><a id="__codelineno-15-148" name="__codelineno-15-148"></a><span class="nx">router</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s1">&#39;/changepassword&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-149"><a id="__codelineno-15-149" name="__codelineno-15-149"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">username</span><span class="p">;</span>
</span><span id="__span-15-150"><a id="__codelineno-15-150" name="__codelineno-15-150"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">oldpassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">oldpassword</span><span class="p">;</span>
</span><span id="__span-15-151"><a id="__codelineno-15-151" name="__codelineno-15-151"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">newpassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">newpassword</span><span class="p">;</span>
</span><span id="__span-15-152"><a id="__codelineno-15-152" name="__codelineno-15-152"></a>
</span><span id="__span-15-153"><a id="__codelineno-15-153" name="__codelineno-15-153"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">hashPassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">bcrypt</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="nx">newpassword</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">);</span>
</span><span id="__span-15-154"><a id="__codelineno-15-154" name="__codelineno-15-154"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;hash : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">hashPassword</span><span class="p">)</span>
</span><span id="__span-15-155"><a id="__codelineno-15-155" name="__codelineno-15-155"></a>
</span><span id="__span-15-156"><a id="__codelineno-15-156" name="__codelineno-15-156"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM users WHERE username = $1&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">username</span><span class="p">])</span><span class="w"> </span>
</span><span id="__span-15-157"><a id="__codelineno-15-157" name="__codelineno-15-157"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">rowCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-158"><a id="__codelineno-15-158" name="__codelineno-15-158"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
</span><span id="__span-15-159"><a id="__codelineno-15-159" name="__codelineno-15-159"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">bcrypt</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">oldpassword</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span>
</span><span id="__span-15-160"><a id="__codelineno-15-160" name="__codelineno-15-160"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-161"><a id="__codelineno-15-161" name="__codelineno-15-161"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">updatequery</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`UPDATE users SET </span>
</span><span id="__span-15-162"><a id="__codelineno-15-162" name="__codelineno-15-162"></a><span class="sb">            username = $1, </span>
</span><span id="__span-15-163"><a id="__codelineno-15-163" name="__codelineno-15-163"></a><span class="sb">            password = $2</span>
</span><span id="__span-15-164"><a id="__codelineno-15-164" name="__codelineno-15-164"></a><span class="sb">            WHERE username=$3</span>
</span><span id="__span-15-165"><a id="__codelineno-15-165" name="__codelineno-15-165"></a><span class="sb">            RETURNING *;`</span><span class="p">;</span>
</span><span id="__span-15-166"><a id="__codelineno-15-166" name="__codelineno-15-166"></a>
</span><span id="__span-15-167"><a id="__codelineno-15-167" name="__codelineno-15-167"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">updateresult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">updatequery</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">hashPassword</span><span class="p">,</span><span class="w"> </span><span class="nx">username</span><span class="p">]);</span>
</span><span id="__span-15-168"><a id="__codelineno-15-168" name="__codelineno-15-168"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;updateresult : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">updateresult</span><span class="p">)</span>
</span><span id="__span-15-169"><a id="__codelineno-15-169" name="__codelineno-15-169"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">200</span><span class="p">)</span>
</span><span id="__span-15-170"><a id="__codelineno-15-170" name="__codelineno-15-170"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">updateresult</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span>
</span><span id="__span-15-171"><a id="__codelineno-15-171" name="__codelineno-15-171"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-172"><a id="__codelineno-15-172" name="__codelineno-15-172"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-173"><a id="__codelineno-15-173" name="__codelineno-15-173"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">)</span>
</span><span id="__span-15-174"><a id="__codelineno-15-174" name="__codelineno-15-174"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;username/password wrong&quot;</span><span class="p">})</span>
</span><span id="__span-15-175"><a id="__codelineno-15-175" name="__codelineno-15-175"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-176"><a id="__codelineno-15-176" name="__codelineno-15-176"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-177"><a id="__codelineno-15-177" name="__codelineno-15-177"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">)</span>
</span><span id="__span-15-178"><a id="__codelineno-15-178" name="__codelineno-15-178"></a><span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;username/password wrong&quot;</span><span class="p">})</span>
</span><span id="__span-15-179"><a id="__codelineno-15-179" name="__codelineno-15-179"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-180"><a id="__codelineno-15-180" name="__codelineno-15-180"></a><span class="p">})</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="rolle-user-auf-admin-setzen">Rolle <code>user</code> auf <code>admin</code> setzen<a class="headerlink" href="#rolle-user-auf-admin-setzen" title="Permanent link">&para;</a></h3>
<p>Im <code>header</code> wird hier wieder unter <code>authorization</code> der JWT und unter <code>username</code> der <code>callerusername</code> erwartet, d.h. es handelt sich um einen geschützten Endpunkt. Im <code>body</code> des Requests wird der <code>username</code> der Nutzerin erwartet, deren Rolle auf <code>admin</code> gesetzt werden soll. Dies geschieht, ohne dass geprüft wird, ob die Rolle vorher <code>user</code> war.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:1"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">PUT /user/setadmin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-182">182</a></span>
<span class="normal"><a href="#__codelineno-16-183">183</a></span>
<span class="normal"><a href="#__codelineno-16-184">184</a></span>
<span class="normal"><a href="#__codelineno-16-185">185</a></span>
<span class="normal"><a href="#__codelineno-16-186">186</a></span>
<span class="normal"><a href="#__codelineno-16-187">187</a></span>
<span class="normal"><a href="#__codelineno-16-188">188</a></span>
<span class="normal"><a href="#__codelineno-16-189">189</a></span>
<span class="normal"><a href="#__codelineno-16-190">190</a></span>
<span class="normal"><a href="#__codelineno-16-191">191</a></span>
<span class="normal"><a href="#__codelineno-16-192">192</a></span>
<span class="normal"><a href="#__codelineno-16-193">193</a></span>
<span class="normal"><a href="#__codelineno-16-194">194</a></span>
<span class="normal"><a href="#__codelineno-16-195">195</a></span>
<span class="normal"><a href="#__codelineno-16-196">196</a></span>
<span class="normal"><a href="#__codelineno-16-197">197</a></span>
<span class="normal"><a href="#__codelineno-16-198">198</a></span>
<span class="normal"><a href="#__codelineno-16-199">199</a></span>
<span class="normal"><a href="#__codelineno-16-200">200</a></span>
<span class="normal"><a href="#__codelineno-16-201">201</a></span>
<span class="normal"><a href="#__codelineno-16-202">202</a></span>
<span class="normal"><a href="#__codelineno-16-203">203</a></span>
<span class="normal"><a href="#__codelineno-16-204">204</a></span>
<span class="normal"><a href="#__codelineno-16-205">205</a></span>
<span class="normal"><a href="#__codelineno-16-206">206</a></span>
<span class="normal"><a href="#__codelineno-16-207">207</a></span>
<span class="normal"><a href="#__codelineno-16-208">208</a></span>
<span class="normal"><a href="#__codelineno-16-209">209</a></span>
<span class="normal"><a href="#__codelineno-16-210">210</a></span>
<span class="normal"><a href="#__codelineno-16-211">211</a></span>
<span class="normal"><a href="#__codelineno-16-212">212</a></span>
<span class="normal"><a href="#__codelineno-16-213">213</a></span>
<span class="normal"><a href="#__codelineno-16-214">214</a></span>
<span class="normal"><a href="#__codelineno-16-215">215</a></span>
<span class="normal"><a href="#__codelineno-16-216">216</a></span>
<span class="normal"><a href="#__codelineno-16-217">217</a></span>
<span class="normal"><a href="#__codelineno-16-218">218</a></span>
<span class="normal"><a href="#__codelineno-16-219">219</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-182"><a id="__codelineno-16-182" name="__codelineno-16-182"></a><span class="nx">router</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s1">&#39;/setadmin&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-183"><a id="__codelineno-16-183" name="__codelineno-16-183"></a>
</span><span id="__span-16-184"><a id="__codelineno-16-184" name="__codelineno-16-184"></a><span class="w">    </span><span class="cm">/* ------------------ check if caller is admin    ---- start --------------------- */</span>
</span><span id="__span-16-185"><a id="__codelineno-16-185" name="__codelineno-16-185"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;request headers: &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">)</span>
</span><span id="__span-16-186"><a id="__codelineno-16-186" name="__codelineno-16-186"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;authorization&#39;</span><span class="p">];</span>
</span><span id="__span-16-187"><a id="__codelineno-16-187" name="__codelineno-16-187"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">callerusername</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">];</span>
</span><span id="__span-16-188"><a id="__codelineno-16-188" name="__codelineno-16-188"></a>
</span><span id="__span-16-189"><a id="__codelineno-16-189" name="__codelineno-16-189"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-190"><a id="__codelineno-16-190" name="__codelineno-16-190"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;No token provided&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-16-191"><a id="__codelineno-16-191" name="__codelineno-16-191"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-192"><a id="__codelineno-16-192" name="__codelineno-16-192"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-193"><a id="__codelineno-16-193" name="__codelineno-16-193"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">decoded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="nx">token</span><span class="p">,</span><span class="w"> </span><span class="nx">callerusername</span><span class="p">)</span>
</span><span id="__span-16-194"><a id="__codelineno-16-194" name="__codelineno-16-194"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;decoded : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">decoded</span><span class="p">)</span>
</span><span id="__span-16-195"><a id="__codelineno-16-195" name="__codelineno-16-195"></a>
</span><span id="__span-16-196"><a id="__codelineno-16-196" name="__codelineno-16-196"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM users WHERE username=$1&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">decoded</span><span class="p">.</span><span class="nx">username</span><span class="p">])</span>
</span><span id="__span-16-197"><a id="__codelineno-16-197" name="__codelineno-16-197"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;check &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">check</span><span class="p">)</span>
</span><span id="__span-16-198"><a id="__codelineno-16-198" name="__codelineno-16-198"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">check</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">role</span><span class="o">!=</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-199"><a id="__codelineno-16-199" name="__codelineno-16-199"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;you are not an admin&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-16-200"><a id="__codelineno-16-200" name="__codelineno-16-200"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-16-201"><a id="__codelineno-16-201" name="__codelineno-16-201"></a>
</span><span id="__span-16-202"><a id="__codelineno-16-202" name="__codelineno-16-202"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-203"><a id="__codelineno-16-203" name="__codelineno-16-203"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Invalid token&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-16-204"><a id="__codelineno-16-204" name="__codelineno-16-204"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-205"><a id="__codelineno-16-205" name="__codelineno-16-205"></a><span class="w">    </span><span class="cm">/* ------------------ check if caller is admin    ---- end --------------------- */</span>
</span><span id="__span-16-206"><a id="__codelineno-16-206" name="__codelineno-16-206"></a>
</span><span id="__span-16-207"><a id="__codelineno-16-207" name="__codelineno-16-207"></a><span class="w">    </span><span class="cm">/* ------- if caller is admin, then do the following --------------------------- */</span>
</span><span id="__span-16-208"><a id="__codelineno-16-208" name="__codelineno-16-208"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">username</span><span class="p">;</span>
</span><span id="__span-16-209"><a id="__codelineno-16-209" name="__codelineno-16-209"></a>
</span><span id="__span-16-210"><a id="__codelineno-16-210" name="__codelineno-16-210"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">updatequery</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`UPDATE users SET </span>
</span><span id="__span-16-211"><a id="__codelineno-16-211" name="__codelineno-16-211"></a><span class="sb">    role=&#39;admin&#39;</span>
</span><span id="__span-16-212"><a id="__codelineno-16-212" name="__codelineno-16-212"></a><span class="sb">    WHERE username=$1</span>
</span><span id="__span-16-213"><a id="__codelineno-16-213" name="__codelineno-16-213"></a><span class="sb">    RETURNING *;`</span><span class="p">;</span>
</span><span id="__span-16-214"><a id="__codelineno-16-214" name="__codelineno-16-214"></a>
</span><span id="__span-16-215"><a id="__codelineno-16-215" name="__codelineno-16-215"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">updateresult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">updatequery</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">username</span><span class="p">]);</span>
</span><span id="__span-16-216"><a id="__codelineno-16-216" name="__codelineno-16-216"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;updateresult : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">updateresult</span><span class="p">)</span>
</span><span id="__span-16-217"><a id="__codelineno-16-217" name="__codelineno-16-217"></a><span class="w">    </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">200</span><span class="p">)</span>
</span><span id="__span-16-218"><a id="__codelineno-16-218" name="__codelineno-16-218"></a><span class="w">    </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">updateresult</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span>
</span><span id="__span-16-219"><a id="__codelineno-16-219" name="__codelineno-16-219"></a><span class="p">})</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="delete-one-user-by-id">Delete one <code>user</code> by <code>id</code><a class="headerlink" href="#delete-one-user-by-id" title="Permanent link">&para;</a></h3>
<p>Im <code>header</code> wird hier wieder unter <code>authorization</code> der JWT und unter <code>username</code> der <code>callerusername</code> erwartet, d.h. es handelt sich um einen geschützten Endpunkt. Die <code>id</code> der zu löschenden Nutzerin wird als Parameter der Route übergeben.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="12:1"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">DELETE /user/:id</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-221">221</a></span>
<span class="normal"><a href="#__codelineno-17-222">222</a></span>
<span class="normal"><a href="#__codelineno-17-223">223</a></span>
<span class="normal"><a href="#__codelineno-17-224">224</a></span>
<span class="normal"><a href="#__codelineno-17-225">225</a></span>
<span class="normal"><a href="#__codelineno-17-226">226</a></span>
<span class="normal"><a href="#__codelineno-17-227">227</a></span>
<span class="normal"><a href="#__codelineno-17-228">228</a></span>
<span class="normal"><a href="#__codelineno-17-229">229</a></span>
<span class="normal"><a href="#__codelineno-17-230">230</a></span>
<span class="normal"><a href="#__codelineno-17-231">231</a></span>
<span class="normal"><a href="#__codelineno-17-232">232</a></span>
<span class="normal"><a href="#__codelineno-17-233">233</a></span>
<span class="normal"><a href="#__codelineno-17-234">234</a></span>
<span class="normal"><a href="#__codelineno-17-235">235</a></span>
<span class="normal"><a href="#__codelineno-17-236">236</a></span>
<span class="normal"><a href="#__codelineno-17-237">237</a></span>
<span class="normal"><a href="#__codelineno-17-238">238</a></span>
<span class="normal"><a href="#__codelineno-17-239">239</a></span>
<span class="normal"><a href="#__codelineno-17-240">240</a></span>
<span class="normal"><a href="#__codelineno-17-241">241</a></span>
<span class="normal"><a href="#__codelineno-17-242">242</a></span>
<span class="normal"><a href="#__codelineno-17-243">243</a></span>
<span class="normal"><a href="#__codelineno-17-244">244</a></span>
<span class="normal"><a href="#__codelineno-17-245">245</a></span>
<span class="normal"><a href="#__codelineno-17-246">246</a></span>
<span class="normal"><a href="#__codelineno-17-247">247</a></span>
<span class="normal"><a href="#__codelineno-17-248">248</a></span>
<span class="normal"><a href="#__codelineno-17-249">249</a></span>
<span class="normal"><a href="#__codelineno-17-250">250</a></span>
<span class="normal"><a href="#__codelineno-17-251">251</a></span>
<span class="normal"><a href="#__codelineno-17-252">252</a></span>
<span class="normal"><a href="#__codelineno-17-253">253</a></span>
<span class="normal"><a href="#__codelineno-17-254">254</a></span>
<span class="normal"><a href="#__codelineno-17-255">255</a></span>
<span class="normal"><a href="#__codelineno-17-256">256</a></span>
<span class="normal"><a href="#__codelineno-17-257">257</a></span>
<span class="normal"><a href="#__codelineno-17-258">258</a></span>
<span class="normal"><a href="#__codelineno-17-259">259</a></span>
<span class="normal"><a href="#__codelineno-17-260">260</a></span>
<span class="normal"><a href="#__codelineno-17-261">261</a></span>
<span class="normal"><a href="#__codelineno-17-262">262</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-221"><a id="__codelineno-17-221" name="__codelineno-17-221"></a><span class="c1">// delete one user via id</span>
</span><span id="__span-17-222"><a id="__codelineno-17-222" name="__codelineno-17-222"></a><span class="nx">router</span><span class="p">.</span><span class="ow">delete</span><span class="p">(</span><span class="s1">&#39;/:id&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-223"><a id="__codelineno-17-223" name="__codelineno-17-223"></a>
</span><span id="__span-17-224"><a id="__codelineno-17-224" name="__codelineno-17-224"></a><span class="w">    </span><span class="cm">/* ------------------ check if caller is admin    ---- start --------------------- */</span>
</span><span id="__span-17-225"><a id="__codelineno-17-225" name="__codelineno-17-225"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;request headers: &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">)</span>
</span><span id="__span-17-226"><a id="__codelineno-17-226" name="__codelineno-17-226"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;authorization&#39;</span><span class="p">];</span>
</span><span id="__span-17-227"><a id="__codelineno-17-227" name="__codelineno-17-227"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">callerusername</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">];</span>
</span><span id="__span-17-228"><a id="__codelineno-17-228" name="__codelineno-17-228"></a>
</span><span id="__span-17-229"><a id="__codelineno-17-229" name="__codelineno-17-229"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-230"><a id="__codelineno-17-230" name="__codelineno-17-230"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;No token provided&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-17-231"><a id="__codelineno-17-231" name="__codelineno-17-231"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-17-232"><a id="__codelineno-17-232" name="__codelineno-17-232"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-233"><a id="__codelineno-17-233" name="__codelineno-17-233"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">decoded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="nx">token</span><span class="p">,</span><span class="w"> </span><span class="nx">callerusername</span><span class="p">)</span>
</span><span id="__span-17-234"><a id="__codelineno-17-234" name="__codelineno-17-234"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;decoded : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">decoded</span><span class="p">)</span>
</span><span id="__span-17-235"><a id="__codelineno-17-235" name="__codelineno-17-235"></a>
</span><span id="__span-17-236"><a id="__codelineno-17-236" name="__codelineno-17-236"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM users WHERE username=$1&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">decoded</span><span class="p">.</span><span class="nx">username</span><span class="p">])</span>
</span><span id="__span-17-237"><a id="__codelineno-17-237" name="__codelineno-17-237"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;check &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">check</span><span class="p">)</span>
</span><span id="__span-17-238"><a id="__codelineno-17-238" name="__codelineno-17-238"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">check</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">role</span><span class="o">!=</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-239"><a id="__codelineno-17-239" name="__codelineno-17-239"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;you are not an admin&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-17-240"><a id="__codelineno-17-240" name="__codelineno-17-240"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-17-241"><a id="__codelineno-17-241" name="__codelineno-17-241"></a>
</span><span id="__span-17-242"><a id="__codelineno-17-242" name="__codelineno-17-242"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-243"><a id="__codelineno-17-243" name="__codelineno-17-243"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">401</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Invalid token&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-17-244"><a id="__codelineno-17-244" name="__codelineno-17-244"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-17-245"><a id="__codelineno-17-245" name="__codelineno-17-245"></a><span class="w">    </span><span class="cm">/* ------------------ check if caller is admin    ---- end --------------------- */</span>
</span><span id="__span-17-246"><a id="__codelineno-17-246" name="__codelineno-17-246"></a>
</span><span id="__span-17-247"><a id="__codelineno-17-247" name="__codelineno-17-247"></a><span class="w">    </span><span class="cm">/* ------- if caller is admin, then do the following --------------------------- */</span>
</span><span id="__span-17-248"><a id="__codelineno-17-248" name="__codelineno-17-248"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-249"><a id="__codelineno-17-249" name="__codelineno-17-249"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
</span><span id="__span-17-250"><a id="__codelineno-17-250" name="__codelineno-17-250"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`DELETE FROM users WHERE id=$1`</span><span class="p">;</span>
</span><span id="__span-17-251"><a id="__codelineno-17-251" name="__codelineno-17-251"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">id</span><span class="p">])</span>
</span><span id="__span-17-252"><a id="__codelineno-17-252" name="__codelineno-17-252"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>
</span><span id="__span-17-253"><a id="__codelineno-17-253" name="__codelineno-17-253"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">rowCount</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span>
</span><span id="__span-17-254"><a id="__codelineno-17-254" name="__codelineno-17-254"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;User with id=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot; deleted&quot;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-17-255"><a id="__codelineno-17-255" name="__codelineno-17-255"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-256"><a id="__codelineno-17-256" name="__codelineno-17-256"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">404</span><span class="p">)</span>
</span><span id="__span-17-257"><a id="__codelineno-17-257" name="__codelineno-17-257"></a><span class="w">            </span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;No user found with id=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-17-258"><a id="__codelineno-17-258" name="__codelineno-17-258"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-17-259"><a id="__codelineno-17-259" name="__codelineno-17-259"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-260"><a id="__codelineno-17-260" name="__codelineno-17-260"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">)</span>
</span><span id="__span-17-261"><a id="__codelineno-17-261" name="__codelineno-17-261"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span>
</span><span id="__span-17-262"><a id="__codelineno-17-262" name="__codelineno-17-262"></a><span class="p">});</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="testen-der-abgesicherten-endpunkte-in-postman">Testen der abgesicherten Endpunkte in Postman<a class="headerlink" href="#testen-der-abgesicherten-endpunkte-in-postman" title="Permanent link">&para;</a></h3>
<p>Um die abgesicherten Endpunkte in Postman zu testen, müssen wir die benötigten Informationen im <code>Header</code> an das <code>request</code>-Objekt übergeben. Die folgenden Screenshots zeigen, wie das geht. </p>
<p>Wir loggen uns zunächst mit einem <code>admin</code>-Account ein:</p>
<p><img alt="guards" src="../files/318_guards.png" /></p>
<p>In der <code>Response</code> erhalten wir einen <code>token</code>. Diesen benötigen wir, um uns für die abgesicherten Endpunkte zu autorisieren:</p>
<p><img alt="guards" src="../files/319_guards.png" /></p>
<p>Wir wählen in der oberen <code>Request</code>-Hälfte den Menüpunkt <code>Headers</code> aus und geben dort den <code>key</code> <code>authorization</code> ein und dafür als Wert den <code>token</code>, den wir in der <code>Response</code> vom <code>Login</code> erhalten haben. Als zweiten Schlüssel geben wir <code>username</code> ein und als Wert den <code>username</code>, für den der <code>token</code> erzeugt wurde. Dieser <code>username</code> wurde bei der Token-Erstellung als <code>secret</code> verwendet. Obere Abbildung zeigt den Aufruf des Endpunktes <code>PUT /user/setadmin</code>. Dafür muss auch noch im <code>Body</code> des <code>Requests</code> der <code>username</code> übergeben werden, für den die Rolle auf <code>admin</code> gewechselt werden soll, z.B. </p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="p">{</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">    </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user1&quot;</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="p">}</span>
</span></code></pre></div>
<p>Mit den erforderlichen Autorisierungsinformationen im Header können die abgesicherten Endpunkte in Postman getestet werden. </p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>Wir haben ein Backend zur Nutzerverwaltung erstellt. Es stellt die <a href="./#abgesicherte-rest-api-zur-nutzerverwaltung-backend">oben</a> beschriebenen Endpunkte zur Verfügung. Es ist leicht um weitere Endpunkte erweiterbar, z.B. ein weiterer Endpunkt, der aus einer Nutzerin in der Rolle <code>admin</code> die Rolle <code>user</code> zuweist. Einige der Endpunkte sind mittels <a href="https://jwt.io/">JWT</a> abgesichert, so dass sie nur von als <code>admin</code> eingeloggten Nutzerinnen genutzt werden können. Wir werden nun ein dazu passendes Frontend erstellen, welches das Backend nutzen wird. </p>
</div>
<hr />
<h2 id="registrierung-und-login-frontend">Registrierung und Login (Frontend)<a class="headerlink" href="#registrierung-und-login-frontend" title="Permanent link">&para;</a></h2>
<p>Wir erstellen uns mithilfe von Angular eine kleine Webanwendung, die mindestens eine Regstrierungs- und eine Login-Komponente enthält. Wir wollen dieses Mal <a href="https://material.angular.io/">Material Design</a> anstelle von Bootstrap als CSS-Framework verwenden. </p>
<p>Im Terminal geben wir Folgendes ein:</p>
<table>
<thead>
<tr>
<th>Terminalbefehl</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ng new frontend</code></td>
<td>erstellt Projekt <code>frontend</code> (alle Fragen mit <code>Enter</code> beantworten)</td>
</tr>
<tr>
<td><code>cd frontend</code></td>
<td></td>
</tr>
<tr>
<td><code>ng g c login</code></td>
<td>erstellt Komponente <code>login</code></td>
</tr>
<tr>
<td><code>ng g c home</code></td>
<td>erstellt Komponente <code>home</code></td>
</tr>
<tr>
<td><code>ng g c table</code></td>
<td>erstellt Komponente <code>table</code></td>
</tr>
<tr>
<td><code>ng g s shared/auth</code></td>
<td>erstellt Service <code>auth</code> im Ordner <code>shared</code></td>
</tr>
<tr>
<td><code>ng g i shared/user</code></td>
<td>erstellt Interface <code>user</code> im Ordner <code>shared</code></td>
</tr>
<tr>
<td><code>ng add @angular/material@18</code></td>
<td>fügt <a href="https://material.angular.io/guide/getting-started">Material Design</a> hinzu</td>
</tr>
</tbody>
</table>
<p><strong>Achtung:</strong> Das Hinzufügen von <em>Material Design</em> mithilfe von <code>...@18</code> ist wichtig (Stand Januar 2025). Es gibt zwar bereits Version <code>19</code>, aber dort gibt es noch Probleme mit Abhängigkeiten von Paketen.  Nach dem Hinzufügen von <em>Material Design</em> sollte im Terminal ungefähr folgende Ausgabe erscheinen:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="o">(</span>base<span class="o">)</span><span class="w"> </span>jornfreiheit@MB-JF<span class="w"> </span>frontend<span class="w"> </span>%<span class="w"> </span>ng<span class="w"> </span>add<span class="w"> </span>@angular/material@18
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>✔<span class="w"> </span>Determining<span class="w"> </span>Package<span class="w"> </span>Manager
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">  </span>›<span class="w"> </span>Using<span class="w"> </span>package<span class="w"> </span>manager:<span class="w"> </span>npm
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>✔<span class="w"> </span>Loading<span class="w"> </span>package<span class="w"> </span>information<span class="w"> </span>from<span class="w"> </span>registry
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>✔<span class="w"> </span>Confirming<span class="w"> </span>installation
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>✔<span class="w"> </span>Installing<span class="w"> </span>package
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>?<span class="w"> </span>Choose<span class="w"> </span>a<span class="w"> </span>prebuilt<span class="w"> </span>theme<span class="w"> </span>name,<span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;custom&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span>custom<span class="w"> </span>theme:<span class="w"> </span>Azure/Blue<span class="w">         </span><span class="o">[</span>Preview:<span class="w"> </span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>https://material.angular.io?theme<span class="o">=</span>azure-blue<span class="o">]</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>?<span class="w"> </span>Set<span class="w"> </span>up<span class="w"> </span>global<span class="w"> </span>Angular<span class="w"> </span>Material<span class="w"> </span>typography<span class="w"> </span>styles?<span class="w"> </span>yes
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>?<span class="w"> </span>Include<span class="w"> </span>the<span class="w"> </span>Angular<span class="w"> </span>animations<span class="w"> </span>module?<span class="w"> </span>Include<span class="w"> </span>and<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>animations
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>UPDATE<span class="w"> </span>package.json<span class="w"> </span><span class="o">(</span><span class="m">1122</span><span class="w"> </span>bytes<span class="o">)</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>✔<span class="w"> </span>Packages<span class="w"> </span>installed<span class="w"> </span>successfully.
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>UPDATE<span class="w"> </span>src/app/app.config.ts<span class="w"> </span><span class="o">(</span><span class="m">421</span><span class="w"> </span>bytes<span class="o">)</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>UPDATE<span class="w"> </span>angular.json<span class="w"> </span><span class="o">(</span><span class="m">2778</span><span class="w"> </span>bytes<span class="o">)</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>UPDATE<span class="w"> </span>src/index.html<span class="w"> </span><span class="o">(</span><span class="m">529</span><span class="w"> </span>bytes<span class="o">)</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>UPDATE<span class="w"> </span>src/styles.css<span class="w"> </span><span class="o">(</span><span class="m">181</span><span class="w"> </span>bytes<span class="o">)</span>
</span></code></pre></div>
<p>Als <code>prebuild theme</code> wurde hier <code>Azure/Blue</code> und sowohl für die <code>typography styles</code> als auch für die <code>animations</code> wurde <code>y</code> ausgewählt.</p>
<p><em>Material Design</em> bietet sogenannte <a href="https://material.angular.io/guide/schematics">Schematics</a> an. Wir wählen das <code>navigation</code>-Schema und geben im Terminal ein:</p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>ng<span class="w"> </span>generate<span class="w"> </span>@angular/material:navigation<span class="w"> </span>nav
</span></code></pre></div>
Es entsteht eine <code>nav</code>-Komponente. Außerdem wählen wir das <code>address-form</code>-Schema und erstellen damit eine Komponente <code>register</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>ng<span class="w"> </span>generate<span class="w"> </span>@angular/material:address-form<span class="w"> </span>register
</span></code></pre></div>
<p>Die <code>app.component.html</code> ändern wir wie folgt und in die <code>app.component.ts</code> importieren wir die <code>NavComponent</code> (dafür kann <code>RouterOutlet</code> entfernt werden):</p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:2"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">app.component.html</label><label for="__tabbed_13_2">app.component.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-html highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="p">&lt;</span><span class="nt">app-nav</span><span class="p">&gt;&lt;/</span><span class="nt">app-nav</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-ts highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NavComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./nav/nav.component&#39;</span><span class="p">;</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="kd">@Component</span><span class="p">({</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-root&#39;</span><span class="p">,</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">  </span><span class="nx">standalone</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">NavComponent</span><span class="p">],</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./app.component.html&#39;</span><span class="p">,</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="w">  </span><span class="nx">styleUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./app.component.css&#39;</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="p">})</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AppComponent</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="w">  </span><span class="nx">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;frontend&#39;</span><span class="p">;</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>Darin wird also nur noch die <code>nav</code>-Komponente statisch eingebunden.</p>
<p>Ehe wir an der <code>nav.component.html</code> umfangreichere Änderungen vornehmen, defininieren wir zunächst noch folgende Routen:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">app.routes.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-24-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-24-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-24-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-24-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-24-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-24-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-24-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-24-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-24-10">10</a></span>
<span class="normal"><a href="#__codelineno-24-11">11</a></span>
<span class="normal"><a href="#__codelineno-24-12">12</a></span>
<span class="normal"><a href="#__codelineno-24-13">13</a></span>
<span class="normal"><a href="#__codelineno-24-14">14</a></span>
<span class="normal"><a href="#__codelineno-24-15">15</a></span>
<span class="normal"><a href="#__codelineno-24-16">16</a></span>
<span class="normal"><a href="#__codelineno-24-17">17</a></span>
<span class="normal"><a href="#__codelineno-24-18">18</a></span>
<span class="normal"><a href="#__codelineno-24-19">19</a></span>
<span class="normal"><a href="#__codelineno-24-20">20</a></span>
<span class="normal"><a href="#__codelineno-24-21">21</a></span>
<span class="normal"><a href="#__codelineno-24-22">22</a></span>
<span class="normal"><a href="#__codelineno-24-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./home/home.component&#39;</span><span class="p">;</span>
</span></span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">RegisterComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./register/register.component&#39;</span><span class="p">;</span>
</span></span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./login/login.component&#39;</span><span class="p">;</span>
</span></span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5"></a>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="o">:</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="hll"><span class="w">        </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span></span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="hll"><span class="w">        </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Home&quot;</span><span class="p">,</span>
</span></span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="hll"><span class="w">        </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="p">,</span>
</span></span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="hll"><span class="w">        </span><span class="nx">pathMatch</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;full&#39;</span>
</span></span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="hll"><span class="w">      </span><span class="p">},</span>
</span></span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="hll"><span class="w">      </span><span class="p">{</span>
</span></span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14"></a><span class="hll"><span class="w">        </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;register&quot;</span><span class="p">,</span>
</span></span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15"></a><span class="hll"><span class="w">        </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Register&quot;</span><span class="p">,</span>
</span></span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16"></a><span class="hll"><span class="w">        </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">RegisterComponent</span>
</span></span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17"></a><span class="hll"><span class="w">      </span><span class="p">},</span>
</span></span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18"></a><span class="hll"><span class="w">      </span><span class="p">{</span>
</span></span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19"></a><span class="hll"><span class="w">        </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;login&quot;</span><span class="p">,</span>
</span></span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20"></a><span class="hll"><span class="w">        </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Login&quot;</span><span class="p">,</span>
</span></span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21"></a><span class="hll"><span class="w">        </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">LoginComponent</span>
</span></span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22"></a><span class="hll"><span class="w">      </span><span class="p">}</span>
</span></span><span id="__span-24-23"><a id="__codelineno-24-23" name="__codelineno-24-23"></a><span class="p">];</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Nun können wir die <code>nav.component.html</code> entsprechend anpassen:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="15:1"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">nav.component.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-html highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-25-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-25-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-25-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-25-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-25-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-25-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-25-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-25-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-25-10">10</a></span>
<span class="normal"><a href="#__codelineno-25-11">11</a></span>
<span class="normal"><a href="#__codelineno-25-12">12</a></span>
<span class="normal"><a href="#__codelineno-25-13">13</a></span>
<span class="normal"><a href="#__codelineno-25-14">14</a></span>
<span class="normal"><a href="#__codelineno-25-15">15</a></span>
<span class="normal"><a href="#__codelineno-25-16">16</a></span>
<span class="normal"><a href="#__codelineno-25-17">17</a></span>
<span class="normal"><a href="#__codelineno-25-18">18</a></span>
<span class="normal"><a href="#__codelineno-25-19">19</a></span>
<span class="normal"><a href="#__codelineno-25-20">20</a></span>
<span class="normal"><a href="#__codelineno-25-21">21</a></span>
<span class="normal"><a href="#__codelineno-25-22">22</a></span>
<span class="normal"><a href="#__codelineno-25-23">23</a></span>
<span class="normal"><a href="#__codelineno-25-24">24</a></span>
<span class="normal"><a href="#__codelineno-25-25">25</a></span>
<span class="normal"><a href="#__codelineno-25-26">26</a></span>
<span class="normal"><a href="#__codelineno-25-27">27</a></span>
<span class="normal"><a href="#__codelineno-25-28">28</a></span>
<span class="normal"><a href="#__codelineno-25-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="p">&lt;</span><span class="nt">mat-sidenav-container</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sidenav-container&quot;</span><span class="p">&gt;</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2"></a>  <span class="p">&lt;</span><span class="nt">mat-sidenav</span> <span class="err">#</span><span class="na">drawer</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sidenav&quot;</span> <span class="na">fixedInViewport</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3"></a>      <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">role</span><span class="err">]=&quot;(</span><span class="na">isHandset</span><span class="err">$</span> <span class="err">|</span> <span class="na">async</span><span class="err">)</span> <span class="err">?</span> <span class="err">&#39;</span><span class="na">dialog</span><span class="err">&#39;</span> <span class="na">:</span> <span class="err">&#39;</span><span class="na">navigation</span><span class="err">&#39;&quot;</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4"></a>      <span class="err">[</span><span class="na">mode</span><span class="err">]=&quot;(</span><span class="na">isHandset</span><span class="err">$</span> <span class="err">|</span> <span class="na">async</span><span class="err">)</span> <span class="err">?</span> <span class="err">&#39;</span><span class="na">over</span><span class="err">&#39;</span> <span class="na">:</span> <span class="err">&#39;</span><span class="na">side</span><span class="err">&#39;&quot;</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5"></a>      <span class="err">[</span><span class="na">opened</span><span class="err">]=&quot;(</span><span class="na">isHandset</span><span class="err">$</span> <span class="err">|</span> <span class="na">async</span><span class="err">)</span> <span class="err">===</span> <span class="na">false</span><span class="err">&quot;</span><span class="p">&gt;</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="hll">    <span class="p">&lt;</span><span class="nt">mat-toolbar</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://freiheit.f4.htw-berlin.de/webtech/guards/#registrierung-und-login-frontend&quot;</span><span class="p">&gt;</span>WebTech<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">mat-toolbar</span><span class="p">&gt;</span>
</span></span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7"></a>    <span class="p">&lt;</span><span class="nt">mat-nav-list</span><span class="p">&gt;</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="hll">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;&#39;]&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="hll">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;</span><span class="na">register</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Register<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="hll">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;</span><span class="na">login</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11"></a>    <span class="p">&lt;/</span><span class="nt">mat-nav-list</span><span class="p">&gt;</span>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12"></a>  <span class="p">&lt;/</span><span class="nt">mat-sidenav</span><span class="p">&gt;</span>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13"></a>  <span class="p">&lt;</span><span class="nt">mat-sidenav-content</span><span class="p">&gt;</span>
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14"></a>    <span class="p">&lt;</span><span class="nt">mat-toolbar</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span><span class="p">&gt;</span>
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15"></a>      @if (isHandset$ | async) {
</span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16"></a>        <span class="p">&lt;</span><span class="nt">button</span>
</span><span id="__span-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17"></a>          <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span>
</span><span id="__span-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18"></a>          <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Toggle sidenav&quot;</span>
</span><span id="__span-25-19"><a id="__codelineno-25-19" name="__codelineno-25-19"></a>          <span class="na">mat-icon-button</span>
</span><span id="__span-25-20"><a id="__codelineno-25-20" name="__codelineno-25-20"></a>          <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">drawer</span><span class="err">.</span><span class="na">toggle</span><span class="err">()&quot;</span><span class="p">&gt;</span>
</span><span id="__span-25-21"><a id="__codelineno-25-21" name="__codelineno-25-21"></a>          <span class="p">&lt;</span><span class="nt">mat-icon</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Side nav toggle icon&quot;</span><span class="p">&gt;</span>menu<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-25-22"><a id="__codelineno-25-22" name="__codelineno-25-22"></a>        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-25-23"><a id="__codelineno-25-23" name="__codelineno-25-23"></a>      }
</span><span id="__span-25-24"><a id="__codelineno-25-24" name="__codelineno-25-24"></a><span class="hll">      <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Nutzerinnenverwaltung<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span id="__span-25-25"><a id="__codelineno-25-25" name="__codelineno-25-25"></a>    <span class="p">&lt;/</span><span class="nt">mat-toolbar</span><span class="p">&gt;</span>
</span><span id="__span-25-26"><a id="__codelineno-25-26" name="__codelineno-25-26"></a>    <span class="cm">&lt;!-- Add Content Here --&gt;</span>
</span><span id="__span-25-27"><a id="__codelineno-25-27" name="__codelineno-25-27"></a><span class="hll">    <span class="p">&lt;</span><span class="nt">router-outlet</span><span class="p">&gt;&lt;/</span><span class="nt">router-outlet</span><span class="p">&gt;</span>
</span></span><span id="__span-25-28"><a id="__codelineno-25-28" name="__codelineno-25-28"></a>  <span class="p">&lt;/</span><span class="nt">mat-sidenav-content</span><span class="p">&gt;</span>
</span><span id="__span-25-29"><a id="__codelineno-25-29" name="__codelineno-25-29"></a><span class="p">&lt;/</span><span class="nt">mat-sidenav-container</span><span class="p">&gt;</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>In den Zeilen <code>8-10</code> werden die Menüeinträge geändert und die Verweise auf <code>routerLinks</code> geändert. In Zeile <code>24</code> wird die Überschrift geändert und in Zeile <code>27</code> erscheint der Platzhalter für die per Routing eingebundenen Komponenten. Zeile <code>6</code> wurde hier nur optional als Demo geändert, kann natürlich auch bleiben.</p>
<p>Die erforderlichen Anpassungen in der <code>nav.component.ts</code> und der <code>nav.component.css</code> sehen dann so aus:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="16:2"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><input id="__tabbed_16_2" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">nav.component.ts</label><label for="__tabbed_16_2">nav.component.css</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span>
<span class="normal"><a href="#__codelineno-26-15">15</a></span>
<span class="normal"><a href="#__codelineno-26-16">16</a></span>
<span class="normal"><a href="#__codelineno-26-17">17</a></span>
<span class="normal"><a href="#__codelineno-26-18">18</a></span>
<span class="normal"><a href="#__codelineno-26-19">19</a></span>
<span class="normal"><a href="#__codelineno-26-20">20</a></span>
<span class="normal"><a href="#__codelineno-26-21">21</a></span>
<span class="normal"><a href="#__codelineno-26-22">22</a></span>
<span class="normal"><a href="#__codelineno-26-23">23</a></span>
<span class="normal"><a href="#__codelineno-26-24">24</a></span>
<span class="normal"><a href="#__codelineno-26-25">25</a></span>
<span class="normal"><a href="#__codelineno-26-26">26</a></span>
<span class="normal"><a href="#__codelineno-26-27">27</a></span>
<span class="normal"><a href="#__codelineno-26-28">28</a></span>
<span class="normal"><a href="#__codelineno-26-29">29</a></span>
<span class="normal"><a href="#__codelineno-26-30">30</a></span>
<span class="normal"><a href="#__codelineno-26-31">31</a></span>
<span class="normal"><a href="#__codelineno-26-32">32</a></span>
<span class="normal"><a href="#__codelineno-26-33">33</a></span>
<span class="normal"><a href="#__codelineno-26-34">34</a></span>
<span class="normal"><a href="#__codelineno-26-35">35</a></span>
<span class="normal"><a href="#__codelineno-26-36">36</a></span>
<span class="normal"><a href="#__codelineno-26-37">37</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">inject</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">BreakpointObserver</span><span class="p">,</span><span class="w"> </span><span class="nx">Breakpoints</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/cdk/layout&#39;</span><span class="p">;</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AsyncPipe</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatToolbarModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/toolbar&#39;</span><span class="p">;</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatButtonModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/button&#39;</span><span class="p">;</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatSidenavModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/sidenav&#39;</span><span class="p">;</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatListModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/list&#39;</span><span class="p">;</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatIconModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/icon&#39;</span><span class="p">;</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Observable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">map</span><span class="p">,</span><span class="w"> </span><span class="nx">shareReplay</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rxjs/operators&#39;</span><span class="p">;</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">RouterLink</span><span class="p">,</span><span class="w"> </span><span class="nx">RouterOutlet</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
</span></span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12"></a>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-nav&#39;</span><span class="p">,</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./nav.component.html&#39;</span><span class="p">,</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16"></a><span class="w">  </span><span class="nx">styleUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./nav.component.css&#39;</span><span class="p">,</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17"></a><span class="w">  </span><span class="nx">standalone</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18"></a><span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19"></a><span class="w">    </span><span class="nx">MatToolbarModule</span><span class="p">,</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20"></a><span class="w">    </span><span class="nx">MatButtonModule</span><span class="p">,</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21"></a><span class="w">    </span><span class="nx">MatSidenavModule</span><span class="p">,</span>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22"></a><span class="w">    </span><span class="nx">MatListModule</span><span class="p">,</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23"></a><span class="w">    </span><span class="nx">MatIconModule</span><span class="p">,</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24"></a><span class="w">    </span><span class="nx">AsyncPipe</span><span class="p">,</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25"></a><span class="hll"><span class="w">    </span><span class="nx">RouterOutlet</span><span class="p">,</span>
</span></span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26"></a><span class="hll"><span class="w">    </span><span class="nx">RouterLink</span>
</span></span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28"></a><span class="p">})</span>
</span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">NavComponent</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-30"><a id="__codelineno-26-30" name="__codelineno-26-30"></a><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">breakpointObserver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">BreakpointObserver</span><span class="p">);</span>
</span><span id="__span-26-31"><a id="__codelineno-26-31" name="__codelineno-26-31"></a>
</span><span id="__span-26-32"><a id="__codelineno-26-32" name="__codelineno-26-32"></a><span class="w">  </span><span class="nx">isHandset$</span><span class="o">:</span><span class="w"> </span><span class="nx">Observable</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">breakpointObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">Breakpoints</span><span class="p">.</span><span class="nx">Handset</span><span class="p">)</span>
</span><span id="__span-26-33"><a id="__codelineno-26-33" name="__codelineno-26-33"></a><span class="w">    </span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
</span><span id="__span-26-34"><a id="__codelineno-26-34" name="__codelineno-26-34"></a><span class="w">      </span><span class="nx">map</span><span class="p">(</span><span class="nx">result</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">matches</span><span class="p">),</span>
</span><span id="__span-26-35"><a id="__codelineno-26-35" name="__codelineno-26-35"></a><span class="w">      </span><span class="nx">shareReplay</span><span class="p">()</span>
</span><span id="__span-26-36"><a id="__codelineno-26-36" name="__codelineno-26-36"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-26-37"><a id="__codelineno-26-37" name="__codelineno-26-37"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-css highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-27-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-27-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-27-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-27-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-27-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-27-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-27-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-27-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-27-10">10</a></span>
<span class="normal"><a href="#__codelineno-27-11">11</a></span>
<span class="normal"><a href="#__codelineno-27-12">12</a></span>
<span class="normal"><a href="#__codelineno-27-13">13</a></span>
<span class="normal"><a href="#__codelineno-27-14">14</a></span>
<span class="normal"><a href="#__codelineno-27-15">15</a></span>
<span class="normal"><a href="#__codelineno-27-16">16</a></span>
<span class="normal"><a href="#__codelineno-27-17">17</a></span>
<span class="normal"><a href="#__codelineno-27-18">18</a></span>
<span class="normal"><a href="#__codelineno-27-19">19</a></span>
<span class="normal"><a href="#__codelineno-27-20">20</a></span>
<span class="normal"><a href="#__codelineno-27-21">21</a></span>
<span class="normal"><a href="#__codelineno-27-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="p">.</span><span class="nc">sidenav-container</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="w">  </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="p">}</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4"></a>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="p">.</span><span class="nc">sidenav</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="p">}</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8"></a>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9"></a><span class="p">.</span><span class="nc">sidenav</span><span class="w"> </span><span class="p">.</span><span class="nc">mat-toolbar</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10"></a><span class="w">  </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">inherit</span><span class="p">;</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11"></a><span class="p">}</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12"></a>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13"></a><span class="p">.</span><span class="nc">mat-toolbar</span><span class="p">.</span><span class="nc">mat-primary</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14"></a><span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">sticky</span><span class="p">;</span>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15"></a><span class="w">  </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16"></a><span class="w">  </span><span class="k">z-index</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17"></a><span class="p">}</span>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18"></a>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19"></a><span class="hll"><span class="nt">a</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20"></a><span class="hll"><span class="w">  </span><span class="k">text-decoration</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
</span></span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21"></a><span class="hll"><span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">black</span><span class="p">;</span>
</span></span><span id="__span-27-22"><a id="__codelineno-27-22" name="__codelineno-27-22"></a><span class="hll"><span class="p">}</span>
</span></span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Die Anwendung sieht nun wie folgt aus (Desktop- und Mobile-Ansicht):</p>
<p><img alt="users" src="../files/278_users.png" width="50%" /></p>
<p>Die Menüeinträge funktionieren und bei der <code>register</code>-Komponente wird bereits ein recht umfangreiches Formular angezeigt (wegen des verwendeten <code>address-form</code>-Schemas).</p>
<h3 id="registrierung">Registrierung<a class="headerlink" href="#registrierung" title="Permanent link">&para;</a></h3>
<p>Wir passen die durch das <code>address-form</code>-Schema erstellte <code>register</code>-Komponente an. Die Dateien der <code>register</code>-Komponente könnten z.B. so aussehen:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="17:3"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><input id="__tabbed_17_2" name="__tabbed_17" type="radio" /><input id="__tabbed_17_3" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">register.component.ts</label><label for="__tabbed_17_2">register.component.html</label><label for="__tabbed_17_3">register.component.css</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span>
<span class="normal"><a href="#__codelineno-28-15">15</a></span>
<span class="normal"><a href="#__codelineno-28-16">16</a></span>
<span class="normal"><a href="#__codelineno-28-17">17</a></span>
<span class="normal"><a href="#__codelineno-28-18">18</a></span>
<span class="normal"><a href="#__codelineno-28-19">19</a></span>
<span class="normal"><a href="#__codelineno-28-20">20</a></span>
<span class="normal"><a href="#__codelineno-28-21">21</a></span>
<span class="normal"><a href="#__codelineno-28-22">22</a></span>
<span class="normal"><a href="#__codelineno-28-23">23</a></span>
<span class="normal"><a href="#__codelineno-28-24">24</a></span>
<span class="normal"><a href="#__codelineno-28-25">25</a></span>
<span class="normal"><a href="#__codelineno-28-26">26</a></span>
<span class="normal"><a href="#__codelineno-28-27">27</a></span>
<span class="normal"><a href="#__codelineno-28-28">28</a></span>
<span class="normal"><a href="#__codelineno-28-29">29</a></span>
<span class="normal"><a href="#__codelineno-28-30">30</a></span>
<span class="normal"><a href="#__codelineno-28-31">31</a></span>
<span class="normal"><a href="#__codelineno-28-32">32</a></span>
<span class="normal"><a href="#__codelineno-28-33">33</a></span>
<span class="normal"><a href="#__codelineno-28-34">34</a></span>
<span class="normal"><a href="#__codelineno-28-35">35</a></span>
<span class="normal"><a href="#__codelineno-28-36">36</a></span>
<span class="normal"><a href="#__codelineno-28-37">37</a></span>
<span class="normal"><a href="#__codelineno-28-38">38</a></span>
<span class="normal"><a href="#__codelineno-28-39">39</a></span>
<span class="normal"><a href="#__codelineno-28-40">40</a></span>
<span class="normal"><a href="#__codelineno-28-41">41</a></span>
<span class="normal"><a href="#__codelineno-28-42">42</a></span>
<span class="normal"><a href="#__codelineno-28-43">43</a></span>
<span class="normal"><a href="#__codelineno-28-44">44</a></span>
<span class="normal"><a href="#__codelineno-28-45">45</a></span>
<span class="normal"><a href="#__codelineno-28-46">46</a></span>
<span class="normal"><a href="#__codelineno-28-47">47</a></span>
<span class="normal"><a href="#__codelineno-28-48">48</a></span>
<span class="normal"><a href="#__codelineno-28-49">49</a></span>
<span class="normal"><a href="#__codelineno-28-50">50</a></span>
<span class="normal"><a href="#__codelineno-28-51">51</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">inject</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2"></a>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ReactiveFormsModule</span><span class="p">,</span><span class="w"> </span><span class="nx">FormBuilder</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">,</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">,</span><span class="w"> </span><span class="nx">FormGroup</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatInputModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/input&#39;</span><span class="p">;</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatButtonModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/button&#39;</span><span class="p">;</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatSelectModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/select&#39;</span><span class="p">;</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatRadioModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/radio&#39;</span><span class="p">;</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatCardModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/card&#39;</span><span class="p">;</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/user&#39;</span><span class="p">;</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatIconModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/icon&#39;</span><span class="p">;</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11"></a>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12"></a>
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="kd">@Component</span><span class="p">({</span>
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14"></a><span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-register&#39;</span><span class="p">,</span>
</span><span id="__span-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15"></a><span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./register.component.html&#39;</span><span class="p">,</span>
</span><span id="__span-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="w">  </span><span class="nx">styleUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./register.component.css&#39;</span><span class="p">,</span>
</span><span id="__span-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17"></a><span class="w">  </span><span class="nx">standalone</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
</span><span id="__span-28-18"><a id="__codelineno-28-18" name="__codelineno-28-18"></a><span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-28-19"><a id="__codelineno-28-19" name="__codelineno-28-19"></a><span class="w">    </span><span class="nx">MatIconModule</span><span class="p">,</span>
</span><span id="__span-28-20"><a id="__codelineno-28-20" name="__codelineno-28-20"></a><span class="w">    </span><span class="nx">MatInputModule</span><span class="p">,</span>
</span><span id="__span-28-21"><a id="__codelineno-28-21" name="__codelineno-28-21"></a><span class="w">    </span><span class="nx">MatButtonModule</span><span class="p">,</span>
</span><span id="__span-28-22"><a id="__codelineno-28-22" name="__codelineno-28-22"></a><span class="w">    </span><span class="nx">MatSelectModule</span><span class="p">,</span>
</span><span id="__span-28-23"><a id="__codelineno-28-23" name="__codelineno-28-23"></a><span class="w">    </span><span class="nx">MatRadioModule</span><span class="p">,</span>
</span><span id="__span-28-24"><a id="__codelineno-28-24" name="__codelineno-28-24"></a><span class="w">    </span><span class="nx">MatCardModule</span><span class="p">,</span>
</span><span id="__span-28-25"><a id="__codelineno-28-25" name="__codelineno-28-25"></a><span class="w">    </span><span class="nx">ReactiveFormsModule</span>
</span><span id="__span-28-26"><a id="__codelineno-28-26" name="__codelineno-28-26"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-28-27"><a id="__codelineno-28-27" name="__codelineno-28-27"></a><span class="p">})</span>
</span><span id="__span-28-28"><a id="__codelineno-28-28" name="__codelineno-28-28"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">RegisterComponent</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-28-29"><a id="__codelineno-28-29" name="__codelineno-28-29"></a><span class="w">  </span><span class="nx">registerForm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormGroup</span><span class="p">({</span>
</span><span id="__span-28-30"><a id="__codelineno-28-30" name="__codelineno-28-30"></a><span class="w">    </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">),</span>
</span><span id="__span-28-31"><a id="__codelineno-28-31" name="__codelineno-28-31"></a><span class="w">    </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">minLength</span><span class="p">(</span><span class="mf">8</span><span class="p">)]),</span>
</span><span id="__span-28-32"><a id="__codelineno-28-32" name="__codelineno-28-32"></a><span class="w">    </span><span class="nx">password2</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">minLength</span><span class="p">(</span><span class="mf">8</span><span class="p">)]),</span>
</span><span id="__span-28-33"><a id="__codelineno-28-33" name="__codelineno-28-33"></a><span class="w">    </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">email</span><span class="p">]),</span>
</span><span id="__span-28-34"><a id="__codelineno-28-34" name="__codelineno-28-34"></a><span class="w">    </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">)</span>
</span><span id="__span-28-35"><a id="__codelineno-28-35" name="__codelineno-28-35"></a><span class="w">  </span><span class="p">});</span>
</span><span id="__span-28-36"><a id="__codelineno-28-36" name="__codelineno-28-36"></a><span class="w">  </span><span class="nx">roles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;admin&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;user&quot;</span><span class="p">];</span>
</span><span id="__span-28-37"><a id="__codelineno-28-37" name="__codelineno-28-37"></a><span class="w">  </span><span class="nx">hide</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-28-38"><a id="__codelineno-28-38" name="__codelineno-28-38"></a><span class="w">  </span><span class="nx">hide2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-28-39"><a id="__codelineno-28-39" name="__codelineno-28-39"></a><span class="w">  </span><span class="nx">user</span><span class="o">!:</span><span class="w"> </span><span class="nx">User</span><span class="p">;</span>
</span><span id="__span-28-40"><a id="__codelineno-28-40" name="__codelineno-28-40"></a>
</span><span id="__span-28-41"><a id="__codelineno-28-41" name="__codelineno-28-41"></a><span class="w">  </span><span class="nx">onSubmit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-28-42"><a id="__codelineno-28-42" name="__codelineno-28-42"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-28-43"><a id="__codelineno-28-43" name="__codelineno-28-43"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-28-44"><a id="__codelineno-28-44" name="__codelineno-28-44"></a><span class="w">      </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">values.username</span><span class="o">!</span><span class="p">,</span>
</span><span id="__span-28-45"><a id="__codelineno-28-45" name="__codelineno-28-45"></a><span class="w">      </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="kt">values.password</span><span class="o">!</span><span class="p">,</span>
</span><span id="__span-28-46"><a id="__codelineno-28-46" name="__codelineno-28-46"></a><span class="w">      </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="kt">values.email</span><span class="o">!</span><span class="p">,</span>
</span><span id="__span-28-47"><a id="__codelineno-28-47" name="__codelineno-28-47"></a><span class="w">      </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="kt">values.role</span><span class="o">!</span>
</span><span id="__span-28-48"><a id="__codelineno-28-48" name="__codelineno-28-48"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-28-49"><a id="__codelineno-28-49" name="__codelineno-28-49"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span>
</span><span id="__span-28-50"><a id="__codelineno-28-50" name="__codelineno-28-50"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-28-51"><a id="__codelineno-28-51" name="__codelineno-28-51"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span>
<span class="normal"><a href="#__codelineno-29-13">13</a></span>
<span class="normal"><a href="#__codelineno-29-14">14</a></span>
<span class="normal"><a href="#__codelineno-29-15">15</a></span>
<span class="normal"><a href="#__codelineno-29-16">16</a></span>
<span class="normal"><a href="#__codelineno-29-17">17</a></span>
<span class="normal"><a href="#__codelineno-29-18">18</a></span>
<span class="normal"><a href="#__codelineno-29-19">19</a></span>
<span class="normal"><a href="#__codelineno-29-20">20</a></span>
<span class="normal"><a href="#__codelineno-29-21">21</a></span>
<span class="normal"><a href="#__codelineno-29-22">22</a></span>
<span class="normal"><a href="#__codelineno-29-23">23</a></span>
<span class="normal"><a href="#__codelineno-29-24">24</a></span>
<span class="normal"><a href="#__codelineno-29-25">25</a></span>
<span class="normal"><a href="#__codelineno-29-26">26</a></span>
<span class="normal"><a href="#__codelineno-29-27">27</a></span>
<span class="normal"><a href="#__codelineno-29-28">28</a></span>
<span class="normal"><a href="#__codelineno-29-29">29</a></span>
<span class="normal"><a href="#__codelineno-29-30">30</a></span>
<span class="normal"><a href="#__codelineno-29-31">31</a></span>
<span class="normal"><a href="#__codelineno-29-32">32</a></span>
<span class="normal"><a href="#__codelineno-29-33">33</a></span>
<span class="normal"><a href="#__codelineno-29-34">34</a></span>
<span class="normal"><a href="#__codelineno-29-35">35</a></span>
<span class="normal"><a href="#__codelineno-29-36">36</a></span>
<span class="normal"><a href="#__codelineno-29-37">37</a></span>
<span class="normal"><a href="#__codelineno-29-38">38</a></span>
<span class="normal"><a href="#__codelineno-29-39">39</a></span>
<span class="normal"><a href="#__codelineno-29-40">40</a></span>
<span class="normal"><a href="#__codelineno-29-41">41</a></span>
<span class="normal"><a href="#__codelineno-29-42">42</a></span>
<span class="normal"><a href="#__codelineno-29-43">43</a></span>
<span class="normal"><a href="#__codelineno-29-44">44</a></span>
<span class="normal"><a href="#__codelineno-29-45">45</a></span>
<span class="normal"><a href="#__codelineno-29-46">46</a></span>
<span class="normal"><a href="#__codelineno-29-47">47</a></span>
<span class="normal"><a href="#__codelineno-29-48">48</a></span>
<span class="normal"><a href="#__codelineno-29-49">49</a></span>
<span class="normal"><a href="#__codelineno-29-50">50</a></span>
<span class="normal"><a href="#__codelineno-29-51">51</a></span>
<span class="normal"><a href="#__codelineno-29-52">52</a></span>
<span class="normal"><a href="#__codelineno-29-53">53</a></span>
<span class="normal"><a href="#__codelineno-29-54">54</a></span>
<span class="normal"><a href="#__codelineno-29-55">55</a></span>
<span class="normal"><a href="#__codelineno-29-56">56</a></span>
<span class="normal"><a href="#__codelineno-29-57">57</a></span>
<span class="normal"><a href="#__codelineno-29-58">58</a></span>
<span class="normal"><a href="#__codelineno-29-59">59</a></span>
<span class="normal"><a href="#__codelineno-29-60">60</a></span>
<span class="normal"><a href="#__codelineno-29-61">61</a></span>
<span class="normal"><a href="#__codelineno-29-62">62</a></span>
<span class="normal"><a href="#__codelineno-29-63">63</a></span>
<span class="normal"><a href="#__codelineno-29-64">64</a></span>
<span class="normal"><a href="#__codelineno-29-65">65</a></span>
<span class="normal"><a href="#__codelineno-29-66">66</a></span>
<span class="normal"><a href="#__codelineno-29-67">67</a></span>
<span class="normal"><a href="#__codelineno-29-68">68</a></span>
<span class="normal"><a href="#__codelineno-29-69">69</a></span>
<span class="normal"><a href="#__codelineno-29-70">70</a></span>
<span class="normal"><a href="#__codelineno-29-71">71</a></span>
<span class="normal"><a href="#__codelineno-29-72">72</a></span>
<span class="normal"><a href="#__codelineno-29-73">73</a></span>
<span class="normal"><a href="#__codelineno-29-74">74</a></span>
<span class="normal"><a href="#__codelineno-29-75">75</a></span>
<span class="normal"><a href="#__codelineno-29-76">76</a></span>
<span class="normal"><a href="#__codelineno-29-77">77</a></span>
<span class="normal"><a href="#__codelineno-29-78">78</a></span>
<span class="normal"><a href="#__codelineno-29-79">79</a></span>
<span class="normal"><a href="#__codelineno-29-80">80</a></span>
<span class="normal"><a href="#__codelineno-29-81">81</a></span>
<span class="normal"><a href="#__codelineno-29-82">82</a></span>
<span class="normal"><a href="#__codelineno-29-83">83</a></span>
<span class="normal"><a href="#__codelineno-29-84">84</a></span>
<span class="normal"><a href="#__codelineno-29-85">85</a></span>
<span class="normal"><a href="#__codelineno-29-86">86</a></span>
<span class="normal"><a href="#__codelineno-29-87">87</a></span>
<span class="normal"><a href="#__codelineno-29-88">88</a></span>
<span class="normal"><a href="#__codelineno-29-89">89</a></span>
<span class="normal"><a href="#__codelineno-29-90">90</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="p">&lt;</span><span class="nt">form</span> <span class="err">[</span><span class="na">formGroup</span><span class="err">]=&quot;</span><span class="na">registerForm</span><span class="err">&quot;</span> <span class="na">novalidate</span> <span class="err">(</span><span class="na">ngSubmit</span><span class="err">)=&quot;</span><span class="na">onSubmit</span><span class="err">()&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2"></a>  <span class="p">&lt;</span><span class="nt">mat-card</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;shipping-card&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3"></a>    <span class="p">&lt;</span><span class="nt">mat-card-header</span><span class="p">&gt;</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4"></a>      <span class="p">&lt;</span><span class="nt">mat-card-title</span><span class="p">&gt;</span>Registrierung<span class="p">&lt;/</span><span class="nt">mat-card-title</span><span class="p">&gt;</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5"></a>    <span class="p">&lt;/</span><span class="nt">mat-card-header</span><span class="p">&gt;</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6"></a>    <span class="p">&lt;</span><span class="nt">mat-card-content</span><span class="p">&gt;</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7"></a>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8"></a>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10"></a>          <span class="p">&lt;</span><span class="nt">mat-form-field</span> <span class="na">hintLabel</span><span class="o">=</span><span class="s">&quot;Einloggen mit Nutzername und Passwort&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11"></a>            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Nutzername&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;username&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12"></a>            <span class="p">&lt;</span><span class="nt">mat-icon</span> <span class="na">matSuffix</span> <span class="p">&gt;</span>person_add<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13"></a>            @if(registerForm.controls[&#39;username&#39;].hasError(&#39;required&#39;)) {
</span><span id="__span-29-14"><a id="__codelineno-29-14" name="__codelineno-29-14"></a>              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-29-15"><a id="__codelineno-29-15" name="__codelineno-29-15"></a>                Nutzername <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>erforderlich<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
</span><span id="__span-29-16"><a id="__codelineno-29-16" name="__codelineno-29-16"></a>              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-29-17"><a id="__codelineno-29-17" name="__codelineno-29-17"></a>            }
</span><span id="__span-29-18"><a id="__codelineno-29-18" name="__codelineno-29-18"></a>          <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
</span><span id="__span-29-19"><a id="__codelineno-29-19" name="__codelineno-29-19"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-29-20"><a id="__codelineno-29-20" name="__codelineno-29-20"></a>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-29-21"><a id="__codelineno-29-21" name="__codelineno-29-21"></a>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-22"><a id="__codelineno-29-22" name="__codelineno-29-22"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-23"><a id="__codelineno-29-23" name="__codelineno-29-23"></a>          <span class="p">&lt;</span><span class="nt">mat-form-field</span> <span class="na">hintLabel</span><span class="o">=</span><span class="s">&quot;Mind. 8 Zeichen, mind. 1 Groß- und Kleinbuchstaben, Ziffer und Sonderzeichen&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-24"><a id="__codelineno-29-24" name="__codelineno-29-24"></a>            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">matInput</span> <span class="err">[</span><span class="na">type</span><span class="err">]=&quot;</span><span class="na">hide</span> <span class="err">?</span> <span class="err">&#39;</span><span class="na">password</span><span class="err">&#39;</span> <span class="na">:</span> <span class="err">&#39;</span><span class="na">text</span><span class="err">&#39;&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Passwort&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;password&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-25"><a id="__codelineno-29-25" name="__codelineno-29-25"></a>            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-icon-button</span> <span class="na">matSuffix</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">hide </span><span class="o">=</span> <span class="s">!hide&quot;</span> <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">aria-label</span><span class="err">]=&quot;&#39;</span><span class="na">Hide</span> <span class="na">password</span><span class="err">&#39;&quot;</span> <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">aria-pressed</span><span class="err">]=&quot;</span><span class="na">hide</span><span class="err">&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-26"><a id="__codelineno-29-26" name="__codelineno-29-26"></a>              <span class="p">&lt;</span><span class="nt">mat-icon</span><span class="p">&gt;</span>{{hide ? &#39;visibility_off&#39; : &#39;visibility&#39;}}<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-29-27"><a id="__codelineno-29-27" name="__codelineno-29-27"></a>            <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-29-28"><a id="__codelineno-29-28" name="__codelineno-29-28"></a>            @if(registerForm.controls[&#39;password&#39;].hasError(&#39;required&#39;)) {
</span><span id="__span-29-29"><a id="__codelineno-29-29" name="__codelineno-29-29"></a>              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-29-30"><a id="__codelineno-29-30" name="__codelineno-29-30"></a>                Passwort <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>erforderlich<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
</span><span id="__span-29-31"><a id="__codelineno-29-31" name="__codelineno-29-31"></a>              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-29-32"><a id="__codelineno-29-32" name="__codelineno-29-32"></a>            }
</span><span id="__span-29-33"><a id="__codelineno-29-33" name="__codelineno-29-33"></a>          <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
</span><span id="__span-29-34"><a id="__codelineno-29-34" name="__codelineno-29-34"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-29-35"><a id="__codelineno-29-35" name="__codelineno-29-35"></a>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-29-36"><a id="__codelineno-29-36" name="__codelineno-29-36"></a>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-37"><a id="__codelineno-29-37" name="__codelineno-29-37"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-38"><a id="__codelineno-29-38" name="__codelineno-29-38"></a>          <span class="p">&lt;</span><span class="nt">mat-form-field</span> <span class="na">hintLabel</span><span class="o">=</span><span class="s">&quot;Dasselbe Passwort wie oben&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-39"><a id="__codelineno-29-39" name="__codelineno-29-39"></a>            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">matInput</span>  <span class="err">[</span><span class="na">type</span><span class="err">]=&quot;</span><span class="na">hide2</span> <span class="err">?</span> <span class="err">&#39;</span><span class="na">password</span><span class="err">&#39;</span> <span class="na">:</span> <span class="err">&#39;</span><span class="na">text</span><span class="err">&#39;&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Passwort wiederholen&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;password2&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-40"><a id="__codelineno-29-40" name="__codelineno-29-40"></a>            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-icon-button</span> <span class="na">matSuffix</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">hide2 </span><span class="o">=</span> <span class="s">!hide2&quot;</span> <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">aria-label</span><span class="err">]=&quot;&#39;</span><span class="na">Hide</span> <span class="na">password</span><span class="err">&#39;&quot;</span> <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">aria-pressed</span><span class="err">]=&quot;</span><span class="na">hide</span><span class="err">&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-41"><a id="__codelineno-29-41" name="__codelineno-29-41"></a>              <span class="p">&lt;</span><span class="nt">mat-icon</span><span class="p">&gt;</span>{{hide2 ? &#39;visibility_off&#39; : &#39;visibility&#39;}}<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-29-42"><a id="__codelineno-29-42" name="__codelineno-29-42"></a>            <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-29-43"><a id="__codelineno-29-43" name="__codelineno-29-43"></a>            @if(registerForm.controls[&#39;password2&#39;].hasError(&#39;required&#39;)) {
</span><span id="__span-29-44"><a id="__codelineno-29-44" name="__codelineno-29-44"></a>              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-29-45"><a id="__codelineno-29-45" name="__codelineno-29-45"></a>                Wiederholung Passwort <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>erforderlich<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
</span><span id="__span-29-46"><a id="__codelineno-29-46" name="__codelineno-29-46"></a>              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-29-47"><a id="__codelineno-29-47" name="__codelineno-29-47"></a>            }
</span><span id="__span-29-48"><a id="__codelineno-29-48" name="__codelineno-29-48"></a>          <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
</span><span id="__span-29-49"><a id="__codelineno-29-49" name="__codelineno-29-49"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-29-50"><a id="__codelineno-29-50" name="__codelineno-29-50"></a>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-29-51"><a id="__codelineno-29-51" name="__codelineno-29-51"></a>
</span><span id="__span-29-52"><a id="__codelineno-29-52" name="__codelineno-29-52"></a>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-53"><a id="__codelineno-29-53" name="__codelineno-29-53"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-54"><a id="__codelineno-29-54" name="__codelineno-29-54"></a>          <span class="p">&lt;</span><span class="nt">mat-form-field</span> <span class="na">hintLabel</span><span class="o">=</span><span class="s">&quot;E-Mail-Adresse zum Kontaktieren verwendet&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-55"><a id="__codelineno-29-55" name="__codelineno-29-55"></a>            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;E-Mail&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;email&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-56"><a id="__codelineno-29-56" name="__codelineno-29-56"></a>            <span class="p">&lt;</span><span class="nt">mat-icon</span> <span class="na">matSuffix</span><span class="p">&gt;</span>email<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-29-57"><a id="__codelineno-29-57" name="__codelineno-29-57"></a>            @if(registerForm.controls[&#39;email&#39;].hasError(&#39;required&#39;)) {
</span><span id="__span-29-58"><a id="__codelineno-29-58" name="__codelineno-29-58"></a>              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-29-59"><a id="__codelineno-29-59" name="__codelineno-29-59"></a>                E-Mail-Adresse <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>erforderlich<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
</span><span id="__span-29-60"><a id="__codelineno-29-60" name="__codelineno-29-60"></a>              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-29-61"><a id="__codelineno-29-61" name="__codelineno-29-61"></a>            }
</span><span id="__span-29-62"><a id="__codelineno-29-62" name="__codelineno-29-62"></a>          <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
</span><span id="__span-29-63"><a id="__codelineno-29-63" name="__codelineno-29-63"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-29-64"><a id="__codelineno-29-64" name="__codelineno-29-64"></a>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-29-65"><a id="__codelineno-29-65" name="__codelineno-29-65"></a>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-66"><a id="__codelineno-29-66" name="__codelineno-29-66"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-67"><a id="__codelineno-29-67" name="__codelineno-29-67"></a>          <span class="p">&lt;</span><span class="nt">mat-form-field</span> <span class="na">hintLabel</span><span class="o">=</span><span class="s">&quot;Wählen Sie eine der beiden Rollen aus&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-68"><a id="__codelineno-29-68" name="__codelineno-29-68"></a>            <span class="p">&lt;</span><span class="nt">mat-select</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Rolle&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;role&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-69"><a id="__codelineno-29-69" name="__codelineno-29-69"></a>              @for(role of roles; track $index) {
</span><span id="__span-29-70"><a id="__codelineno-29-70" name="__codelineno-29-70"></a>                <span class="p">&lt;</span><span class="nt">mat-option</span> <span class="err">[</span><span class="na">value</span><span class="err">]=&quot;</span><span class="na">role</span><span class="err">&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-71"><a id="__codelineno-29-71" name="__codelineno-29-71"></a>                  {{ role }}
</span><span id="__span-29-72"><a id="__codelineno-29-72" name="__codelineno-29-72"></a>                <span class="p">&lt;/</span><span class="nt">mat-option</span><span class="p">&gt;</span>
</span><span id="__span-29-73"><a id="__codelineno-29-73" name="__codelineno-29-73"></a>              }
</span><span id="__span-29-74"><a id="__codelineno-29-74" name="__codelineno-29-74"></a>            <span class="p">&lt;/</span><span class="nt">mat-select</span><span class="p">&gt;</span>
</span><span id="__span-29-75"><a id="__codelineno-29-75" name="__codelineno-29-75"></a>            <span class="p">&lt;</span><span class="nt">mat-icon</span> <span class="na">matSuffix</span><span class="p">&gt;</span>group<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-29-76"><a id="__codelineno-29-76" name="__codelineno-29-76"></a>            @if(registerForm.controls[&#39;role&#39;].hasError(&#39;required&#39;)) {
</span><span id="__span-29-77"><a id="__codelineno-29-77" name="__codelineno-29-77"></a>              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-29-78"><a id="__codelineno-29-78" name="__codelineno-29-78"></a>                Rolle <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>erforderlich<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
</span><span id="__span-29-79"><a id="__codelineno-29-79" name="__codelineno-29-79"></a>              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-29-80"><a id="__codelineno-29-80" name="__codelineno-29-80"></a>            }
</span><span id="__span-29-81"><a id="__codelineno-29-81" name="__codelineno-29-81"></a>          <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
</span><span id="__span-29-82"><a id="__codelineno-29-82" name="__codelineno-29-82"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-29-83"><a id="__codelineno-29-83" name="__codelineno-29-83"></a>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-29-84"><a id="__codelineno-29-84" name="__codelineno-29-84"></a>
</span><span id="__span-29-85"><a id="__codelineno-29-85" name="__codelineno-29-85"></a>    <span class="p">&lt;/</span><span class="nt">mat-card-content</span><span class="p">&gt;</span>
</span><span id="__span-29-86"><a id="__codelineno-29-86" name="__codelineno-29-86"></a>    <span class="p">&lt;</span><span class="nt">mat-card-actions</span><span class="p">&gt;</span>
</span><span id="__span-29-87"><a id="__codelineno-29-87" name="__codelineno-29-87"></a>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-raised-button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="p">&gt;</span>Registrieren<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-29-88"><a id="__codelineno-29-88" name="__codelineno-29-88"></a>    <span class="p">&lt;/</span><span class="nt">mat-card-actions</span><span class="p">&gt;</span>
</span><span id="__span-29-89"><a id="__codelineno-29-89" name="__codelineno-29-89"></a>  <span class="p">&lt;/</span><span class="nt">mat-card</span><span class="p">&gt;</span>
</span><span id="__span-29-90"><a id="__codelineno-29-90" name="__codelineno-29-90"></a><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-css highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span>
<span class="normal"><a href="#__codelineno-30-14">14</a></span>
<span class="normal"><a href="#__codelineno-30-15">15</a></span>
<span class="normal"><a href="#__codelineno-30-16">16</a></span>
<span class="normal"><a href="#__codelineno-30-17">17</a></span>
<span class="normal"><a href="#__codelineno-30-18">18</a></span>
<span class="normal"><a href="#__codelineno-30-19">19</a></span>
<span class="normal"><a href="#__codelineno-30-20">20</a></span>
<span class="normal"><a href="#__codelineno-30-21">21</a></span>
<span class="normal"><a href="#__codelineno-30-22">22</a></span>
<span class="normal"><a href="#__codelineno-30-23">23</a></span>
<span class="normal"><a href="#__codelineno-30-24">24</a></span>
<span class="normal"><a href="#__codelineno-30-25">25</a></span>
<span class="normal"><a href="#__codelineno-30-26">26</a></span>
<span class="normal"><a href="#__codelineno-30-27">27</a></span>
<span class="normal"><a href="#__codelineno-30-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="p">.</span><span class="nc">full-width</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="p">}</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4"></a>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="p">.</span><span class="nc">shipping-card</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="w">  </span><span class="k">min-width</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="w">  </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="w">  </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">%</span><span class="w"> </span><span class="mi">2</span><span class="kt">%</span><span class="w"> </span><span class="kc">auto</span><span class="w"> </span><span class="mi">2</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="p">}</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10"></a>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="p">.</span><span class="nc">mat-radio-button</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12"></a><span class="w">  </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">block</span><span class="p">;</span>
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="w">  </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14"></a><span class="p">}</span>
</span><span id="__span-30-15"><a id="__codelineno-30-15" name="__codelineno-30-15"></a>
</span><span id="__span-30-16"><a id="__codelineno-30-16" name="__codelineno-30-16"></a><span class="p">.</span><span class="nc">row</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-17"><a id="__codelineno-30-17" name="__codelineno-30-17"></a><span class="w">  </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
</span><span id="__span-30-18"><a id="__codelineno-30-18" name="__codelineno-30-18"></a><span class="w">  </span><span class="k">flex-direction</span><span class="p">:</span><span class="w"> </span><span class="kc">row</span><span class="p">;</span>
</span><span id="__span-30-19"><a id="__codelineno-30-19" name="__codelineno-30-19"></a><span class="p">}</span>
</span><span id="__span-30-20"><a id="__codelineno-30-20" name="__codelineno-30-20"></a>
</span><span id="__span-30-21"><a id="__codelineno-30-21" name="__codelineno-30-21"></a><span class="p">.</span><span class="nc">col</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-22"><a id="__codelineno-30-22" name="__codelineno-30-22"></a><span class="w">  </span><span class="k">flex</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-30-23"><a id="__codelineno-30-23" name="__codelineno-30-23"></a><span class="w">  </span><span class="k">margin-right</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-30-24"><a id="__codelineno-30-24" name="__codelineno-30-24"></a><span class="p">}</span>
</span><span id="__span-30-25"><a id="__codelineno-30-25" name="__codelineno-30-25"></a>
</span><span id="__span-30-26"><a id="__codelineno-30-26" name="__codelineno-30-26"></a><span class="p">.</span><span class="nc">col</span><span class="p">:</span><span class="nd">last-child</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-27"><a id="__codelineno-30-27" name="__codelineno-30-27"></a><span class="w">  </span><span class="k">margin-right</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-30-28"><a id="__codelineno-30-28" name="__codelineno-30-28"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Das ergibt folgende Ansicht:</p>
<p><img alt="users" src="../files/279_users.png" width="50%" /></p>
<h3 id="service-verwenden">Service verwenden<a class="headerlink" href="#service-verwenden" title="Permanent link">&para;</a></h3>
<p>In dem <code>auth</code>-Service binden wir das Backend an und nutzen bspw. die im Registrierungsformular eingegebenen Daten, um die Nutzerin zu registrieren. Im Gegensatz zu <a href="../fe-be-anbindung/#frontend-backend-anbindung">Frontend-Backend-Anbindung</a>, wo wir nur die <a href="">Fetch-API</a> zum Aufruf der Endpunkte verwendet haben, zeigen wir hier einmal die Verwendung des <a href="https://angular.dev/guide/http">HTTP Client</a>-Moduls. Wir verwenden hier aber das <em>HTTP-Client-Modul</em> mit der <em>Fetch-API</em> (und nicht mit <a href="https://developer.mozilla.org/de/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a>). Dazu binden wir das <a href="https://angular.dev/guide/http/setup#configuring-features-of-httpclient">HTTP-Client-Modul</a> wie folgt in die <code>app.config.ts</code> ein: </p>
<div class="tabbed-set tabbed-alternate" data-tabs="18:1"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="__tabbed_18_1">app.config.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-31-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-31-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-31-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-31-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-31-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-31-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-31-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-31-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-31-10">10</a></span>
<span class="normal"><a href="#__codelineno-31-11">11</a></span>
<span class="normal"><a href="#__codelineno-31-12">12</a></span>
<span class="normal"><a href="#__codelineno-31-13">13</a></span>
<span class="normal"><a href="#__codelineno-31-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ApplicationConfig</span><span class="p">,</span><span class="w"> </span><span class="nx">provideZoneChangeDetection</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">provideRouter</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3"></a>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">routes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./app.routes&#39;</span><span class="p">;</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">provideAnimationsAsync</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/platform-browser/animations/async&#39;</span><span class="p">;</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">provideHttpClient</span><span class="p">,</span><span class="w"> </span><span class="nx">withFetch</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
</span></span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7"></a>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">appConfig</span><span class="o">:</span><span class="w"> </span><span class="nx">ApplicationConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="w">  </span><span class="nx">providers</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="w">    </span><span class="nx">provideZoneChangeDetection</span><span class="p">({</span><span class="w"> </span><span class="nx">eventCoalescing</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}),</span><span class="w"> </span>
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11"></a><span class="w">    </span><span class="nx">provideRouter</span><span class="p">(</span><span class="nx">routes</span><span class="p">),</span><span class="w"> </span>
</span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12"></a><span class="w">    </span><span class="nx">provideAnimationsAsync</span><span class="p">(),</span><span class="w"> </span>
</span><span id="__span-31-13"><a id="__codelineno-31-13" name="__codelineno-31-13"></a><span class="hll"><span class="w">    </span><span class="nx">provideHttpClient</span><span class="p">(</span><span class="nx">withFetch</span><span class="p">(),)]</span>
</span></span><span id="__span-31-14"><a id="__codelineno-31-14" name="__codelineno-31-14"></a><span class="p">};</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Achtung!</p>
<p>Nicht vergessen, dass das Backend läuft!</p>
</div>
<p>Der Service könnte z.B. so aussehen:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="19:1"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><div class="tabbed-labels"><label for="__tabbed_19_1">auth.service.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span>
<span class="normal"><a href="#__codelineno-32-13">13</a></span>
<span class="normal"><a href="#__codelineno-32-14">14</a></span>
<span class="normal"><a href="#__codelineno-32-15">15</a></span>
<span class="normal"><a href="#__codelineno-32-16">16</a></span>
<span class="normal"><a href="#__codelineno-32-17">17</a></span>
<span class="normal"><a href="#__codelineno-32-18">18</a></span>
<span class="normal"><a href="#__codelineno-32-19">19</a></span>
<span class="normal"><a href="#__codelineno-32-20">20</a></span>
<span class="normal"><a href="#__codelineno-32-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">HttpClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Injectable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Observable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./user&#39;</span><span class="p">;</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5"></a>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">  </span><span class="nx">providedIn</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;root&#39;</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="p">})</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AuthService</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="w">  </span><span class="nx">baseUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://localhost:3000&#39;</span><span class="p">;</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11"></a>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span><span class="w"> </span><span class="nx">http</span><span class="o">:</span><span class="w"> </span><span class="nx">HttpClient</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13"></a>
</span><span id="__span-32-14"><a id="__codelineno-32-14" name="__codelineno-32-14"></a><span class="w">  </span><span class="nx">registerUser</span><span class="p">(</span><span class="nx">user</span><span class="o">:</span><span class="nx">User</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-15"><a id="__codelineno-32-15" name="__codelineno-32-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;/user/register&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">);</span>
</span><span id="__span-32-16"><a id="__codelineno-32-16" name="__codelineno-32-16"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-32-17"><a id="__codelineno-32-17" name="__codelineno-32-17"></a>
</span><span id="__span-32-18"><a id="__codelineno-32-18" name="__codelineno-32-18"></a><span class="w">  </span><span class="nx">loginUser</span><span class="p">(</span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"> </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;})</span><span class="o">:</span><span class="w"> </span><span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-19"><a id="__codelineno-32-19" name="__codelineno-32-19"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;/user/login&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">);</span>
</span><span id="__span-32-20"><a id="__codelineno-32-20" name="__codelineno-32-20"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-32-21"><a id="__codelineno-32-21" name="__codelineno-32-21"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>und die <code>submit()</code>-Funktion in der <code>register.component.ts</code> könnte zunächst wie folgt erweitert werden (in der Klasse noch <code>private auth = inject(AuthService)</code> hinzufügen und den Service importieren <code>import { AuthService } from '../shared/auth.service';</code>):</p>
<div class="tabbed-set tabbed-alternate" data-tabs="20:1"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><div class="tabbed-labels"><label for="__tabbed_20_1">aus register.component.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-56">56</a></span>
<span class="normal"><a href="#__codelineno-33-57">57</a></span>
<span class="normal"><a href="#__codelineno-33-58">58</a></span>
<span class="normal"><a href="#__codelineno-33-59">59</a></span>
<span class="normal"><a href="#__codelineno-33-60">60</a></span>
<span class="normal"><a href="#__codelineno-33-61">61</a></span>
<span class="normal"><a href="#__codelineno-33-62">62</a></span>
<span class="normal"><a href="#__codelineno-33-63">63</a></span>
<span class="normal"><a href="#__codelineno-33-64">64</a></span>
<span class="normal"><a href="#__codelineno-33-65">65</a></span>
<span class="normal"><a href="#__codelineno-33-66">66</a></span>
<span class="normal"><a href="#__codelineno-33-67">67</a></span>
<span class="normal"><a href="#__codelineno-33-68">68</a></span>
<span class="normal"><a href="#__codelineno-33-69">69</a></span>
<span class="normal"><a href="#__codelineno-33-70">70</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-33-56"><a id="__codelineno-33-56" name="__codelineno-33-56"></a><span class="w">  </span><span class="nx">onSubmit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-57"><a id="__codelineno-33-57" name="__codelineno-33-57"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-33-58"><a id="__codelineno-33-58" name="__codelineno-33-58"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-59"><a id="__codelineno-33-59" name="__codelineno-33-59"></a><span class="w">      </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">username</span><span class="o">!</span><span class="p">,</span>
</span><span id="__span-33-60"><a id="__codelineno-33-60" name="__codelineno-33-60"></a><span class="w">      </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">password</span><span class="o">!</span><span class="p">,</span>
</span><span id="__span-33-61"><a id="__codelineno-33-61" name="__codelineno-33-61"></a><span class="w">      </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">email</span><span class="o">!</span><span class="p">,</span>
</span><span id="__span-33-62"><a id="__codelineno-33-62" name="__codelineno-33-62"></a><span class="w">      </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">role</span><span class="o">!</span>
</span><span id="__span-33-63"><a id="__codelineno-33-63" name="__codelineno-33-63"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-33-64"><a id="__codelineno-33-64" name="__codelineno-33-64"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span>
</span><span id="__span-33-65"><a id="__codelineno-33-65" name="__codelineno-33-65"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">registerUser</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">({</span>
</span><span id="__span-33-66"><a id="__codelineno-33-66" name="__codelineno-33-66"></a><span class="w">        </span><span class="nx">next</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">),</span>
</span><span id="__span-33-67"><a id="__codelineno-33-67" name="__codelineno-33-67"></a><span class="w">        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;HttpErrorResponse : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">),</span>
</span><span id="__span-33-68"><a id="__codelineno-33-68" name="__codelineno-33-68"></a><span class="w">        </span><span class="nx">complete</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;register completed&#39;</span><span class="p">)</span>
</span><span id="__span-33-69"><a id="__codelineno-33-69" name="__codelineno-33-69"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-33-70"><a id="__codelineno-33-70" name="__codelineno-33-70"></a><span class="w">  </span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wenn nun das Registrierungsformular vollständig ausgefüllt wird und weder <code>username</code> noch <code>email</code> bereits in der Datenbank existieren, wird ein neuer Datensatz in der Datenbank angelegt. Die neue Nutzerin ist registriert. Wenn jedoch der <code>username</code> und/oder die <code>email</code> bereits existier(t/en), wird nicht die <code>next</code>-Eigenschaft des Observers aufgerufen, sondern die <code>error</code>-Eigenschaft. Das heißt, entweder gibt es unter <code>next</code> eine <code>response</code>, nämlich den neu angelegten <code>user</code> oder es gibt unter <code>error</code> ein Fehlerobjekt, welches selbst eine <code>error</code>-Eigenschaft hat (mit <code>{ message: 'E-Mail test@test.de and/or username user1 already exists'}</code> - <code>test@test.de</code> und <code>user1</code> hier Beispiele) und dessen Status <code>401</code> ist. Die Eigenschaften <code>error</code>, <code>ok</code>, <code>status</code> (und weitere) können aus <code>err</code> ausgelesen werden. </p>
<p>Beachten Sie, dass es im Formular möglich ist, zwischen der Rolle <code>admin</code> und <code>user</code> zu wählen. Das ist aber nur zu Demonstrationszwecken. Der Endpunkt <code>POST /user/register</code> im Backend ignoriert die <code>role</code>-Eigenschaft und registriert die neue Nutzerin stets als <code>user</code>. </p>
<h3 id="validierungen">Validierungen<a class="headerlink" href="#validierungen" title="Permanent link">&para;</a></h3>
<p>Mit den zusätzlichen Validierungen sehen <code>register.component.html</code> und <code>register.component.ts</code> wie folgt aus:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="21:2"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><input id="__tabbed_21_2" name="__tabbed_21" type="radio" /><div class="tabbed-labels"><label for="__tabbed_21_1">register.component.html</label><label for="__tabbed_21_2">register.component.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-html highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">  1</a></span>
<span class="normal"><a href="#__codelineno-34-2">  2</a></span>
<span class="normal"><a href="#__codelineno-34-3">  3</a></span>
<span class="normal"><a href="#__codelineno-34-4">  4</a></span>
<span class="normal"><a href="#__codelineno-34-5">  5</a></span>
<span class="normal"><a href="#__codelineno-34-6">  6</a></span>
<span class="normal"><a href="#__codelineno-34-7">  7</a></span>
<span class="normal"><a href="#__codelineno-34-8">  8</a></span>
<span class="normal"><a href="#__codelineno-34-9">  9</a></span>
<span class="normal"><a href="#__codelineno-34-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-34-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-34-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-34-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-34-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-34-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-34-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-34-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-34-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-34-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-34-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-34-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-34-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-34-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-34-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-34-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-34-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-34-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-34-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-34-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-34-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-34-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-34-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-34-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-34-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-34-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-34-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-34-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-34-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-34-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-34-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-34-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-34-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-34-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-34-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-34-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-34-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-34-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-34-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-34-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-34-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-34-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-34-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-34-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-34-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-34-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-34-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-34-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-34-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-34-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-34-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-34-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-34-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-34-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-34-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-34-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-34-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-34-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-34-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-34-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-34-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-34-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-34-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-34-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-34-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-34-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-34-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-34-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-34-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-34-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-34-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-34-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-34-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-34-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-34-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-34-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-34-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-34-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-34-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-34-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-34-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-34-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-34-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-34-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-34-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-34-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-34-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-34-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-34-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-34-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-34-100">100</a></span>
<span class="normal"><a href="#__codelineno-34-101">101</a></span>
<span class="normal"><a href="#__codelineno-34-102">102</a></span>
<span class="normal"><a href="#__codelineno-34-103">103</a></span>
<span class="normal"><a href="#__codelineno-34-104">104</a></span>
<span class="normal"><a href="#__codelineno-34-105">105</a></span>
<span class="normal"><a href="#__codelineno-34-106">106</a></span>
<span class="normal"><a href="#__codelineno-34-107">107</a></span>
<span class="normal"><a href="#__codelineno-34-108">108</a></span>
<span class="normal"><a href="#__codelineno-34-109">109</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="p">&lt;</span><span class="nt">form</span> <span class="err">[</span><span class="na">formGroup</span><span class="err">]=&quot;</span><span class="na">registerForm</span><span class="err">&quot;</span> <span class="na">novalidate</span> <span class="err">(</span><span class="na">ngSubmit</span><span class="err">)=&quot;</span><span class="na">onSubmit</span><span class="err">()&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2"></a>  <span class="p">&lt;</span><span class="nt">mat-card</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;shipping-card&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3"></a>    <span class="p">&lt;</span><span class="nt">mat-card-header</span><span class="p">&gt;</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4"></a>      <span class="p">&lt;</span><span class="nt">mat-card-title</span><span class="p">&gt;</span>Registrierung<span class="p">&lt;/</span><span class="nt">mat-card-title</span><span class="p">&gt;</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5"></a>    <span class="p">&lt;/</span><span class="nt">mat-card-header</span><span class="p">&gt;</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6"></a>    <span class="p">&lt;</span><span class="nt">mat-card-content</span><span class="p">&gt;</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7"></a>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8"></a>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10"></a>          <span class="p">&lt;</span><span class="nt">mat-form-field</span> <span class="na">hintLabel</span><span class="o">=</span><span class="s">&quot;Einloggen mit Nutzername und Passwort&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11"></a>            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Nutzername&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;username&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12"></a>            <span class="p">&lt;</span><span class="nt">mat-icon</span> <span class="na">matSuffix</span> <span class="p">&gt;</span>person_add<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13"></a><span class="hll">            @if(registerForm.controls[&#39;username&#39;].hasError(&#39;required&#39;)) {
</span></span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14"></a><span class="hll">              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15"></a><span class="hll">                Nutzername <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>erforderlich<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
</span></span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16"></a><span class="hll">              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17"></a><span class="hll">            }
</span></span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18"></a>          <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20"></a>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-34-21"><a id="__codelineno-34-21" name="__codelineno-34-21"></a>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-22"><a id="__codelineno-34-22" name="__codelineno-34-22"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-23"><a id="__codelineno-34-23" name="__codelineno-34-23"></a>          <span class="p">&lt;</span><span class="nt">mat-form-field</span> <span class="na">hintLabel</span><span class="o">=</span><span class="s">&quot;Mind. 8 Zeichen, mind. 1 Groß- und Kleinbuchstaben, Ziffer und Sonderzeichen&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-24"><a id="__codelineno-34-24" name="__codelineno-34-24"></a>            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">matInput</span> <span class="err">[</span><span class="na">type</span><span class="err">]=&quot;</span><span class="na">hide</span> <span class="err">?</span> <span class="err">&#39;</span><span class="na">password</span><span class="err">&#39;</span> <span class="na">:</span> <span class="err">&#39;</span><span class="na">text</span><span class="err">&#39;&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Passwort&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;password&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-25"><a id="__codelineno-34-25" name="__codelineno-34-25"></a>            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-icon-button</span> <span class="na">matSuffix</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">hide </span><span class="o">=</span> <span class="s">!hide&quot;</span> <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">aria-label</span><span class="err">]=&quot;&#39;</span><span class="na">Hide</span> <span class="na">password</span><span class="err">&#39;&quot;</span> <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">aria-pressed</span><span class="err">]=&quot;</span><span class="na">hide</span><span class="err">&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-26"><a id="__codelineno-34-26" name="__codelineno-34-26"></a>              <span class="p">&lt;</span><span class="nt">mat-icon</span><span class="p">&gt;</span>{{hide ? &#39;visibility_off&#39; : &#39;visibility&#39;}}<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-34-27"><a id="__codelineno-34-27" name="__codelineno-34-27"></a>            <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-34-28"><a id="__codelineno-34-28" name="__codelineno-34-28"></a><span class="hll">            @if(registerForm.controls[&#39;password&#39;].hasError(&#39;required&#39;)) {
</span></span><span id="__span-34-29"><a id="__codelineno-34-29" name="__codelineno-34-29"></a><span class="hll">              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-30"><a id="__codelineno-34-30" name="__codelineno-34-30"></a><span class="hll">                Passwort <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>erforderlich<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
</span></span><span id="__span-34-31"><a id="__codelineno-34-31" name="__codelineno-34-31"></a><span class="hll">              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-32"><a id="__codelineno-34-32" name="__codelineno-34-32"></a><span class="hll">            } @else if(registerForm.controls[&#39;password&#39;].hasError(&#39;minlength&#39;)) {
</span></span><span id="__span-34-33"><a id="__codelineno-34-33" name="__codelineno-34-33"></a><span class="hll">              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-34"><a id="__codelineno-34-34" name="__codelineno-34-34"></a><span class="hll">                Passwort muss mind. <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>8<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> Zeichen enthalten!
</span></span><span id="__span-34-35"><a id="__codelineno-34-35" name="__codelineno-34-35"></a><span class="hll">              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-36"><a id="__codelineno-34-36" name="__codelineno-34-36"></a><span class="hll">            }
</span></span><span id="__span-34-37"><a id="__codelineno-34-37" name="__codelineno-34-37"></a>          <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
</span><span id="__span-34-38"><a id="__codelineno-34-38" name="__codelineno-34-38"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-34-39"><a id="__codelineno-34-39" name="__codelineno-34-39"></a>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-34-40"><a id="__codelineno-34-40" name="__codelineno-34-40"></a>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-41"><a id="__codelineno-34-41" name="__codelineno-34-41"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-42"><a id="__codelineno-34-42" name="__codelineno-34-42"></a>          <span class="p">&lt;</span><span class="nt">mat-form-field</span> <span class="na">hintLabel</span><span class="o">=</span><span class="s">&quot;Dasselbe Passwort wie oben&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-43"><a id="__codelineno-34-43" name="__codelineno-34-43"></a>            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">matInput</span>  
</span><span id="__span-34-44"><a id="__codelineno-34-44" name="__codelineno-34-44"></a>            <span class="err">[</span><span class="na">class</span><span class="err">.</span><span class="na">ng-invalid</span><span class="err">]=&quot;</span><span class="na">differentPassword</span><span class="err">()&quot;</span> 
</span><span id="__span-34-45"><a id="__codelineno-34-45" name="__codelineno-34-45"></a>            <span class="err">[</span><span class="na">class</span><span class="err">.</span><span class="na">ng-valid</span><span class="err">]=&quot;!</span><span class="na">differentPassword</span><span class="err">()&quot;</span>
</span><span id="__span-34-46"><a id="__codelineno-34-46" name="__codelineno-34-46"></a>            <span class="err">[</span><span class="na">type</span><span class="err">]=&quot;</span><span class="na">hide2</span> <span class="err">?</span> <span class="err">&#39;</span><span class="na">password</span><span class="err">&#39;</span> <span class="na">:</span> <span class="err">&#39;</span><span class="na">text</span><span class="err">&#39;&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Passwort wiederholen&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;password2&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-47"><a id="__codelineno-34-47" name="__codelineno-34-47"></a>            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-icon-button</span> <span class="na">matSuffix</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">hide2 </span><span class="o">=</span> <span class="s">!hide2&quot;</span> <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">aria-label</span><span class="err">]=&quot;&#39;</span><span class="na">Hide</span> <span class="na">password</span><span class="err">&#39;&quot;</span> <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">aria-pressed</span><span class="err">]=&quot;</span><span class="na">hide</span><span class="err">&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-48"><a id="__codelineno-34-48" name="__codelineno-34-48"></a>              <span class="p">&lt;</span><span class="nt">mat-icon</span><span class="p">&gt;</span>{{hide2 ? &#39;visibility_off&#39; : &#39;visibility&#39;}}<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-34-49"><a id="__codelineno-34-49" name="__codelineno-34-49"></a>            <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-34-50"><a id="__codelineno-34-50" name="__codelineno-34-50"></a><span class="hll">            @if(registerForm.controls[&#39;password2&#39;].hasError(&#39;required&#39;)) {
</span></span><span id="__span-34-51"><a id="__codelineno-34-51" name="__codelineno-34-51"></a><span class="hll">              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-52"><a id="__codelineno-34-52" name="__codelineno-34-52"></a><span class="hll">                Wiederholung Passwort <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>erforderlich<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
</span></span><span id="__span-34-53"><a id="__codelineno-34-53" name="__codelineno-34-53"></a><span class="hll">              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-54"><a id="__codelineno-34-54" name="__codelineno-34-54"></a><span class="hll">            } @else if(registerForm.controls[&#39;password2&#39;].hasError(&#39;minlength&#39;)) {
</span></span><span id="__span-34-55"><a id="__codelineno-34-55" name="__codelineno-34-55"></a><span class="hll">              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-56"><a id="__codelineno-34-56" name="__codelineno-34-56"></a><span class="hll">                Passwort muss mind. <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>8<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> Zeichen enthalten!
</span></span><span id="__span-34-57"><a id="__codelineno-34-57" name="__codelineno-34-57"></a><span class="hll">              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-58"><a id="__codelineno-34-58" name="__codelineno-34-58"></a><span class="hll">            } @else if(differentPassword()) {
</span></span><span id="__span-34-59"><a id="__codelineno-34-59" name="__codelineno-34-59"></a><span class="hll">              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-60"><a id="__codelineno-34-60" name="__codelineno-34-60"></a><span class="hll">                Passwörter nicht identisch!
</span></span><span id="__span-34-61"><a id="__codelineno-34-61" name="__codelineno-34-61"></a><span class="hll">              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-62"><a id="__codelineno-34-62" name="__codelineno-34-62"></a><span class="hll">            }
</span></span><span id="__span-34-63"><a id="__codelineno-34-63" name="__codelineno-34-63"></a>          <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
</span><span id="__span-34-64"><a id="__codelineno-34-64" name="__codelineno-34-64"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-34-65"><a id="__codelineno-34-65" name="__codelineno-34-65"></a>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-34-66"><a id="__codelineno-34-66" name="__codelineno-34-66"></a>
</span><span id="__span-34-67"><a id="__codelineno-34-67" name="__codelineno-34-67"></a>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-68"><a id="__codelineno-34-68" name="__codelineno-34-68"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-69"><a id="__codelineno-34-69" name="__codelineno-34-69"></a>          <span class="p">&lt;</span><span class="nt">mat-form-field</span> <span class="na">hintLabel</span><span class="o">=</span><span class="s">&quot;E-Mail-Adresse zum Kontaktieren verwendet&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-70"><a id="__codelineno-34-70" name="__codelineno-34-70"></a>            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;E-Mail&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;email&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-71"><a id="__codelineno-34-71" name="__codelineno-34-71"></a>            <span class="p">&lt;</span><span class="nt">mat-icon</span> <span class="na">matSuffix</span><span class="p">&gt;</span>email<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-34-72"><a id="__codelineno-34-72" name="__codelineno-34-72"></a><span class="hll">            @if(registerForm.controls[&#39;email&#39;].hasError(&#39;required&#39;)) {
</span></span><span id="__span-34-73"><a id="__codelineno-34-73" name="__codelineno-34-73"></a><span class="hll">              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-74"><a id="__codelineno-34-74" name="__codelineno-34-74"></a><span class="hll">                E-Mail-Adresse <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>erforderlich<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
</span></span><span id="__span-34-75"><a id="__codelineno-34-75" name="__codelineno-34-75"></a><span class="hll">              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-76"><a id="__codelineno-34-76" name="__codelineno-34-76"></a><span class="hll">            } @else if(registerForm.controls[&#39;email&#39;].hasError(&#39;email&#39;)) {
</span></span><span id="__span-34-77"><a id="__codelineno-34-77" name="__codelineno-34-77"></a><span class="hll">              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-78"><a id="__codelineno-34-78" name="__codelineno-34-78"></a><span class="hll">                keine <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>gültige<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> E-Mail-Adresse 
</span></span><span id="__span-34-79"><a id="__codelineno-34-79" name="__codelineno-34-79"></a><span class="hll">              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-80"><a id="__codelineno-34-80" name="__codelineno-34-80"></a><span class="hll">            }
</span></span><span id="__span-34-81"><a id="__codelineno-34-81" name="__codelineno-34-81"></a>          <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
</span><span id="__span-34-82"><a id="__codelineno-34-82" name="__codelineno-34-82"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-34-83"><a id="__codelineno-34-83" name="__codelineno-34-83"></a>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-34-84"><a id="__codelineno-34-84" name="__codelineno-34-84"></a>      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-85"><a id="__codelineno-34-85" name="__codelineno-34-85"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-86"><a id="__codelineno-34-86" name="__codelineno-34-86"></a>          <span class="p">&lt;</span><span class="nt">mat-form-field</span> <span class="na">hintLabel</span><span class="o">=</span><span class="s">&quot;Wählen Sie eine der beiden Rollen aus&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-87"><a id="__codelineno-34-87" name="__codelineno-34-87"></a>            <span class="p">&lt;</span><span class="nt">mat-select</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Rolle&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;role&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-88"><a id="__codelineno-34-88" name="__codelineno-34-88"></a>              @for(role of roles; track $index) {
</span><span id="__span-34-89"><a id="__codelineno-34-89" name="__codelineno-34-89"></a>                <span class="p">&lt;</span><span class="nt">mat-option</span> <span class="err">[</span><span class="na">value</span><span class="err">]=&quot;</span><span class="na">role</span><span class="err">&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-90"><a id="__codelineno-34-90" name="__codelineno-34-90"></a>                  {{ role }}
</span><span id="__span-34-91"><a id="__codelineno-34-91" name="__codelineno-34-91"></a>                <span class="p">&lt;/</span><span class="nt">mat-option</span><span class="p">&gt;</span>
</span><span id="__span-34-92"><a id="__codelineno-34-92" name="__codelineno-34-92"></a>              }
</span><span id="__span-34-93"><a id="__codelineno-34-93" name="__codelineno-34-93"></a>            <span class="p">&lt;/</span><span class="nt">mat-select</span><span class="p">&gt;</span>
</span><span id="__span-34-94"><a id="__codelineno-34-94" name="__codelineno-34-94"></a>            <span class="p">&lt;</span><span class="nt">mat-icon</span> <span class="na">matSuffix</span><span class="p">&gt;</span>group<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-34-95"><a id="__codelineno-34-95" name="__codelineno-34-95"></a><span class="hll">            @if(registerForm.controls[&#39;role&#39;].hasError(&#39;required&#39;)) {
</span></span><span id="__span-34-96"><a id="__codelineno-34-96" name="__codelineno-34-96"></a><span class="hll">              <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-97"><a id="__codelineno-34-97" name="__codelineno-34-97"></a><span class="hll">                Rolle <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>erforderlich<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
</span></span><span id="__span-34-98"><a id="__codelineno-34-98" name="__codelineno-34-98"></a><span class="hll">              <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span></span><span id="__span-34-99"><a id="__codelineno-34-99" name="__codelineno-34-99"></a><span class="hll">            }
</span></span><span id="__span-34-100"><a id="__codelineno-34-100" name="__codelineno-34-100"></a>          <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
</span><span id="__span-34-101"><a id="__codelineno-34-101" name="__codelineno-34-101"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-34-102"><a id="__codelineno-34-102" name="__codelineno-34-102"></a>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-34-103"><a id="__codelineno-34-103" name="__codelineno-34-103"></a>
</span><span id="__span-34-104"><a id="__codelineno-34-104" name="__codelineno-34-104"></a>    <span class="p">&lt;/</span><span class="nt">mat-card-content</span><span class="p">&gt;</span>
</span><span id="__span-34-105"><a id="__codelineno-34-105" name="__codelineno-34-105"></a>    <span class="p">&lt;</span><span class="nt">mat-card-actions</span><span class="p">&gt;</span>
</span><span id="__span-34-106"><a id="__codelineno-34-106" name="__codelineno-34-106"></a>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-raised-button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="p">&gt;</span>Registrieren<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-34-107"><a id="__codelineno-34-107" name="__codelineno-34-107"></a>    <span class="p">&lt;/</span><span class="nt">mat-card-actions</span><span class="p">&gt;</span>
</span><span id="__span-34-108"><a id="__codelineno-34-108" name="__codelineno-34-108"></a>  <span class="p">&lt;/</span><span class="nt">mat-card</span><span class="p">&gt;</span>
</span><span id="__span-34-109"><a id="__codelineno-34-109" name="__codelineno-34-109"></a><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span>
<span class="normal"><a href="#__codelineno-35-15">15</a></span>
<span class="normal"><a href="#__codelineno-35-16">16</a></span>
<span class="normal"><a href="#__codelineno-35-17">17</a></span>
<span class="normal"><a href="#__codelineno-35-18">18</a></span>
<span class="normal"><a href="#__codelineno-35-19">19</a></span>
<span class="normal"><a href="#__codelineno-35-20">20</a></span>
<span class="normal"><a href="#__codelineno-35-21">21</a></span>
<span class="normal"><a href="#__codelineno-35-22">22</a></span>
<span class="normal"><a href="#__codelineno-35-23">23</a></span>
<span class="normal"><a href="#__codelineno-35-24">24</a></span>
<span class="normal"><a href="#__codelineno-35-25">25</a></span>
<span class="normal"><a href="#__codelineno-35-26">26</a></span>
<span class="normal"><a href="#__codelineno-35-27">27</a></span>
<span class="normal"><a href="#__codelineno-35-28">28</a></span>
<span class="normal"><a href="#__codelineno-35-29">29</a></span>
<span class="normal"><a href="#__codelineno-35-30">30</a></span>
<span class="normal"><a href="#__codelineno-35-31">31</a></span>
<span class="normal"><a href="#__codelineno-35-32">32</a></span>
<span class="normal"><a href="#__codelineno-35-33">33</a></span>
<span class="normal"><a href="#__codelineno-35-34">34</a></span>
<span class="normal"><a href="#__codelineno-35-35">35</a></span>
<span class="normal"><a href="#__codelineno-35-36">36</a></span>
<span class="normal"><a href="#__codelineno-35-37">37</a></span>
<span class="normal"><a href="#__codelineno-35-38">38</a></span>
<span class="normal"><a href="#__codelineno-35-39">39</a></span>
<span class="normal"><a href="#__codelineno-35-40">40</a></span>
<span class="normal"><a href="#__codelineno-35-41">41</a></span>
<span class="normal"><a href="#__codelineno-35-42">42</a></span>
<span class="normal"><a href="#__codelineno-35-43">43</a></span>
<span class="normal"><a href="#__codelineno-35-44">44</a></span>
<span class="normal"><a href="#__codelineno-35-45">45</a></span>
<span class="normal"><a href="#__codelineno-35-46">46</a></span>
<span class="normal"><a href="#__codelineno-35-47">47</a></span>
<span class="normal"><a href="#__codelineno-35-48">48</a></span>
<span class="normal"><a href="#__codelineno-35-49">49</a></span>
<span class="normal"><a href="#__codelineno-35-50">50</a></span>
<span class="normal"><a href="#__codelineno-35-51">51</a></span>
<span class="normal"><a href="#__codelineno-35-52">52</a></span>
<span class="normal"><a href="#__codelineno-35-53">53</a></span>
<span class="normal"><a href="#__codelineno-35-54">54</a></span>
<span class="normal"><a href="#__codelineno-35-55">55</a></span>
<span class="normal"><a href="#__codelineno-35-56">56</a></span>
<span class="normal"><a href="#__codelineno-35-57">57</a></span>
<span class="normal"><a href="#__codelineno-35-58">58</a></span>
<span class="normal"><a href="#__codelineno-35-59">59</a></span>
<span class="normal"><a href="#__codelineno-35-60">60</a></span>
<span class="normal"><a href="#__codelineno-35-61">61</a></span>
<span class="normal"><a href="#__codelineno-35-62">62</a></span>
<span class="normal"><a href="#__codelineno-35-63">63</a></span>
<span class="normal"><a href="#__codelineno-35-64">64</a></span>
<span class="normal"><a href="#__codelineno-35-65">65</a></span>
<span class="normal"><a href="#__codelineno-35-66">66</a></span>
<span class="normal"><a href="#__codelineno-35-67">67</a></span>
<span class="normal"><a href="#__codelineno-35-68">68</a></span>
<span class="normal"><a href="#__codelineno-35-69">69</a></span>
<span class="normal"><a href="#__codelineno-35-70">70</a></span>
<span class="normal"><a href="#__codelineno-35-71">71</a></span>
<span class="normal"><a href="#__codelineno-35-72">72</a></span>
<span class="normal"><a href="#__codelineno-35-73">73</a></span>
<span class="normal"><a href="#__codelineno-35-74">74</a></span>
<span class="normal"><a href="#__codelineno-35-75">75</a></span>
<span class="normal"><a href="#__codelineno-35-76">76</a></span>
<span class="normal"><a href="#__codelineno-35-77">77</a></span>
<span class="normal"><a href="#__codelineno-35-78">78</a></span>
<span class="normal"><a href="#__codelineno-35-79">79</a></span>
<span class="normal"><a href="#__codelineno-35-80">80</a></span>
<span class="normal"><a href="#__codelineno-35-81">81</a></span>
<span class="normal"><a href="#__codelineno-35-82">82</a></span>
<span class="normal"><a href="#__codelineno-35-83">83</a></span>
<span class="normal"><a href="#__codelineno-35-84">84</a></span>
<span class="normal"><a href="#__codelineno-35-85">85</a></span>
<span class="normal"><a href="#__codelineno-35-86">86</a></span>
<span class="normal"><a href="#__codelineno-35-87">87</a></span>
<span class="normal"><a href="#__codelineno-35-88">88</a></span>
<span class="normal"><a href="#__codelineno-35-89">89</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">inject</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2"></a>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ReactiveFormsModule</span><span class="p">,</span><span class="w"> </span><span class="nx">FormBuilder</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">,</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">,</span><span class="w"> </span><span class="nx">FormGroup</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatInputModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/input&#39;</span><span class="p">;</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatButtonModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/button&#39;</span><span class="p">;</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatSelectModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/select&#39;</span><span class="p">;</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatRadioModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/radio&#39;</span><span class="p">;</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatCardModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/card&#39;</span><span class="p">;</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/user&#39;</span><span class="p">;</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatIconModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/icon&#39;</span><span class="p">;</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AuthService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/auth.service&#39;</span><span class="p">;</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12"></a>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13"></a>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14"></a><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15"></a><span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-register&#39;</span><span class="p">,</span>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16"></a><span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./register.component.html&#39;</span><span class="p">,</span>
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17"></a><span class="w">  </span><span class="nx">styleUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./register.component.css&#39;</span><span class="p">,</span>
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18"></a><span class="w">  </span><span class="nx">standalone</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19"></a><span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20"></a><span class="w">    </span><span class="nx">MatIconModule</span><span class="p">,</span>
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21"></a><span class="w">    </span><span class="nx">MatInputModule</span><span class="p">,</span>
</span><span id="__span-35-22"><a id="__codelineno-35-22" name="__codelineno-35-22"></a><span class="w">    </span><span class="nx">MatButtonModule</span><span class="p">,</span>
</span><span id="__span-35-23"><a id="__codelineno-35-23" name="__codelineno-35-23"></a><span class="w">    </span><span class="nx">MatSelectModule</span><span class="p">,</span>
</span><span id="__span-35-24"><a id="__codelineno-35-24" name="__codelineno-35-24"></a><span class="w">    </span><span class="nx">MatRadioModule</span><span class="p">,</span>
</span><span id="__span-35-25"><a id="__codelineno-35-25" name="__codelineno-35-25"></a><span class="w">    </span><span class="nx">MatCardModule</span><span class="p">,</span>
</span><span id="__span-35-26"><a id="__codelineno-35-26" name="__codelineno-35-26"></a><span class="w">    </span><span class="nx">ReactiveFormsModule</span>
</span><span id="__span-35-27"><a id="__codelineno-35-27" name="__codelineno-35-27"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-35-28"><a id="__codelineno-35-28" name="__codelineno-35-28"></a><span class="p">})</span>
</span><span id="__span-35-29"><a id="__codelineno-35-29" name="__codelineno-35-29"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">RegisterComponent</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-30"><a id="__codelineno-35-30" name="__codelineno-35-30"></a><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">auth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">AuthService</span><span class="p">)</span>
</span><span id="__span-35-31"><a id="__codelineno-35-31" name="__codelineno-35-31"></a><span class="w">  </span><span class="nx">registerForm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormGroup</span><span class="p">({</span>
</span><span id="__span-35-32"><a id="__codelineno-35-32" name="__codelineno-35-32"></a><span class="w">    </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">),</span>
</span><span id="__span-35-33"><a id="__codelineno-35-33" name="__codelineno-35-33"></a><span class="w">    </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">minLength</span><span class="p">(</span><span class="mf">8</span><span class="p">)]),</span>
</span><span id="__span-35-34"><a id="__codelineno-35-34" name="__codelineno-35-34"></a><span class="w">    </span><span class="nx">password2</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">minLength</span><span class="p">(</span><span class="mf">8</span><span class="p">)]),</span>
</span><span id="__span-35-35"><a id="__codelineno-35-35" name="__codelineno-35-35"></a><span class="w">    </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">email</span><span class="p">]),</span>
</span><span id="__span-35-36"><a id="__codelineno-35-36" name="__codelineno-35-36"></a><span class="w">    </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">)</span>
</span><span id="__span-35-37"><a id="__codelineno-35-37" name="__codelineno-35-37"></a><span class="w">  </span><span class="p">});</span>
</span><span id="__span-35-38"><a id="__codelineno-35-38" name="__codelineno-35-38"></a><span class="w">  </span><span class="nx">roles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;admin&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;user&quot;</span><span class="p">];</span>
</span><span id="__span-35-39"><a id="__codelineno-35-39" name="__codelineno-35-39"></a><span class="w">  </span><span class="nx">hide</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-35-40"><a id="__codelineno-35-40" name="__codelineno-35-40"></a><span class="w">  </span><span class="nx">hide2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-35-41"><a id="__codelineno-35-41" name="__codelineno-35-41"></a><span class="w">  </span><span class="nx">user</span><span class="o">!:</span><span class="w"> </span><span class="nx">User</span><span class="p">;</span>
</span><span id="__span-35-42"><a id="__codelineno-35-42" name="__codelineno-35-42"></a>
</span><span id="__span-35-43"><a id="__codelineno-35-43" name="__codelineno-35-43"></a><span class="hll"><span class="w">  </span><span class="nx">valid</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-35-44"><a id="__codelineno-35-44" name="__codelineno-35-44"></a><span class="hll"><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
</span></span><span id="__span-35-45"><a id="__codelineno-35-45" name="__codelineno-35-45"></a><span class="hll"><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;required&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span></span><span id="__span-35-46"><a id="__codelineno-35-46" name="__codelineno-35-46"></a><span class="hll"><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;required&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span></span><span id="__span-35-47"><a id="__codelineno-35-47" name="__codelineno-35-47"></a><span class="hll"><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;minlength&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span></span><span id="__span-35-48"><a id="__codelineno-35-48" name="__codelineno-35-48"></a><span class="hll"><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;password2&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;required&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span></span><span id="__span-35-49"><a id="__codelineno-35-49" name="__codelineno-35-49"></a><span class="hll"><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;password2&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;minlength&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span></span><span id="__span-35-50"><a id="__codelineno-35-50" name="__codelineno-35-50"></a><span class="hll"><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;required&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span></span><span id="__span-35-51"><a id="__codelineno-35-51" name="__codelineno-35-51"></a><span class="hll"><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span></span><span id="__span-35-52"><a id="__codelineno-35-52" name="__codelineno-35-52"></a><span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">password</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">password2</span><span class="p">;</span>
</span></span><span id="__span-35-53"><a id="__codelineno-35-53" name="__codelineno-35-53"></a><span class="hll"><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;valid : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">check</span><span class="p">)</span>
</span></span><span id="__span-35-54"><a id="__codelineno-35-54" name="__codelineno-35-54"></a><span class="hll"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">check</span><span class="p">;</span>
</span></span><span id="__span-35-55"><a id="__codelineno-35-55" name="__codelineno-35-55"></a><span class="hll"><span class="w">  </span><span class="p">}</span>
</span></span><span id="__span-35-56"><a id="__codelineno-35-56" name="__codelineno-35-56"></a>
</span><span id="__span-35-57"><a id="__codelineno-35-57" name="__codelineno-35-57"></a><span class="hll"><span class="w">  </span><span class="nx">differentPassword</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-35-58"><a id="__codelineno-35-58" name="__codelineno-35-58"></a><span class="hll"><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">dirty</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">password</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">password2</span><span class="p">;</span>
</span></span><span id="__span-35-59"><a id="__codelineno-35-59" name="__codelineno-35-59"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">check</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-35-60"><a id="__codelineno-35-60" name="__codelineno-35-60"></a><span class="hll"><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">.</span><span class="nx">password2</span><span class="p">.</span><span class="nx">setErrors</span><span class="p">({</span><span class="s1">&#39;incorrect&#39;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">});</span>
</span></span><span id="__span-35-61"><a id="__codelineno-35-61" name="__codelineno-35-61"></a><span class="hll"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-35-62"><a id="__codelineno-35-62" name="__codelineno-35-62"></a><span class="hll"><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">.</span><span class="nx">password2</span><span class="p">.</span><span class="nx">setErrors</span><span class="p">({</span><span class="s1">&#39;incorrect&#39;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">});</span>
</span></span><span id="__span-35-63"><a id="__codelineno-35-63" name="__codelineno-35-63"></a><span class="hll"><span class="w">    </span><span class="p">}</span>
</span></span><span id="__span-35-64"><a id="__codelineno-35-64" name="__codelineno-35-64"></a><span class="hll"><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;check : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">check</span><span class="p">)</span>
</span></span><span id="__span-35-65"><a id="__codelineno-35-65" name="__codelineno-35-65"></a><span class="hll"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">check</span><span class="p">;</span>
</span></span><span id="__span-35-66"><a id="__codelineno-35-66" name="__codelineno-35-66"></a><span class="hll"><span class="w">  </span><span class="p">}</span>
</span></span><span id="__span-35-67"><a id="__codelineno-35-67" name="__codelineno-35-67"></a>
</span><span id="__span-35-68"><a id="__codelineno-35-68" name="__codelineno-35-68"></a><span class="w">  </span><span class="nx">onSubmit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-69"><a id="__codelineno-35-69" name="__codelineno-35-69"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-35-70"><a id="__codelineno-35-70" name="__codelineno-35-70"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-71"><a id="__codelineno-35-71" name="__codelineno-35-71"></a><span class="w">      </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">username</span><span class="o">!</span><span class="p">,</span>
</span><span id="__span-35-72"><a id="__codelineno-35-72" name="__codelineno-35-72"></a><span class="w">      </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">password</span><span class="o">!</span><span class="p">,</span>
</span><span id="__span-35-73"><a id="__codelineno-35-73" name="__codelineno-35-73"></a><span class="w">      </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">email</span><span class="o">!</span><span class="p">,</span>
</span><span id="__span-35-74"><a id="__codelineno-35-74" name="__codelineno-35-74"></a><span class="w">      </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">role</span><span class="o">!</span>
</span><span id="__span-35-75"><a id="__codelineno-35-75" name="__codelineno-35-75"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-35-76"><a id="__codelineno-35-76" name="__codelineno-35-76"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span>
</span><span id="__span-35-77"><a id="__codelineno-35-77" name="__codelineno-35-77"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">valid</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-35-78"><a id="__codelineno-35-78" name="__codelineno-35-78"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;eingaben gueltig! Registrierung wird vorgenommen&#39;</span><span class="p">)</span>
</span><span id="__span-35-79"><a id="__codelineno-35-79" name="__codelineno-35-79"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">registerUser</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">({</span>
</span><span id="__span-35-80"><a id="__codelineno-35-80" name="__codelineno-35-80"></a><span class="w">        </span><span class="nx">next</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">),</span>
</span><span id="__span-35-81"><a id="__codelineno-35-81" name="__codelineno-35-81"></a><span class="w">        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;HttpErrorResponse : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">),</span>
</span><span id="__span-35-82"><a id="__codelineno-35-82" name="__codelineno-35-82"></a><span class="w">        </span><span class="nx">complete</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;register completed&#39;</span><span class="p">)</span>
</span><span id="__span-35-83"><a id="__codelineno-35-83" name="__codelineno-35-83"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-35-84"><a id="__codelineno-35-84" name="__codelineno-35-84"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-85"><a id="__codelineno-35-85" name="__codelineno-35-85"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;eingaben ungueltig! Registrierung wird abgelehnt&#39;</span><span class="p">)</span>
</span><span id="__span-35-86"><a id="__codelineno-35-86" name="__codelineno-35-86"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-35-87"><a id="__codelineno-35-87" name="__codelineno-35-87"></a>
</span><span id="__span-35-88"><a id="__codelineno-35-88" name="__codelineno-35-88"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-35-89"><a id="__codelineno-35-89" name="__codelineno-35-89"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Anstatt die Validität der Eingaben in der <code>submit()</code>-Funktion zu prüfen, könnte auch der Button <code>Registrieren</code> solange disabled bleiben, solange <code>valid()</code> ein <code>false</code> zurückgibt (<code>[disabled]="!valid()!"</code>). </p>
<h3 id="modaler-dialog-zur-bestatigung">Modaler Dialog zur Bestätigung<a class="headerlink" href="#modaler-dialog-zur-bestatigung" title="Permanent link">&para;</a></h3>
<p>Derzeit gibt es keine Rückmeldung darüber, ob die neue Nutzerin registriert wurde oder nicht. Wir wollen dazu einen modalen Dialog öffnen, der die entsprechenden Informationen zur Verfügung stellt. Dieser Dialog wird eine Komponente. Da diese Komponente jedoch ausschließlich von der Registrierungskomponente verwendet wird, erstellen wir sie als <em>Kindkomponente</em> der Registrierungskomponente. Wir werden dabei insbesondere die Informationen verwenden, wie wir <a href="../signals/#datenfluss-und-signals">Datenfluss und Signals</a> eingeführt haben. </p>
<p>Zunächst erstellen wir die (Kind-)Komponente <code>confirm</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>ng<span class="w"> </span>g<span class="w"> </span>c<span class="w"> </span>register/confirm
</span></code></pre></div>
<p>Unter dem Ordner <code>register</code> entsteht ein weiterer Ordner <code>confirm</code>, der die <code>.html</code>, <code>.ts</code> und <code>.css</code> der Kindkomponente <code>confirm</code> enthält. Wir verwenden <a href="https://material.angular.io/components/dialog/overview">Dialog</a> von Material Design. Wir gehen vor, wie in <a href="https://material.angular.io/components/dialog/examples">Dialog Examples</a> gezeigt. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="22:3"><input checked="checked" id="__tabbed_22_1" name="__tabbed_22" type="radio" /><input id="__tabbed_22_2" name="__tabbed_22" type="radio" /><input id="__tabbed_22_3" name="__tabbed_22" type="radio" /><div class="tabbed-labels"><label for="__tabbed_22_1">register.component.ts</label><label for="__tabbed_22_2">confirm.component.ts</label><label for="__tabbed_22_3">confirm.component.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">  1</a></span>
<span class="normal"><a href="#__codelineno-37-2">  2</a></span>
<span class="normal"><a href="#__codelineno-37-3">  3</a></span>
<span class="normal"><a href="#__codelineno-37-4">  4</a></span>
<span class="normal"><a href="#__codelineno-37-5">  5</a></span>
<span class="normal"><a href="#__codelineno-37-6">  6</a></span>
<span class="normal"><a href="#__codelineno-37-7">  7</a></span>
<span class="normal"><a href="#__codelineno-37-8">  8</a></span>
<span class="normal"><a href="#__codelineno-37-9">  9</a></span>
<span class="normal"><a href="#__codelineno-37-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-37-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-37-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-37-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-37-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-37-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-37-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-37-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-37-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-37-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-37-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-37-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-37-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-37-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-37-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-37-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-37-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-37-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-37-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-37-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-37-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-37-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-37-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-37-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-37-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-37-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-37-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-37-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-37-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-37-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-37-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-37-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-37-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-37-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-37-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-37-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-37-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-37-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-37-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-37-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-37-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-37-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-37-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-37-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-37-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-37-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-37-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-37-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-37-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-37-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-37-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-37-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-37-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-37-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-37-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-37-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-37-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-37-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-37-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-37-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-37-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-37-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-37-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-37-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-37-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-37-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-37-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-37-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-37-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-37-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-37-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-37-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-37-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-37-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-37-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-37-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-37-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-37-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-37-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-37-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-37-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-37-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-37-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-37-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-37-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-37-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-37-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-37-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-37-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-37-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-37-100">100</a></span>
<span class="normal"><a href="#__codelineno-37-101">101</a></span>
<span class="normal"><a href="#__codelineno-37-102">102</a></span>
<span class="normal"><a href="#__codelineno-37-103">103</a></span>
<span class="normal"><a href="#__codelineno-37-104">104</a></span>
<span class="normal"><a href="#__codelineno-37-105">105</a></span>
<span class="normal"><a href="#__codelineno-37-106">106</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">inject</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2"></a>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ReactiveFormsModule</span><span class="p">,</span><span class="w"> </span><span class="nx">FormBuilder</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">,</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">,</span><span class="w"> </span><span class="nx">FormGroup</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatInputModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/input&#39;</span><span class="p">;</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatButtonModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/button&#39;</span><span class="p">;</span>
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatSelectModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/select&#39;</span><span class="p">;</span>
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatRadioModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/radio&#39;</span><span class="p">;</span>
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatCardModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/card&#39;</span><span class="p">;</span>
</span><span id="__span-37-9"><a id="__codelineno-37-9" name="__codelineno-37-9"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/user&#39;</span><span class="p">;</span>
</span><span id="__span-37-10"><a id="__codelineno-37-10" name="__codelineno-37-10"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatIconModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/icon&#39;</span><span class="p">;</span>
</span><span id="__span-37-11"><a id="__codelineno-37-11" name="__codelineno-37-11"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AuthService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/auth.service&#39;</span><span class="p">;</span>
</span><span id="__span-37-12"><a id="__codelineno-37-12" name="__codelineno-37-12"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatDialog</span><span class="p">,</span><span class="w"> </span><span class="nx">MatDialogModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/dialog&#39;</span><span class="p">;</span>
</span></span><span id="__span-37-13"><a id="__codelineno-37-13" name="__codelineno-37-13"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ConfirmComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./confirm/confirm.component&#39;</span><span class="p">;</span>
</span></span><span id="__span-37-14"><a id="__codelineno-37-14" name="__codelineno-37-14"></a>
</span><span id="__span-37-15"><a id="__codelineno-37-15" name="__codelineno-37-15"></a><span class="hll"><span class="k">export</span><span class="w"> </span><span class="kr">interface</span><span class="w"> </span><span class="nx">DialogData</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-37-16"><a id="__codelineno-37-16" name="__codelineno-37-16"></a><span class="hll"><span class="w">  </span><span class="nx">headline</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
</span></span><span id="__span-37-17"><a id="__codelineno-37-17" name="__codelineno-37-17"></a><span class="hll"><span class="w">  </span><span class="nx">info</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
</span></span><span id="__span-37-18"><a id="__codelineno-37-18" name="__codelineno-37-18"></a><span class="hll"><span class="p">}</span>
</span></span><span id="__span-37-19"><a id="__codelineno-37-19" name="__codelineno-37-19"></a>
</span><span id="__span-37-20"><a id="__codelineno-37-20" name="__codelineno-37-20"></a><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span id="__span-37-21"><a id="__codelineno-37-21" name="__codelineno-37-21"></a><span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-register&#39;</span><span class="p">,</span>
</span><span id="__span-37-22"><a id="__codelineno-37-22" name="__codelineno-37-22"></a><span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./register.component.html&#39;</span><span class="p">,</span>
</span><span id="__span-37-23"><a id="__codelineno-37-23" name="__codelineno-37-23"></a><span class="w">  </span><span class="nx">styleUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./register.component.css&#39;</span><span class="p">,</span>
</span><span id="__span-37-24"><a id="__codelineno-37-24" name="__codelineno-37-24"></a><span class="w">  </span><span class="nx">standalone</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-37-25"><a id="__codelineno-37-25" name="__codelineno-37-25"></a><span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-37-26"><a id="__codelineno-37-26" name="__codelineno-37-26"></a><span class="w">    </span><span class="nx">MatIconModule</span><span class="p">,</span>
</span><span id="__span-37-27"><a id="__codelineno-37-27" name="__codelineno-37-27"></a><span class="w">    </span><span class="nx">MatInputModule</span><span class="p">,</span>
</span><span id="__span-37-28"><a id="__codelineno-37-28" name="__codelineno-37-28"></a><span class="w">    </span><span class="nx">MatButtonModule</span><span class="p">,</span>
</span><span id="__span-37-29"><a id="__codelineno-37-29" name="__codelineno-37-29"></a><span class="w">    </span><span class="nx">MatSelectModule</span><span class="p">,</span>
</span><span id="__span-37-30"><a id="__codelineno-37-30" name="__codelineno-37-30"></a><span class="w">    </span><span class="nx">MatRadioModule</span><span class="p">,</span>
</span><span id="__span-37-31"><a id="__codelineno-37-31" name="__codelineno-37-31"></a><span class="w">    </span><span class="nx">MatCardModule</span><span class="p">,</span>
</span><span id="__span-37-32"><a id="__codelineno-37-32" name="__codelineno-37-32"></a><span class="w">    </span><span class="nx">ReactiveFormsModule</span><span class="p">,</span>
</span><span id="__span-37-33"><a id="__codelineno-37-33" name="__codelineno-37-33"></a><span class="hll"><span class="w">    </span><span class="nx">MatDialogModule</span>
</span></span><span id="__span-37-34"><a id="__codelineno-37-34" name="__codelineno-37-34"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-37-35"><a id="__codelineno-37-35" name="__codelineno-37-35"></a><span class="p">})</span>
</span><span id="__span-37-36"><a id="__codelineno-37-36" name="__codelineno-37-36"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">RegisterComponent</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-37"><a id="__codelineno-37-37" name="__codelineno-37-37"></a><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">auth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">AuthService</span><span class="p">)</span>
</span><span id="__span-37-38"><a id="__codelineno-37-38" name="__codelineno-37-38"></a><span class="w">  </span><span class="kr">public</span><span class="w"> </span><span class="nx">dialog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">MatDialog</span><span class="p">)</span>
</span><span id="__span-37-39"><a id="__codelineno-37-39" name="__codelineno-37-39"></a><span class="w">  </span><span class="nx">registerForm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormGroup</span><span class="p">({</span>
</span><span id="__span-37-40"><a id="__codelineno-37-40" name="__codelineno-37-40"></a><span class="w">    </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">),</span>
</span><span id="__span-37-41"><a id="__codelineno-37-41" name="__codelineno-37-41"></a><span class="w">    </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">minLength</span><span class="p">(</span><span class="mf">8</span><span class="p">)]),</span>
</span><span id="__span-37-42"><a id="__codelineno-37-42" name="__codelineno-37-42"></a><span class="w">    </span><span class="nx">password2</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">minLength</span><span class="p">(</span><span class="mf">8</span><span class="p">)]),</span>
</span><span id="__span-37-43"><a id="__codelineno-37-43" name="__codelineno-37-43"></a><span class="w">    </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">email</span><span class="p">]),</span>
</span><span id="__span-37-44"><a id="__codelineno-37-44" name="__codelineno-37-44"></a><span class="w">    </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">)</span>
</span><span id="__span-37-45"><a id="__codelineno-37-45" name="__codelineno-37-45"></a><span class="w">  </span><span class="p">});</span>
</span><span id="__span-37-46"><a id="__codelineno-37-46" name="__codelineno-37-46"></a><span class="w">  </span><span class="nx">roles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;admin&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;user&quot;</span><span class="p">];</span>
</span><span id="__span-37-47"><a id="__codelineno-37-47" name="__codelineno-37-47"></a><span class="w">  </span><span class="nx">hide</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-37-48"><a id="__codelineno-37-48" name="__codelineno-37-48"></a><span class="w">  </span><span class="nx">hide2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-37-49"><a id="__codelineno-37-49" name="__codelineno-37-49"></a><span class="w">  </span><span class="nx">user</span><span class="o">!:</span><span class="w"> </span><span class="nx">User</span><span class="p">;</span>
</span><span id="__span-37-50"><a id="__codelineno-37-50" name="__codelineno-37-50"></a>
</span><span id="__span-37-51"><a id="__codelineno-37-51" name="__codelineno-37-51"></a><span class="w">  </span><span class="nx">valid</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-52"><a id="__codelineno-37-52" name="__codelineno-37-52"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
</span><span id="__span-37-53"><a id="__codelineno-37-53" name="__codelineno-37-53"></a><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;required&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-37-54"><a id="__codelineno-37-54" name="__codelineno-37-54"></a><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;required&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-37-55"><a id="__codelineno-37-55" name="__codelineno-37-55"></a><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;minlength&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-37-56"><a id="__codelineno-37-56" name="__codelineno-37-56"></a><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;password2&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;required&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-37-57"><a id="__codelineno-37-57" name="__codelineno-37-57"></a><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;password2&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;minlength&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-37-58"><a id="__codelineno-37-58" name="__codelineno-37-58"></a><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;required&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-37-59"><a id="__codelineno-37-59" name="__codelineno-37-59"></a><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-37-60"><a id="__codelineno-37-60" name="__codelineno-37-60"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">password</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">password2</span><span class="p">;</span>
</span><span id="__span-37-61"><a id="__codelineno-37-61" name="__codelineno-37-61"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;valid : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">check</span><span class="p">)</span>
</span><span id="__span-37-62"><a id="__codelineno-37-62" name="__codelineno-37-62"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">check</span><span class="p">;</span>
</span><span id="__span-37-63"><a id="__codelineno-37-63" name="__codelineno-37-63"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-37-64"><a id="__codelineno-37-64" name="__codelineno-37-64"></a>
</span><span id="__span-37-65"><a id="__codelineno-37-65" name="__codelineno-37-65"></a><span class="w">  </span><span class="nx">differentPassword</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-66"><a id="__codelineno-37-66" name="__codelineno-37-66"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">dirty</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">password</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">password2</span><span class="p">;</span>
</span><span id="__span-37-67"><a id="__codelineno-37-67" name="__codelineno-37-67"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">check</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-68"><a id="__codelineno-37-68" name="__codelineno-37-68"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">.</span><span class="nx">password2</span><span class="p">.</span><span class="nx">setErrors</span><span class="p">({</span><span class="s1">&#39;incorrect&#39;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">});</span>
</span><span id="__span-37-69"><a id="__codelineno-37-69" name="__codelineno-37-69"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-70"><a id="__codelineno-37-70" name="__codelineno-37-70"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">.</span><span class="nx">password2</span><span class="p">.</span><span class="nx">setErrors</span><span class="p">({</span><span class="s1">&#39;incorrect&#39;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">});</span>
</span><span id="__span-37-71"><a id="__codelineno-37-71" name="__codelineno-37-71"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-37-72"><a id="__codelineno-37-72" name="__codelineno-37-72"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;check : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">check</span><span class="p">)</span>
</span><span id="__span-37-73"><a id="__codelineno-37-73" name="__codelineno-37-73"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">check</span><span class="p">;</span>
</span><span id="__span-37-74"><a id="__codelineno-37-74" name="__codelineno-37-74"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-37-75"><a id="__codelineno-37-75" name="__codelineno-37-75"></a>
</span><span id="__span-37-76"><a id="__codelineno-37-76" name="__codelineno-37-76"></a><span class="w">  </span><span class="nx">onSubmit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-77"><a id="__codelineno-37-77" name="__codelineno-37-77"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-37-78"><a id="__codelineno-37-78" name="__codelineno-37-78"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-79"><a id="__codelineno-37-79" name="__codelineno-37-79"></a><span class="w">      </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">username</span><span class="o">!</span><span class="p">,</span>
</span><span id="__span-37-80"><a id="__codelineno-37-80" name="__codelineno-37-80"></a><span class="w">      </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">password</span><span class="o">!</span><span class="p">,</span>
</span><span id="__span-37-81"><a id="__codelineno-37-81" name="__codelineno-37-81"></a><span class="w">      </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">email</span><span class="o">!</span><span class="p">,</span>
</span><span id="__span-37-82"><a id="__codelineno-37-82" name="__codelineno-37-82"></a><span class="w">      </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">role</span><span class="o">!</span>
</span><span id="__span-37-83"><a id="__codelineno-37-83" name="__codelineno-37-83"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-37-84"><a id="__codelineno-37-84" name="__codelineno-37-84"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span>
</span><span id="__span-37-85"><a id="__codelineno-37-85" name="__codelineno-37-85"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">valid</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-86"><a id="__codelineno-37-86" name="__codelineno-37-86"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;eingaben gueltig! Registrierung wird vorgenommen&#39;</span><span class="p">)</span>
</span><span id="__span-37-87"><a id="__codelineno-37-87" name="__codelineno-37-87"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">registerUser</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">({</span>
</span><span id="__span-37-88"><a id="__codelineno-37-88" name="__codelineno-37-88"></a><span class="w">        </span><span class="nx">next</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-89"><a id="__codelineno-37-89" name="__codelineno-37-89"></a><span class="w">          </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">);</span>
</span><span id="__span-37-90"><a id="__codelineno-37-90" name="__codelineno-37-90"></a><span class="hll"><span class="w">          </span><span class="k">this</span><span class="p">.</span><span class="nx">openDialog</span><span class="p">({</span><span class="w"> </span><span class="nx">headline</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Erfolg&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">info</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;User &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">username</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot; registriert!&quot;</span><span class="w"> </span><span class="p">});</span>
</span></span><span id="__span-37-91"><a id="__codelineno-37-91" name="__codelineno-37-91"></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-37-92"><a id="__codelineno-37-92" name="__codelineno-37-92"></a><span class="w">        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-93"><a id="__codelineno-37-93" name="__codelineno-37-93"></a><span class="w">          </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;HttpErrorResponse : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
</span><span id="__span-37-94"><a id="__codelineno-37-94" name="__codelineno-37-94"></a><span class="hll"><span class="w">          </span><span class="k">this</span><span class="p">.</span><span class="nx">openDialog</span><span class="p">({</span><span class="w"> </span><span class="nx">headline</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Fehler&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">info</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;username und/oder E-Mail existiert bereits&quot;</span><span class="w"> </span><span class="p">});</span>
</span></span><span id="__span-37-95"><a id="__codelineno-37-95" name="__codelineno-37-95"></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-37-96"><a id="__codelineno-37-96" name="__codelineno-37-96"></a><span class="w">        </span><span class="nx">complete</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;register completed&#39;</span><span class="p">)</span>
</span><span id="__span-37-97"><a id="__codelineno-37-97" name="__codelineno-37-97"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-37-98"><a id="__codelineno-37-98" name="__codelineno-37-98"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-99"><a id="__codelineno-37-99" name="__codelineno-37-99"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;eingaben ungueltig! Registrierung wird abgelehnt&#39;</span><span class="p">)</span>
</span><span id="__span-37-100"><a id="__codelineno-37-100" name="__codelineno-37-100"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-37-101"><a id="__codelineno-37-101" name="__codelineno-37-101"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-37-102"><a id="__codelineno-37-102" name="__codelineno-37-102"></a>
</span><span id="__span-37-103"><a id="__codelineno-37-103" name="__codelineno-37-103"></a><span class="hll"><span class="w">  </span><span class="nx">openDialog</span><span class="p">(</span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">DialogData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-37-104"><a id="__codelineno-37-104" name="__codelineno-37-104"></a><span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">dialog</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">ConfirmComponent</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="p">});</span>
</span></span><span id="__span-37-105"><a id="__codelineno-37-105" name="__codelineno-37-105"></a><span class="hll"><span class="w">  </span><span class="p">}</span>
</span></span><span id="__span-37-106"><a id="__codelineno-37-106" name="__codelineno-37-106"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-38-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-38-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-38-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-38-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-38-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-38-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-38-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-38-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-38-10">10</a></span>
<span class="normal"><a href="#__codelineno-38-11">11</a></span>
<span class="normal"><a href="#__codelineno-38-12">12</a></span>
<span class="normal"><a href="#__codelineno-38-13">13</a></span>
<span class="normal"><a href="#__codelineno-38-14">14</a></span>
<span class="normal"><a href="#__codelineno-38-15">15</a></span>
<span class="normal"><a href="#__codelineno-38-16">16</a></span>
<span class="normal"><a href="#__codelineno-38-17">17</a></span>
<span class="normal"><a href="#__codelineno-38-18">18</a></span>
<span class="normal"><a href="#__codelineno-38-19">19</a></span>
<span class="normal"><a href="#__codelineno-38-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">inject</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatButtonModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/button&#39;</span><span class="p">;</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MAT_DIALOG_DATA</span><span class="p">,</span><span class="w"> </span><span class="nx">MatDialogActions</span><span class="p">,</span><span class="w"> </span><span class="nx">MatDialogClose</span><span class="p">,</span><span class="w"> </span><span class="nx">MatDialogContent</span><span class="p">,</span><span class="w"> </span><span class="nx">MatDialogTitle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/dialog&#39;</span><span class="p">;</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4"></a>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-confirm&#39;</span><span class="p">,</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="w">  </span><span class="nx">standalone</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="w">    </span><span class="nx">MatDialogTitle</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10"></a><span class="w">    </span><span class="nx">MatDialogContent</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11"></a><span class="w">    </span><span class="nx">MatDialogActions</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12"></a><span class="w">    </span><span class="nx">MatDialogClose</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-38-13"><a id="__codelineno-38-13" name="__codelineno-38-13"></a><span class="w">    </span><span class="nx">MatButtonModule</span><span class="p">,</span>
</span><span id="__span-38-14"><a id="__codelineno-38-14" name="__codelineno-38-14"></a><span class="w">  </span><span class="p">],</span>
</span><span id="__span-38-15"><a id="__codelineno-38-15" name="__codelineno-38-15"></a><span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./confirm.component.html&#39;</span><span class="p">,</span>
</span><span id="__span-38-16"><a id="__codelineno-38-16" name="__codelineno-38-16"></a><span class="w">  </span><span class="nx">styleUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./confirm.component.css&#39;</span>
</span><span id="__span-38-17"><a id="__codelineno-38-17" name="__codelineno-38-17"></a><span class="p">})</span>
</span><span id="__span-38-18"><a id="__codelineno-38-18" name="__codelineno-38-18"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">ConfirmComponent</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-19"><a id="__codelineno-38-19" name="__codelineno-38-19"></a><span class="w">  </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">MAT_DIALOG_DATA</span><span class="p">)</span>
</span><span id="__span-38-20"><a id="__codelineno-38-20" name="__codelineno-38-20"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span>
<span class="normal"><a href="#__codelineno-39-2">2</a></span>
<span class="normal"><a href="#__codelineno-39-3">3</a></span>
<span class="normal"><a href="#__codelineno-39-4">4</a></span>
<span class="normal"><a href="#__codelineno-39-5">5</a></span>
<span class="normal"><a href="#__codelineno-39-6">6</a></span>
<span class="normal"><a href="#__codelineno-39-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="p">&lt;</span><span class="nt">h1</span> <span class="na">mat-dialog-title</span><span class="p">&gt;</span>{{ data.headline }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="p">&lt;</span><span class="nt">mat-dialog-content</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mat-typography&quot;</span><span class="p">&gt;</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3"></a>  {{ data.info }}
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="p">&lt;/</span><span class="nt">mat-dialog-content</span><span class="p">&gt;</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="p">&lt;</span><span class="nt">mat-dialog-actions</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;end&quot;</span><span class="p">&gt;</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6"></a>  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-button</span> <span class="err">[</span><span class="na">mat-dialog-close</span><span class="err">]=&quot;</span><span class="na">true</span><span class="err">&quot;</span> <span class="na">cdkFocusInitial</span><span class="p">&gt;</span>Ok<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7"></a><span class="p">&lt;/</span><span class="nt">mat-dialog-actions</span><span class="p">&gt;</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wenn nun die Registrierung erfolgreich war, erscheint ein entsprechender modaler Dialog und ebenso, wenn die Registrierung nicht erfolgt ist:</p>
<p><img alt="users" src="../files/280_users.png" width="50%" /></p>
<h3 id="login-komponente">Login-Komponente<a class="headerlink" href="#login-komponente" title="Permanent link">&para;</a></h3>
<p>Wir implementieren nun die Login-Komponente, da wir beim Login ein <a href="">JWT</a> erhalten, mit dem wir einerseits den Zugriff auf Komponenten in unserem Frontend (über <a href="./#guards">Guards</a>) und andererseits den Zugriff auf Endpunkte in unserem Backend autorisieren wollen.</p>
<p>Die Log-Komponente enthält erneut ein Formular. Das kennen wir bereits aus der Registrierungs-Komponente.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="23:3"><input checked="checked" id="__tabbed_23_1" name="__tabbed_23" type="radio" /><input id="__tabbed_23_2" name="__tabbed_23" type="radio" /><input id="__tabbed_23_3" name="__tabbed_23" type="radio" /><div class="tabbed-labels"><label for="__tabbed_23_1">login.component.ts</label><label for="__tabbed_23_2">login.component.html</label><label for="__tabbed_23_3">login.component.css</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span>
<span class="normal"><a href="#__codelineno-40-13">13</a></span>
<span class="normal"><a href="#__codelineno-40-14">14</a></span>
<span class="normal"><a href="#__codelineno-40-15">15</a></span>
<span class="normal"><a href="#__codelineno-40-16">16</a></span>
<span class="normal"><a href="#__codelineno-40-17">17</a></span>
<span class="normal"><a href="#__codelineno-40-18">18</a></span>
<span class="normal"><a href="#__codelineno-40-19">19</a></span>
<span class="normal"><a href="#__codelineno-40-20">20</a></span>
<span class="normal"><a href="#__codelineno-40-21">21</a></span>
<span class="normal"><a href="#__codelineno-40-22">22</a></span>
<span class="normal"><a href="#__codelineno-40-23">23</a></span>
<span class="normal"><a href="#__codelineno-40-24">24</a></span>
<span class="normal"><a href="#__codelineno-40-25">25</a></span>
<span class="normal"><a href="#__codelineno-40-26">26</a></span>
<span class="normal"><a href="#__codelineno-40-27">27</a></span>
<span class="normal"><a href="#__codelineno-40-28">28</a></span>
<span class="normal"><a href="#__codelineno-40-29">29</a></span>
<span class="normal"><a href="#__codelineno-40-30">30</a></span>
<span class="normal"><a href="#__codelineno-40-31">31</a></span>
<span class="normal"><a href="#__codelineno-40-32">32</a></span>
<span class="normal"><a href="#__codelineno-40-33">33</a></span>
<span class="normal"><a href="#__codelineno-40-34">34</a></span>
<span class="normal"><a href="#__codelineno-40-35">35</a></span>
<span class="normal"><a href="#__codelineno-40-36">36</a></span>
<span class="normal"><a href="#__codelineno-40-37">37</a></span>
<span class="normal"><a href="#__codelineno-40-38">38</a></span>
<span class="normal"><a href="#__codelineno-40-39">39</a></span>
<span class="normal"><a href="#__codelineno-40-40">40</a></span>
<span class="normal"><a href="#__codelineno-40-41">41</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ReactiveFormsModule</span><span class="p">,</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">,</span><span class="w"> </span><span class="nx">FormGroup</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatInputModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/input&#39;</span><span class="p">;</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatButtonModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/button&#39;</span><span class="p">;</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatRadioModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/radio&#39;</span><span class="p">;</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatCardModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/card&#39;</span><span class="p">;</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatIconModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/icon&#39;</span><span class="p">;</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-login&#39;</span><span class="p">,</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">  </span><span class="nx">standalone</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11"></a><span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="w">    </span><span class="nx">MatIconModule</span><span class="p">,</span>
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13"></a><span class="w">    </span><span class="nx">MatInputModule</span><span class="p">,</span>
</span><span id="__span-40-14"><a id="__codelineno-40-14" name="__codelineno-40-14"></a><span class="w">    </span><span class="nx">MatButtonModule</span><span class="p">,</span>
</span><span id="__span-40-15"><a id="__codelineno-40-15" name="__codelineno-40-15"></a><span class="w">    </span><span class="nx">MatRadioModule</span><span class="p">,</span>
</span><span id="__span-40-16"><a id="__codelineno-40-16" name="__codelineno-40-16"></a><span class="w">    </span><span class="nx">MatCardModule</span><span class="p">,</span>
</span><span id="__span-40-17"><a id="__codelineno-40-17" name="__codelineno-40-17"></a><span class="w">    </span><span class="nx">ReactiveFormsModule</span><span class="p">,</span>
</span><span id="__span-40-18"><a id="__codelineno-40-18" name="__codelineno-40-18"></a><span class="w">  </span><span class="p">],</span>
</span><span id="__span-40-19"><a id="__codelineno-40-19" name="__codelineno-40-19"></a><span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./login.component.html&#39;</span><span class="p">,</span>
</span><span id="__span-40-20"><a id="__codelineno-40-20" name="__codelineno-40-20"></a><span class="w">  </span><span class="nx">styleUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./login.component.css&#39;</span>
</span><span id="__span-40-21"><a id="__codelineno-40-21" name="__codelineno-40-21"></a><span class="p">})</span>
</span><span id="__span-40-22"><a id="__codelineno-40-22" name="__codelineno-40-22"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-23"><a id="__codelineno-40-23" name="__codelineno-40-23"></a><span class="w">  </span><span class="nx">loginForm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormGroup</span><span class="p">({</span>
</span><span id="__span-40-24"><a id="__codelineno-40-24" name="__codelineno-40-24"></a><span class="w">    </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">),</span>
</span><span id="__span-40-25"><a id="__codelineno-40-25" name="__codelineno-40-25"></a><span class="w">    </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormControl</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span><span class="w"> </span><span class="nx">Validators</span><span class="p">.</span><span class="nx">minLength</span><span class="p">(</span><span class="mf">8</span><span class="p">)]),</span>
</span><span id="__span-40-26"><a id="__codelineno-40-26" name="__codelineno-40-26"></a><span class="w">  </span><span class="p">});</span>
</span><span id="__span-40-27"><a id="__codelineno-40-27" name="__codelineno-40-27"></a><span class="w">  </span><span class="nx">hide</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-40-28"><a id="__codelineno-40-28" name="__codelineno-40-28"></a>
</span><span id="__span-40-29"><a id="__codelineno-40-29" name="__codelineno-40-29"></a><span class="w">  </span><span class="nx">onSubmit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-30"><a id="__codelineno-40-30" name="__codelineno-40-30"></a>
</span><span id="__span-40-31"><a id="__codelineno-40-31" name="__codelineno-40-31"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-40-32"><a id="__codelineno-40-32" name="__codelineno-40-32"></a>
</span><span id="__span-40-33"><a id="__codelineno-40-33" name="__codelineno-40-33"></a><span class="w">  </span><span class="nx">valid</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-34"><a id="__codelineno-40-34" name="__codelineno-40-34"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
</span><span id="__span-40-35"><a id="__codelineno-40-35" name="__codelineno-40-35"></a><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">loginForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;required&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-40-36"><a id="__codelineno-40-36" name="__codelineno-40-36"></a><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">loginForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;required&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-40-37"><a id="__codelineno-40-37" name="__codelineno-40-37"></a><span class="w">    </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">loginForm</span><span class="p">.</span><span class="nx">controls</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">].</span><span class="nx">hasError</span><span class="p">(</span><span class="s1">&#39;minlength&#39;</span><span class="p">)</span>
</span><span id="__span-40-38"><a id="__codelineno-40-38" name="__codelineno-40-38"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;valid : &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">check</span><span class="p">)</span>
</span><span id="__span-40-39"><a id="__codelineno-40-39" name="__codelineno-40-39"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">check</span><span class="p">;</span>
</span><span id="__span-40-40"><a id="__codelineno-40-40" name="__codelineno-40-40"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-40-41"><a id="__codelineno-40-41" name="__codelineno-40-41"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-41-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-41-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-41-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-41-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-41-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-41-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-41-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-41-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-41-10">10</a></span>
<span class="normal"><a href="#__codelineno-41-11">11</a></span>
<span class="normal"><a href="#__codelineno-41-12">12</a></span>
<span class="normal"><a href="#__codelineno-41-13">13</a></span>
<span class="normal"><a href="#__codelineno-41-14">14</a></span>
<span class="normal"><a href="#__codelineno-41-15">15</a></span>
<span class="normal"><a href="#__codelineno-41-16">16</a></span>
<span class="normal"><a href="#__codelineno-41-17">17</a></span>
<span class="normal"><a href="#__codelineno-41-18">18</a></span>
<span class="normal"><a href="#__codelineno-41-19">19</a></span>
<span class="normal"><a href="#__codelineno-41-20">20</a></span>
<span class="normal"><a href="#__codelineno-41-21">21</a></span>
<span class="normal"><a href="#__codelineno-41-22">22</a></span>
<span class="normal"><a href="#__codelineno-41-23">23</a></span>
<span class="normal"><a href="#__codelineno-41-24">24</a></span>
<span class="normal"><a href="#__codelineno-41-25">25</a></span>
<span class="normal"><a href="#__codelineno-41-26">26</a></span>
<span class="normal"><a href="#__codelineno-41-27">27</a></span>
<span class="normal"><a href="#__codelineno-41-28">28</a></span>
<span class="normal"><a href="#__codelineno-41-29">29</a></span>
<span class="normal"><a href="#__codelineno-41-30">30</a></span>
<span class="normal"><a href="#__codelineno-41-31">31</a></span>
<span class="normal"><a href="#__codelineno-41-32">32</a></span>
<span class="normal"><a href="#__codelineno-41-33">33</a></span>
<span class="normal"><a href="#__codelineno-41-34">34</a></span>
<span class="normal"><a href="#__codelineno-41-35">35</a></span>
<span class="normal"><a href="#__codelineno-41-36">36</a></span>
<span class="normal"><a href="#__codelineno-41-37">37</a></span>
<span class="normal"><a href="#__codelineno-41-38">38</a></span>
<span class="normal"><a href="#__codelineno-41-39">39</a></span>
<span class="normal"><a href="#__codelineno-41-40">40</a></span>
<span class="normal"><a href="#__codelineno-41-41">41</a></span>
<span class="normal"><a href="#__codelineno-41-42">42</a></span>
<span class="normal"><a href="#__codelineno-41-43">43</a></span>
<span class="normal"><a href="#__codelineno-41-44">44</a></span>
<span class="normal"><a href="#__codelineno-41-45">45</a></span>
<span class="normal"><a href="#__codelineno-41-46">46</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="p">&lt;</span><span class="nt">form</span> <span class="err">[</span><span class="na">formGroup</span><span class="err">]=&quot;</span><span class="na">loginForm</span><span class="err">&quot;</span> <span class="na">novalidate</span> <span class="err">(</span><span class="na">ngSubmit</span><span class="err">)=&quot;</span><span class="na">onSubmit</span><span class="err">()&quot;</span><span class="p">&gt;</span>    
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a>    <span class="p">&lt;</span><span class="nt">mat-card</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;shipping-card&quot;</span><span class="p">&gt;</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3"></a>        <span class="p">&lt;</span><span class="nt">mat-card-header</span><span class="p">&gt;</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4"></a>            <span class="p">&lt;</span><span class="nt">mat-card-title</span><span class="p">&gt;</span>Registrierung<span class="p">&lt;/</span><span class="nt">mat-card-title</span><span class="p">&gt;</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5"></a>        <span class="p">&lt;/</span><span class="nt">mat-card-header</span><span class="p">&gt;</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6"></a>        <span class="p">&lt;</span><span class="nt">mat-card-content</span><span class="p">&gt;</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7"></a>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8"></a>            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9"></a>                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
</span><span id="__span-41-10"><a id="__codelineno-41-10" name="__codelineno-41-10"></a>                    <span class="p">&lt;</span><span class="nt">mat-form-field</span> <span class="na">hintLabel</span><span class="o">=</span><span class="s">&quot;Einloggen mit Nutzername und Passwort&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width&quot;</span><span class="p">&gt;</span>
</span><span id="__span-41-11"><a id="__codelineno-41-11" name="__codelineno-41-11"></a>                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Nutzername&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;username&quot;</span><span class="p">&gt;</span>
</span><span id="__span-41-12"><a id="__codelineno-41-12" name="__codelineno-41-12"></a>                    <span class="p">&lt;</span><span class="nt">mat-icon</span> <span class="na">matSuffix</span> <span class="p">&gt;</span>person_add<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-41-13"><a id="__codelineno-41-13" name="__codelineno-41-13"></a>                    @if(loginForm.controls[&#39;username&#39;].hasError(&#39;required&#39;)) {
</span><span id="__span-41-14"><a id="__codelineno-41-14" name="__codelineno-41-14"></a>                        <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-41-15"><a id="__codelineno-41-15" name="__codelineno-41-15"></a>                        Nutzername <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>erforderlich<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
</span><span id="__span-41-16"><a id="__codelineno-41-16" name="__codelineno-41-16"></a>                        <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-41-17"><a id="__codelineno-41-17" name="__codelineno-41-17"></a>                    }
</span><span id="__span-41-18"><a id="__codelineno-41-18" name="__codelineno-41-18"></a>                    <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
</span><span id="__span-41-19"><a id="__codelineno-41-19" name="__codelineno-41-19"></a>                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-41-20"><a id="__codelineno-41-20" name="__codelineno-41-20"></a>            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-41-21"><a id="__codelineno-41-21" name="__codelineno-41-21"></a>            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-41-22"><a id="__codelineno-41-22" name="__codelineno-41-22"></a>                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>
</span><span id="__span-41-23"><a id="__codelineno-41-23" name="__codelineno-41-23"></a>                    <span class="p">&lt;</span><span class="nt">mat-form-field</span> <span class="na">hintLabel</span><span class="o">=</span><span class="s">&quot;Mind. 8 Zeichen, mind. 1 Groß- und Kleinbuchstaben, Ziffer und Sonderzeichen&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width&quot;</span><span class="p">&gt;</span>
</span><span id="__span-41-24"><a id="__codelineno-41-24" name="__codelineno-41-24"></a>                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">matInput</span> <span class="err">[</span><span class="na">type</span><span class="err">]=&quot;</span><span class="na">hide</span> <span class="err">?</span> <span class="err">&#39;</span><span class="na">password</span><span class="err">&#39;</span> <span class="na">:</span> <span class="err">&#39;</span><span class="na">text</span><span class="err">&#39;&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Passwort&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;password&quot;</span><span class="p">&gt;</span>
</span><span id="__span-41-25"><a id="__codelineno-41-25" name="__codelineno-41-25"></a>                    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-icon-button</span> <span class="na">matSuffix</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">hide </span><span class="o">=</span> <span class="s">!hide&quot;</span> <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">aria-label</span><span class="err">]=&quot;&#39;</span><span class="na">Hide</span> <span class="na">password</span><span class="err">&#39;&quot;</span> <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">aria-pressed</span><span class="err">]=&quot;</span><span class="na">hide</span><span class="err">&quot;</span><span class="p">&gt;</span>
</span><span id="__span-41-26"><a id="__codelineno-41-26" name="__codelineno-41-26"></a>                        <span class="p">&lt;</span><span class="nt">mat-icon</span><span class="p">&gt;</span>{{hide ? &#39;visibility_off&#39; : &#39;visibility&#39;}}<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-41-27"><a id="__codelineno-41-27" name="__codelineno-41-27"></a>                    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-41-28"><a id="__codelineno-41-28" name="__codelineno-41-28"></a>                    @if(loginForm.controls[&#39;password&#39;].hasError(&#39;required&#39;)) {
</span><span id="__span-41-29"><a id="__codelineno-41-29" name="__codelineno-41-29"></a>                        <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-41-30"><a id="__codelineno-41-30" name="__codelineno-41-30"></a>                        Passwort <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>erforderlich<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
</span><span id="__span-41-31"><a id="__codelineno-41-31" name="__codelineno-41-31"></a>                        <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-41-32"><a id="__codelineno-41-32" name="__codelineno-41-32"></a>                    } @else if(loginForm.controls[&#39;password&#39;].hasError(&#39;minlength&#39;)) {
</span><span id="__span-41-33"><a id="__codelineno-41-33" name="__codelineno-41-33"></a>                        <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-41-34"><a id="__codelineno-41-34" name="__codelineno-41-34"></a>                        Passwort muss mind. <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>8<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> Zeichen enthalten!
</span><span id="__span-41-35"><a id="__codelineno-41-35" name="__codelineno-41-35"></a>                        <span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
</span><span id="__span-41-36"><a id="__codelineno-41-36" name="__codelineno-41-36"></a>                    }
</span><span id="__span-41-37"><a id="__codelineno-41-37" name="__codelineno-41-37"></a>                    <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
</span><span id="__span-41-38"><a id="__codelineno-41-38" name="__codelineno-41-38"></a>                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-41-39"><a id="__codelineno-41-39" name="__codelineno-41-39"></a>            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-41-40"><a id="__codelineno-41-40" name="__codelineno-41-40"></a>
</span><span id="__span-41-41"><a id="__codelineno-41-41" name="__codelineno-41-41"></a>        <span class="p">&lt;/</span><span class="nt">mat-card-content</span><span class="p">&gt;</span>
</span><span id="__span-41-42"><a id="__codelineno-41-42" name="__codelineno-41-42"></a>        <span class="p">&lt;</span><span class="nt">mat-card-actions</span><span class="p">&gt;</span>
</span><span id="__span-41-43"><a id="__codelineno-41-43" name="__codelineno-41-43"></a>        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-raised-button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="err">[</span><span class="na">disabled</span><span class="err">]=&quot;!</span><span class="na">valid</span><span class="err">()!&quot;</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-41-44"><a id="__codelineno-41-44" name="__codelineno-41-44"></a>        <span class="p">&lt;/</span><span class="nt">mat-card-actions</span><span class="p">&gt;</span>
</span><span id="__span-41-45"><a id="__codelineno-41-45" name="__codelineno-41-45"></a>    <span class="p">&lt;/</span><span class="nt">mat-card</span><span class="p">&gt;</span>
</span><span id="__span-41-46"><a id="__codelineno-41-46" name="__codelineno-41-46"></a><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-css highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-42-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-42-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-42-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-42-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-42-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-42-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-42-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-42-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-42-10">10</a></span>
<span class="normal"><a href="#__codelineno-42-11">11</a></span>
<span class="normal"><a href="#__codelineno-42-12">12</a></span>
<span class="normal"><a href="#__codelineno-42-13">13</a></span>
<span class="normal"><a href="#__codelineno-42-14">14</a></span>
<span class="normal"><a href="#__codelineno-42-15">15</a></span>
<span class="normal"><a href="#__codelineno-42-16">16</a></span>
<span class="normal"><a href="#__codelineno-42-17">17</a></span>
<span class="normal"><a href="#__codelineno-42-18">18</a></span>
<span class="normal"><a href="#__codelineno-42-19">19</a></span>
<span class="normal"><a href="#__codelineno-42-20">20</a></span>
<span class="normal"><a href="#__codelineno-42-21">21</a></span>
<span class="normal"><a href="#__codelineno-42-22">22</a></span>
<span class="normal"><a href="#__codelineno-42-23">23</a></span>
<span class="normal"><a href="#__codelineno-42-24">24</a></span>
<span class="normal"><a href="#__codelineno-42-25">25</a></span>
<span class="normal"><a href="#__codelineno-42-26">26</a></span>
<span class="normal"><a href="#__codelineno-42-27">27</a></span>
<span class="normal"><a href="#__codelineno-42-28">28</a></span>
<span class="normal"><a href="#__codelineno-42-29">29</a></span>
<span class="normal"><a href="#__codelineno-42-30">30</a></span>
<span class="normal"><a href="#__codelineno-42-31">31</a></span>
<span class="normal"><a href="#__codelineno-42-32">32</a></span>
<span class="normal"><a href="#__codelineno-42-33">33</a></span>
<span class="normal"><a href="#__codelineno-42-34">34</a></span>
<span class="normal"><a href="#__codelineno-42-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="p">.</span><span class="nc">full-width</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="p">}</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4"></a>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="p">.</span><span class="nc">shipping-card</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="nf">clamp</span><span class="p">(</span><span class="mi">240</span><span class="kt">px</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="kt">vw</span><span class="p">,</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="mi">80</span><span class="kt">vw</span><span class="p">,</span><span class="w"> </span><span class="mi">1200</span><span class="kt">px</span><span class="p">));</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="w">    </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">%</span><span class="w"> </span><span class="mi">2</span><span class="kt">%</span><span class="w"> </span><span class="kc">auto</span><span class="w"> </span><span class="mi">2</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8"></a><span class="p">}</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9"></a>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10"></a><span class="p">.</span><span class="nc">mat-radio-button</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11"></a><span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">block</span><span class="p">;</span>
</span><span id="__span-42-12"><a id="__codelineno-42-12" name="__codelineno-42-12"></a><span class="w">    </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-42-13"><a id="__codelineno-42-13" name="__codelineno-42-13"></a><span class="p">}</span>
</span><span id="__span-42-14"><a id="__codelineno-42-14" name="__codelineno-42-14"></a>
</span><span id="__span-42-15"><a id="__codelineno-42-15" name="__codelineno-42-15"></a><span class="p">.</span><span class="nc">row</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-16"><a id="__codelineno-42-16" name="__codelineno-42-16"></a><span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
</span><span id="__span-42-17"><a id="__codelineno-42-17" name="__codelineno-42-17"></a><span class="w">    </span><span class="k">flex-direction</span><span class="p">:</span><span class="w"> </span><span class="kc">row</span><span class="p">;</span>
</span><span id="__span-42-18"><a id="__codelineno-42-18" name="__codelineno-42-18"></a><span class="w">    </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-42-19"><a id="__codelineno-42-19" name="__codelineno-42-19"></a><span class="p">}</span>
</span><span id="__span-42-20"><a id="__codelineno-42-20" name="__codelineno-42-20"></a>
</span><span id="__span-42-21"><a id="__codelineno-42-21" name="__codelineno-42-21"></a><span class="p">.</span><span class="nc">col</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-22"><a id="__codelineno-42-22" name="__codelineno-42-22"></a><span class="w">    </span><span class="k">flex</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-42-23"><a id="__codelineno-42-23" name="__codelineno-42-23"></a><span class="w">    </span><span class="k">margin-right</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-42-24"><a id="__codelineno-42-24" name="__codelineno-42-24"></a><span class="p">}</span>
</span><span id="__span-42-25"><a id="__codelineno-42-25" name="__codelineno-42-25"></a><span class="p">.</span><span class="nc">mat-mdc-card-header</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-26"><a id="__codelineno-42-26" name="__codelineno-42-26"></a><span class="w">    </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-42-27"><a id="__codelineno-42-27" name="__codelineno-42-27"></a><span class="p">}</span>
</span><span id="__span-42-28"><a id="__codelineno-42-28" name="__codelineno-42-28"></a>
</span><span id="__span-42-29"><a id="__codelineno-42-29" name="__codelineno-42-29"></a><span class="p">.</span><span class="nc">mat-mdc-card-actions</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-30"><a id="__codelineno-42-30" name="__codelineno-42-30"></a><span class="w">    </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-42-31"><a id="__codelineno-42-31" name="__codelineno-42-31"></a><span class="p">}</span>
</span><span id="__span-42-32"><a id="__codelineno-42-32" name="__codelineno-42-32"></a>
</span><span id="__span-42-33"><a id="__codelineno-42-33" name="__codelineno-42-33"></a><span class="p">.</span><span class="nc">col</span><span class="p">:</span><span class="nd">last-child</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-34"><a id="__codelineno-42-34" name="__codelineno-42-34"></a><span class="w">    </span><span class="k">margin-right</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-42-35"><a id="__codelineno-42-35" name="__codelineno-42-35"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Das ergibt folgende Ansicht:</p>
<p><img alt="users" src="../files/282_users.png" width="50%" /></p>
<h3 id="service-anbinden">Service anbinden<a class="headerlink" href="#service-anbinden" title="Permanent link">&para;</a></h3>
<p>Wir implementieren jetzt noch die <code>submit()</code>-Funktion. Darin rufen wir die <code>loginUser()</code>-Funktion aus dem <code>AuthService</code> auf. Dazu muss der Service per <code>private auth = inject(AuthService)</code> in die <code>login.component.ts</code> injiziert und <code>AuthService</code> importiert werden. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="24:1"><input checked="checked" id="__tabbed_24_1" name="__tabbed_24" type="radio" /><div class="tabbed-labels"><label for="__tabbed_24_1">submit() in login.component.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-31">31</a></span>
<span class="normal"><a href="#__codelineno-43-32">32</a></span>
<span class="normal"><a href="#__codelineno-43-33">33</a></span>
<span class="normal"><a href="#__codelineno-43-34">34</a></span>
<span class="normal"><a href="#__codelineno-43-35">35</a></span>
<span class="normal"><a href="#__codelineno-43-36">36</a></span>
<span class="normal"><a href="#__codelineno-43-37">37</a></span>
<span class="normal"><a href="#__codelineno-43-38">38</a></span>
<span class="normal"><a href="#__codelineno-43-39">39</a></span>
<span class="normal"><a href="#__codelineno-43-40">40</a></span>
<span class="normal"><a href="#__codelineno-43-41">41</a></span>
<span class="normal"><a href="#__codelineno-43-42">42</a></span>
<span class="normal"><a href="#__codelineno-43-43">43</a></span>
<span class="normal"><a href="#__codelineno-43-44">44</a></span>
<span class="normal"><a href="#__codelineno-43-45">45</a></span>
<span class="normal"><a href="#__codelineno-43-46">46</a></span>
<span class="normal"><a href="#__codelineno-43-47">47</a></span>
<span class="normal"><a href="#__codelineno-43-48">48</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-43-31"><a id="__codelineno-43-31" name="__codelineno-43-31"></a><span class="nx">onSubmit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-32"><a id="__codelineno-43-32" name="__codelineno-43-32"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">loginForm</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-43-33"><a id="__codelineno-43-33" name="__codelineno-43-33"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">username</span><span class="o">!</span><span class="p">;</span>
</span><span id="__span-43-34"><a id="__codelineno-43-34" name="__codelineno-43-34"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="nx">values</span><span class="p">.</span><span class="nx">password</span><span class="o">!</span><span class="p">;</span>
</span><span id="__span-43-35"><a id="__codelineno-43-35" name="__codelineno-43-35"></a>
</span><span id="__span-43-36"><a id="__codelineno-43-36" name="__codelineno-43-36"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="nx">password</span><span class="p">}</span>
</span><span id="__span-43-37"><a id="__codelineno-43-37" name="__codelineno-43-37"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">)</span>
</span><span id="__span-43-38"><a id="__codelineno-43-38" name="__codelineno-43-38"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">loginUser</span><span class="p">(</span><span class="nx">user</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">({</span>
</span><span id="__span-43-39"><a id="__codelineno-43-39" name="__codelineno-43-39"></a><span class="w">       </span><span class="nx">next</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-40"><a id="__codelineno-43-40" name="__codelineno-43-40"></a><span class="w">          </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;user logged in &#39;</span><span class="p">,</span><span class="nx">response</span><span class="p">);</span>
</span><span id="__span-43-41"><a id="__codelineno-43-41" name="__codelineno-43-41"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-43-42"><a id="__codelineno-43-42" name="__codelineno-43-42"></a><span class="w">      </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-43"><a id="__codelineno-43-43" name="__codelineno-43-43"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;login error&#39;</span><span class="p">,</span><span class="nx">err</span><span class="p">);</span>
</span><span id="__span-43-44"><a id="__codelineno-43-44" name="__codelineno-43-44"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-43-45"><a id="__codelineno-43-45" name="__codelineno-43-45"></a><span class="w">      </span><span class="nx">complete</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;login completed&#39;</span><span class="p">)</span>
</span><span id="__span-43-46"><a id="__codelineno-43-46" name="__codelineno-43-46"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-43-47"><a id="__codelineno-43-47" name="__codelineno-43-47"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-43-48"><a id="__codelineno-43-48" name="__codelineno-43-48"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>In der <code>submit()</code>-Funktion werden die Werte aus dem Formular ausgelesen. Da der <code>Login</code>-Button erst <code>enabled</code> ist, wenn die Eingaben valide sind, enthlten die Eingabefelder sicher Werte. Aus den Werten wird ein <code>user</code>-Objekt zusammengesetzt und der <code>loginUser()</code>-Funktion aus dem Service übergeben. Wir fangen in der <code>error</code>-Eigenschaft die mögliche Response ab, dass <code>username</code> und/oder <code>password</code> nicht korrekt sind. </p>
<p>Wir überlegen uns nun, wie wir mit der erfolgreichen Response umgehen (also damit, dass eine Nutzerin nun erfolgreich eingeloggt ist). Wir wollen sowohl die Informationen über die Nutzerin speichern als auch insbesondere den JWToken, der zurückgegeben wird. Dazu erweitern wir den <code>AuthService</code>.</p>
<h3 id="speichern-des-jwt-im-service">Speichern des JWT im Service<a class="headerlink" href="#speichern-des-jwt-im-service" title="Permanent link">&para;</a></h3>
<p>Wir nutzen <a href="https://angular.dev/guide/signals">Signals</a> zum Speichern des eingeloggten <code>user</code> und des dazugehörigen <code>token</code> im <code>AuthService</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="25:1"><input checked="checked" id="__tabbed_25_1" name="__tabbed_25" type="radio" /><div class="tabbed-labels"><label for="__tabbed_25_1">auth.service.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-44-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-44-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-44-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-44-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-44-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-44-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-44-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-44-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-44-10">10</a></span>
<span class="normal"><a href="#__codelineno-44-11">11</a></span>
<span class="normal"><a href="#__codelineno-44-12">12</a></span>
<span class="normal"><a href="#__codelineno-44-13">13</a></span>
<span class="normal"><a href="#__codelineno-44-14">14</a></span>
<span class="normal"><a href="#__codelineno-44-15">15</a></span>
<span class="normal"><a href="#__codelineno-44-16">16</a></span>
<span class="normal"><a href="#__codelineno-44-17">17</a></span>
<span class="normal"><a href="#__codelineno-44-18">18</a></span>
<span class="normal"><a href="#__codelineno-44-19">19</a></span>
<span class="normal"><a href="#__codelineno-44-20">20</a></span>
<span class="normal"><a href="#__codelineno-44-21">21</a></span>
<span class="normal"><a href="#__codelineno-44-22">22</a></span>
<span class="normal"><a href="#__codelineno-44-23">23</a></span>
<span class="normal"><a href="#__codelineno-44-24">24</a></span>
<span class="normal"><a href="#__codelineno-44-25">25</a></span>
<span class="normal"><a href="#__codelineno-44-26">26</a></span>
<span class="normal"><a href="#__codelineno-44-27">27</a></span>
<span class="normal"><a href="#__codelineno-44-28">28</a></span>
<span class="normal"><a href="#__codelineno-44-29">29</a></span>
<span class="normal"><a href="#__codelineno-44-30">30</a></span>
<span class="normal"><a href="#__codelineno-44-31">31</a></span>
<span class="normal"><a href="#__codelineno-44-32">32</a></span>
<span class="normal"><a href="#__codelineno-44-33">33</a></span>
<span class="normal"><a href="#__codelineno-44-34">34</a></span>
<span class="normal"><a href="#__codelineno-44-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">HttpClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">computed</span><span class="p">,</span><span class="w"> </span><span class="nx">Injectable</span><span class="p">,</span><span class="w"> </span><span class="nx">Signal</span><span class="p">,</span><span class="w"> </span><span class="nx">signal</span><span class="p">,</span><span class="w"> </span><span class="nx">WritableSignal</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span></span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Observable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./user&#39;</span><span class="p">;</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5"></a>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6"></a><span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7"></a><span class="w">  </span><span class="nx">providedIn</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;root&#39;</span>
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8"></a><span class="p">})</span>
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AuthService</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10"></a><span class="w">  </span><span class="nx">baseUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://localhost:3000&#39;</span><span class="p">;</span>
</span><span id="__span-44-11"><a id="__codelineno-44-11" name="__codelineno-44-11"></a><span class="hll"><span class="w">  </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="nx">WritableSignal</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">signal</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">});</span>
</span></span><span id="__span-44-12"><a id="__codelineno-44-12" name="__codelineno-44-12"></a><span class="hll"><span class="w">  </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="nx">WritableSignal</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">signal</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span></span><span id="__span-44-13"><a id="__codelineno-44-13" name="__codelineno-44-13"></a><span class="hll"><span class="w">  </span><span class="nx">loggedIn</span><span class="o">:</span><span class="w"> </span><span class="nx">Signal</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">().</span><span class="nx">id</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">().</span><span class="nx">id</span><span class="o">!</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>
</span></span><span id="__span-44-14"><a id="__codelineno-44-14" name="__codelineno-44-14"></a><span class="hll"><span class="w">  </span><span class="nx">isAdmin</span><span class="o">:</span><span class="w"> </span><span class="nx">Signal</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">().</span><span class="nx">role</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;admin&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>
</span></span><span id="__span-44-15"><a id="__codelineno-44-15" name="__codelineno-44-15"></a>
</span><span id="__span-44-16"><a id="__codelineno-44-16" name="__codelineno-44-16"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span><span class="w"> </span><span class="nx">http</span><span class="o">:</span><span class="w"> </span><span class="nx">HttpClient</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-44-17"><a id="__codelineno-44-17" name="__codelineno-44-17"></a>
</span><span id="__span-44-18"><a id="__codelineno-44-18" name="__codelineno-44-18"></a><span class="hll"><span class="w">  </span><span class="nx">setUser</span><span class="p">(</span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="nx">User</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-44-19"><a id="__codelineno-44-19" name="__codelineno-44-19"></a><span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
</span></span><span id="__span-44-20"><a id="__codelineno-44-20" name="__codelineno-44-20"></a><span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">token</span><span class="p">);</span>
</span></span><span id="__span-44-21"><a id="__codelineno-44-21" name="__codelineno-44-21"></a><span class="hll"><span class="w">  </span><span class="p">}</span>
</span></span><span id="__span-44-22"><a id="__codelineno-44-22" name="__codelineno-44-22"></a>
</span><span id="__span-44-23"><a id="__codelineno-44-23" name="__codelineno-44-23"></a><span class="hll"><span class="w">  </span><span class="nx">unsetUser</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-44-24"><a id="__codelineno-44-24" name="__codelineno-44-24"></a><span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">});</span>
</span></span><span id="__span-44-25"><a id="__codelineno-44-25" name="__codelineno-44-25"></a><span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span></span><span id="__span-44-26"><a id="__codelineno-44-26" name="__codelineno-44-26"></a><span class="hll"><span class="w">  </span><span class="p">}</span>
</span></span><span id="__span-44-27"><a id="__codelineno-44-27" name="__codelineno-44-27"></a>
</span><span id="__span-44-28"><a id="__codelineno-44-28" name="__codelineno-44-28"></a><span class="w">  </span><span class="nx">registerUser</span><span class="p">(</span><span class="nx">user</span><span class="o">:</span><span class="nx">User</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-29"><a id="__codelineno-44-29" name="__codelineno-44-29"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;/user/register&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">);</span>
</span><span id="__span-44-30"><a id="__codelineno-44-30" name="__codelineno-44-30"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-44-31"><a id="__codelineno-44-31" name="__codelineno-44-31"></a>
</span><span id="__span-44-32"><a id="__codelineno-44-32" name="__codelineno-44-32"></a><span class="w">  </span><span class="nx">loginUser</span><span class="p">(</span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"> </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;})</span><span class="o">:</span><span class="w"> </span><span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-33"><a id="__codelineno-44-33" name="__codelineno-44-33"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;/user/login&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">);</span>
</span><span id="__span-44-34"><a id="__codelineno-44-34" name="__codelineno-44-34"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-44-35"><a id="__codelineno-44-35" name="__codelineno-44-35"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Erläuterungen:</p>
<ul>
<li><code>user</code> und <code>token</code> sind <a href="https://angular.dev/guide/signals#writable-signals">WritableSignal</a>s. Sie werden mithilfe von <code>signal()</code> initialisiert, wobai man den initialen Wert als Parameter übergibt. </li>
<li><code>loggedIn</code> und <code>isAdmin</code> sind ebenfalls <a href="https://angular.dev/guide/signals#what-are-signals">Signals</a>, werden aber aus dem Wert des <em>Signals</em> <code>user</code> berechnet. Immer, wenn <code>user</code> einen neuen Wert annimmt, berechnet sich der Wert von <code>loggedIn</code> und <code>isAdmin</code> neu. </li>
<li>In den Methoden <code>setUser()</code> und <code>unsetUser()</code> werden die Werte der <em>Signals</em> <code>user</code> und <code>token</code> mithilfe der <code>set()</code>-Funktion neu gesetzt. </li>
</ul>
<p>Wir werden nun nach einem erfolgreichen Login die Werte der <em>Signals</em> mithilfe der <code>setUser()</code>-Funktion setzen:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="26:1"><input checked="checked" id="__tabbed_26_1" name="__tabbed_26" type="radio" /><div class="tabbed-labels"><label for="__tabbed_26_1">submit() in login.component.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-31">31</a></span>
<span class="normal"><a href="#__codelineno-45-32">32</a></span>
<span class="normal"><a href="#__codelineno-45-33">33</a></span>
<span class="normal"><a href="#__codelineno-45-34">34</a></span>
<span class="normal"><a href="#__codelineno-45-35">35</a></span>
<span class="normal"><a href="#__codelineno-45-36">36</a></span>
<span class="normal"><a href="#__codelineno-45-37">37</a></span>
<span class="normal"><a href="#__codelineno-45-38">38</a></span>
<span class="normal"><a href="#__codelineno-45-39">39</a></span>
<span class="normal"><a href="#__codelineno-45-40">40</a></span>
<span class="normal"><a href="#__codelineno-45-41">41</a></span>
<span class="normal"><a href="#__codelineno-45-42">42</a></span>
<span class="normal"><a href="#__codelineno-45-43">43</a></span>
<span class="normal"><a href="#__codelineno-45-44">44</a></span>
<span class="normal"><a href="#__codelineno-45-45">45</a></span>
<span class="normal"><a href="#__codelineno-45-46">46</a></span>
<span class="normal"><a href="#__codelineno-45-47">47</a></span>
<span class="normal"><a href="#__codelineno-45-48">48</a></span>
<span class="normal"><a href="#__codelineno-45-49">49</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-45-31"><a id="__codelineno-45-31" name="__codelineno-45-31"></a><span class="w">  </span><span class="nx">onSubmit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-45-32"><a id="__codelineno-45-32" name="__codelineno-45-32"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">loginForm</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-45-33"><a id="__codelineno-45-33" name="__codelineno-45-33"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">username</span><span class="o">!</span><span class="p">;</span>
</span><span id="__span-45-34"><a id="__codelineno-45-34" name="__codelineno-45-34"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="nx">values</span><span class="p">.</span><span class="nx">password</span><span class="o">!</span><span class="p">;</span>
</span><span id="__span-45-35"><a id="__codelineno-45-35" name="__codelineno-45-35"></a>
</span><span id="__span-45-36"><a id="__codelineno-45-36" name="__codelineno-45-36"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="nx">password</span><span class="p">}</span>
</span><span id="__span-45-37"><a id="__codelineno-45-37" name="__codelineno-45-37"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">)</span>
</span><span id="__span-45-38"><a id="__codelineno-45-38" name="__codelineno-45-38"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">loginUser</span><span class="p">(</span><span class="nx">user</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">({</span>
</span><span id="__span-45-39"><a id="__codelineno-45-39" name="__codelineno-45-39"></a><span class="w">       </span><span class="nx">next</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-45-40"><a id="__codelineno-45-40" name="__codelineno-45-40"></a><span class="w">          </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;user logged in &#39;</span><span class="p">,</span><span class="nx">response</span><span class="p">);</span>
</span><span id="__span-45-41"><a id="__codelineno-45-41" name="__codelineno-45-41"></a><span class="hll"><span class="w">          </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">setUser</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">token</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span>
</span></span><span id="__span-45-42"><a id="__codelineno-45-42" name="__codelineno-45-42"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-45-43"><a id="__codelineno-45-43" name="__codelineno-45-43"></a><span class="w">      </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-45-44"><a id="__codelineno-45-44" name="__codelineno-45-44"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;login error&#39;</span><span class="p">,</span><span class="nx">err</span><span class="p">);</span>
</span><span id="__span-45-45"><a id="__codelineno-45-45" name="__codelineno-45-45"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-45-46"><a id="__codelineno-45-46" name="__codelineno-45-46"></a><span class="w">      </span><span class="nx">complete</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;login completed&#39;</span><span class="p">)</span>
</span><span id="__span-45-47"><a id="__codelineno-45-47" name="__codelineno-45-47"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-45-48"><a id="__codelineno-45-48" name="__codelineno-45-48"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-45-49"><a id="__codelineno-45-49" name="__codelineno-45-49"></a><span class="w">  </span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="mogliche-erweiterungen-in-der-login-komponente">Mögliche Erweiterungen in der Login-Komponente<a class="headerlink" href="#mogliche-erweiterungen-in-der-login-komponente" title="Permanent link">&para;</a></h3>
<p>Wenn das Login erfolgreich war, könnte direkt die <code>home</code>-Komponente aufgerufen werden. Ist das Login nicht erfolgreich, wird bei der Login-Komponente verblieben. Es erfolgt nur eine Nachricht auf der Konsole - hier könnte z.B. auch ein modaler Dialog erscheinen, wie bei der Registrierung.</p>
<h3 id="nutzen-der-signals">Nutzen der Signals<a class="headerlink" href="#nutzen-der-signals" title="Permanent link">&para;</a></h3>
<p>Wir zeigen den Nutzen und die Nutzung von <em>Signals</em> zunächst an einem einfachen Beispiel anhand unserer <code>NavComponent</code>. Derzeit zeigt diese als Menüeintrag stets <code>Login</code> an, unabhängig davon, ob eine Nutzerin eingeloggt ist oder nicht. Sinnvoller wäre es hier, dass sich dieser Eintrag auf <code>Logout</code> ändert, sobald eine Nutzerin eingeloggt ist. Über diesen Eintrag soll dann jederzeit ein <code>Logout</code> möglich sein. </p>
<p>Außerdem könnte solange rechts oben ein <code>Login</code>-Icon angezeigt werden, solange niemand eingeloogt ist und sobald eine Nutzerin eingeloggt ist, erscheint rechts oben ihr <code>username</code> und das <code>Logout</code>-Icon. </p>
<p>Wir passen die <code>NavComponent</code> entsprechend an:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="27:3"><input checked="checked" id="__tabbed_27_1" name="__tabbed_27" type="radio" /><input id="__tabbed_27_2" name="__tabbed_27" type="radio" /><input id="__tabbed_27_3" name="__tabbed_27" type="radio" /><div class="tabbed-labels"><label for="__tabbed_27_1">nav.component.ts</label><label for="__tabbed_27_2">nav.component.html</label><label for="__tabbed_27_3">nav.component.css</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-46-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-46-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-46-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-46-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-46-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-46-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-46-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-46-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-46-10">10</a></span>
<span class="normal"><a href="#__codelineno-46-11">11</a></span>
<span class="normal"><a href="#__codelineno-46-12">12</a></span>
<span class="normal"><a href="#__codelineno-46-13">13</a></span>
<span class="normal"><a href="#__codelineno-46-14">14</a></span>
<span class="normal"><a href="#__codelineno-46-15">15</a></span>
<span class="normal"><a href="#__codelineno-46-16">16</a></span>
<span class="normal"><a href="#__codelineno-46-17">17</a></span>
<span class="normal"><a href="#__codelineno-46-18">18</a></span>
<span class="normal"><a href="#__codelineno-46-19">19</a></span>
<span class="normal"><a href="#__codelineno-46-20">20</a></span>
<span class="normal"><a href="#__codelineno-46-21">21</a></span>
<span class="normal"><a href="#__codelineno-46-22">22</a></span>
<span class="normal"><a href="#__codelineno-46-23">23</a></span>
<span class="normal"><a href="#__codelineno-46-24">24</a></span>
<span class="normal"><a href="#__codelineno-46-25">25</a></span>
<span class="normal"><a href="#__codelineno-46-26">26</a></span>
<span class="normal"><a href="#__codelineno-46-27">27</a></span>
<span class="normal"><a href="#__codelineno-46-28">28</a></span>
<span class="normal"><a href="#__codelineno-46-29">29</a></span>
<span class="normal"><a href="#__codelineno-46-30">30</a></span>
<span class="normal"><a href="#__codelineno-46-31">31</a></span>
<span class="normal"><a href="#__codelineno-46-32">32</a></span>
<span class="normal"><a href="#__codelineno-46-33">33</a></span>
<span class="normal"><a href="#__codelineno-46-34">34</a></span>
<span class="normal"><a href="#__codelineno-46-35">35</a></span>
<span class="normal"><a href="#__codelineno-46-36">36</a></span>
<span class="normal"><a href="#__codelineno-46-37">37</a></span>
<span class="normal"><a href="#__codelineno-46-38">38</a></span>
<span class="normal"><a href="#__codelineno-46-39">39</a></span>
<span class="normal"><a href="#__codelineno-46-40">40</a></span>
<span class="normal"><a href="#__codelineno-46-41">41</a></span>
<span class="normal"><a href="#__codelineno-46-42">42</a></span>
<span class="normal"><a href="#__codelineno-46-43">43</a></span>
<span class="normal"><a href="#__codelineno-46-44">44</a></span>
<span class="normal"><a href="#__codelineno-46-45">45</a></span>
<span class="normal"><a href="#__codelineno-46-46">46</a></span>
<span class="normal"><a href="#__codelineno-46-47">47</a></span>
<span class="normal"><a href="#__codelineno-46-48">48</a></span>
<span class="normal"><a href="#__codelineno-46-49">49</a></span>
<span class="normal"><a href="#__codelineno-46-50">50</a></span>
<span class="normal"><a href="#__codelineno-46-51">51</a></span>
<span class="normal"><a href="#__codelineno-46-52">52</a></span>
<span class="normal"><a href="#__codelineno-46-53">53</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">computed</span><span class="p">,</span><span class="w"> </span><span class="nx">inject</span><span class="p">,</span><span class="w"> </span><span class="nx">Signal</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">BreakpointObserver</span><span class="p">,</span><span class="w"> </span><span class="nx">Breakpoints</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/cdk/layout&#39;</span><span class="p">;</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AsyncPipe</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatToolbarModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/toolbar&#39;</span><span class="p">;</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatButtonModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/button&#39;</span><span class="p">;</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatSidenavModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/sidenav&#39;</span><span class="p">;</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatListModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/list&#39;</span><span class="p">;</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatIconModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/icon&#39;</span><span class="p">;</span>
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Observable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
</span><span id="__span-46-10"><a id="__codelineno-46-10" name="__codelineno-46-10"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">map</span><span class="p">,</span><span class="w"> </span><span class="nx">shareReplay</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rxjs/operators&#39;</span><span class="p">;</span>
</span><span id="__span-46-11"><a id="__codelineno-46-11" name="__codelineno-46-11"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Router</span><span class="p">,</span><span class="w"> </span><span class="nx">RouterLink</span><span class="p">,</span><span class="w"> </span><span class="nx">RouterOutlet</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
</span><span id="__span-46-12"><a id="__codelineno-46-12" name="__codelineno-46-12"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AuthService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/auth.service&#39;</span><span class="p">;</span>
</span><span id="__span-46-13"><a id="__codelineno-46-13" name="__codelineno-46-13"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/user&#39;</span><span class="p">;</span>
</span><span id="__span-46-14"><a id="__codelineno-46-14" name="__codelineno-46-14"></a>
</span><span id="__span-46-15"><a id="__codelineno-46-15" name="__codelineno-46-15"></a><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span id="__span-46-16"><a id="__codelineno-46-16" name="__codelineno-46-16"></a><span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-nav&#39;</span><span class="p">,</span>
</span><span id="__span-46-17"><a id="__codelineno-46-17" name="__codelineno-46-17"></a><span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./nav.component.html&#39;</span><span class="p">,</span>
</span><span id="__span-46-18"><a id="__codelineno-46-18" name="__codelineno-46-18"></a><span class="w">  </span><span class="nx">styleUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./nav.component.css&#39;</span><span class="p">,</span>
</span><span id="__span-46-19"><a id="__codelineno-46-19" name="__codelineno-46-19"></a><span class="w">  </span><span class="nx">standalone</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-46-20"><a id="__codelineno-46-20" name="__codelineno-46-20"></a><span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-46-21"><a id="__codelineno-46-21" name="__codelineno-46-21"></a><span class="w">    </span><span class="nx">MatToolbarModule</span><span class="p">,</span>
</span><span id="__span-46-22"><a id="__codelineno-46-22" name="__codelineno-46-22"></a><span class="w">    </span><span class="nx">MatButtonModule</span><span class="p">,</span>
</span><span id="__span-46-23"><a id="__codelineno-46-23" name="__codelineno-46-23"></a><span class="w">    </span><span class="nx">MatSidenavModule</span><span class="p">,</span>
</span><span id="__span-46-24"><a id="__codelineno-46-24" name="__codelineno-46-24"></a><span class="w">    </span><span class="nx">MatListModule</span><span class="p">,</span>
</span><span id="__span-46-25"><a id="__codelineno-46-25" name="__codelineno-46-25"></a><span class="w">    </span><span class="nx">MatIconModule</span><span class="p">,</span>
</span><span id="__span-46-26"><a id="__codelineno-46-26" name="__codelineno-46-26"></a><span class="w">    </span><span class="nx">AsyncPipe</span><span class="p">,</span>
</span><span id="__span-46-27"><a id="__codelineno-46-27" name="__codelineno-46-27"></a><span class="w">    </span><span class="nx">RouterOutlet</span><span class="p">,</span>
</span><span id="__span-46-28"><a id="__codelineno-46-28" name="__codelineno-46-28"></a><span class="w">    </span><span class="nx">RouterLink</span>
</span><span id="__span-46-29"><a id="__codelineno-46-29" name="__codelineno-46-29"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-46-30"><a id="__codelineno-46-30" name="__codelineno-46-30"></a><span class="p">})</span>
</span><span id="__span-46-31"><a id="__codelineno-46-31" name="__codelineno-46-31"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">NavComponent</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-32"><a id="__codelineno-46-32" name="__codelineno-46-32"></a><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">breakpointObserver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">BreakpointObserver</span><span class="p">);</span>
</span><span id="__span-46-33"><a id="__codelineno-46-33" name="__codelineno-46-33"></a><span class="hll"><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">auth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">AuthService</span><span class="p">);</span>
</span></span><span id="__span-46-34"><a id="__codelineno-46-34" name="__codelineno-46-34"></a><span class="hll"><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">router</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">Router</span><span class="p">);</span>
</span></span><span id="__span-46-35"><a id="__codelineno-46-35" name="__codelineno-46-35"></a>
</span><span id="__span-46-36"><a id="__codelineno-46-36" name="__codelineno-46-36"></a><span class="hll"><span class="w">  </span><span class="nx">loggedIn</span><span class="o">:</span><span class="w"> </span><span class="nx">Signal</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">loggedIn</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
</span></span><span id="__span-46-37"><a id="__codelineno-46-37" name="__codelineno-46-37"></a><span class="hll"><span class="w">  </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="nx">Signal</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">user</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
</span></span><span id="__span-46-38"><a id="__codelineno-46-38" name="__codelineno-46-38"></a>
</span><span id="__span-46-39"><a id="__codelineno-46-39" name="__codelineno-46-39"></a><span class="w">  </span><span class="nx">isHandset$</span><span class="o">:</span><span class="w"> </span><span class="nx">Observable</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">breakpointObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">Breakpoints</span><span class="p">.</span><span class="nx">Handset</span><span class="p">)</span>
</span><span id="__span-46-40"><a id="__codelineno-46-40" name="__codelineno-46-40"></a><span class="w">    </span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
</span><span id="__span-46-41"><a id="__codelineno-46-41" name="__codelineno-46-41"></a><span class="w">      </span><span class="nx">map</span><span class="p">(</span><span class="nx">result</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">matches</span><span class="p">),</span>
</span><span id="__span-46-42"><a id="__codelineno-46-42" name="__codelineno-46-42"></a><span class="w">      </span><span class="nx">shareReplay</span><span class="p">()</span>
</span><span id="__span-46-43"><a id="__codelineno-46-43" name="__codelineno-46-43"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-46-44"><a id="__codelineno-46-44" name="__codelineno-46-44"></a>
</span><span id="__span-46-45"><a id="__codelineno-46-45" name="__codelineno-46-45"></a><span class="hll"><span class="w">  </span><span class="nx">logout</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-46-46"><a id="__codelineno-46-46" name="__codelineno-46-46"></a><span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">unsetUser</span><span class="p">();</span>
</span></span><span id="__span-46-47"><a id="__codelineno-46-47" name="__codelineno-46-47"></a><span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">&#39;/login&#39;</span><span class="p">]);</span>
</span></span><span id="__span-46-48"><a id="__codelineno-46-48" name="__codelineno-46-48"></a><span class="hll"><span class="w">  </span><span class="p">}</span>
</span></span><span id="__span-46-49"><a id="__codelineno-46-49" name="__codelineno-46-49"></a>
</span><span id="__span-46-50"><a id="__codelineno-46-50" name="__codelineno-46-50"></a><span class="hll"><span class="w">  </span><span class="nx">login</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-46-51"><a id="__codelineno-46-51" name="__codelineno-46-51"></a><span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">&#39;/login&#39;</span><span class="p">]);</span>
</span></span><span id="__span-46-52"><a id="__codelineno-46-52" name="__codelineno-46-52"></a><span class="hll"><span class="w">  </span><span class="p">}</span>
</span></span><span id="__span-46-53"><a id="__codelineno-46-53" name="__codelineno-46-53"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-47-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-47-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-47-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-47-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-47-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-47-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-47-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-47-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-47-10">10</a></span>
<span class="normal"><a href="#__codelineno-47-11">11</a></span>
<span class="normal"><a href="#__codelineno-47-12">12</a></span>
<span class="normal"><a href="#__codelineno-47-13">13</a></span>
<span class="normal"><a href="#__codelineno-47-14">14</a></span>
<span class="normal"><a href="#__codelineno-47-15">15</a></span>
<span class="normal"><a href="#__codelineno-47-16">16</a></span>
<span class="normal"><a href="#__codelineno-47-17">17</a></span>
<span class="normal"><a href="#__codelineno-47-18">18</a></span>
<span class="normal"><a href="#__codelineno-47-19">19</a></span>
<span class="normal"><a href="#__codelineno-47-20">20</a></span>
<span class="normal"><a href="#__codelineno-47-21">21</a></span>
<span class="normal"><a href="#__codelineno-47-22">22</a></span>
<span class="normal"><a href="#__codelineno-47-23">23</a></span>
<span class="normal"><a href="#__codelineno-47-24">24</a></span>
<span class="normal"><a href="#__codelineno-47-25">25</a></span>
<span class="normal"><a href="#__codelineno-47-26">26</a></span>
<span class="normal"><a href="#__codelineno-47-27">27</a></span>
<span class="normal"><a href="#__codelineno-47-28">28</a></span>
<span class="normal"><a href="#__codelineno-47-29">29</a></span>
<span class="normal"><a href="#__codelineno-47-30">30</a></span>
<span class="normal"><a href="#__codelineno-47-31">31</a></span>
<span class="normal"><a href="#__codelineno-47-32">32</a></span>
<span class="normal"><a href="#__codelineno-47-33">33</a></span>
<span class="normal"><a href="#__codelineno-47-34">34</a></span>
<span class="normal"><a href="#__codelineno-47-35">35</a></span>
<span class="normal"><a href="#__codelineno-47-36">36</a></span>
<span class="normal"><a href="#__codelineno-47-37">37</a></span>
<span class="normal"><a href="#__codelineno-47-38">38</a></span>
<span class="normal"><a href="#__codelineno-47-39">39</a></span>
<span class="normal"><a href="#__codelineno-47-40">40</a></span>
<span class="normal"><a href="#__codelineno-47-41">41</a></span>
<span class="normal"><a href="#__codelineno-47-42">42</a></span>
<span class="normal"><a href="#__codelineno-47-43">43</a></span>
<span class="normal"><a href="#__codelineno-47-44">44</a></span>
<span class="normal"><a href="#__codelineno-47-45">45</a></span>
<span class="normal"><a href="#__codelineno-47-46">46</a></span>
<span class="normal"><a href="#__codelineno-47-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="p">&lt;</span><span class="nt">mat-sidenav-container</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sidenav-container&quot;</span><span class="p">&gt;</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2"></a>  <span class="p">&lt;</span><span class="nt">mat-sidenav</span> <span class="err">#</span><span class="na">drawer</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sidenav&quot;</span> <span class="na">fixedInViewport</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3"></a>      <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">role</span><span class="err">]=&quot;(</span><span class="na">isHandset</span><span class="err">$</span> <span class="err">|</span> <span class="na">async</span><span class="err">)</span> <span class="err">?</span> <span class="err">&#39;</span><span class="na">dialog</span><span class="err">&#39;</span> <span class="na">:</span> <span class="err">&#39;</span><span class="na">navigation</span><span class="err">&#39;&quot;</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4"></a>      <span class="err">[</span><span class="na">mode</span><span class="err">]=&quot;(</span><span class="na">isHandset</span><span class="err">$</span> <span class="err">|</span> <span class="na">async</span><span class="err">)</span> <span class="err">?</span> <span class="err">&#39;</span><span class="na">over</span><span class="err">&#39;</span> <span class="na">:</span> <span class="err">&#39;</span><span class="na">side</span><span class="err">&#39;&quot;</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5"></a>      <span class="err">[</span><span class="na">opened</span><span class="err">]=&quot;(</span><span class="na">isHandset</span><span class="err">$</span> <span class="err">|</span> <span class="na">async</span><span class="err">)</span> <span class="err">===</span> <span class="na">false</span><span class="err">&quot;</span><span class="p">&gt;</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6"></a>    <span class="p">&lt;</span><span class="nt">mat-toolbar</span><span class="p">&gt;</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7"></a>        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://freiheit.f4.htw-berlin.de/webtech/guards/#registrierung-und-login-frontend&quot;</span><span class="p">&gt;</span>WebTech<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8"></a>    <span class="p">&lt;/</span><span class="nt">mat-toolbar</span><span class="p">&gt;</span>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9"></a>    <span class="p">&lt;</span><span class="nt">mat-nav-list</span><span class="p">&gt;</span>
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10"></a>      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;&#39;]&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11"></a>      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;</span><span class="na">register</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Register<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="__span-47-12"><a id="__codelineno-47-12" name="__codelineno-47-12"></a><span class="hll">      @if(loggedIn()) {
</span></span><span id="__span-47-13"><a id="__codelineno-47-13" name="__codelineno-47-13"></a><span class="hll">       <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">logout</span><span class="err">()&quot;</span><span class="p">&gt;</span>Logout<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span id="__span-47-14"><a id="__codelineno-47-14" name="__codelineno-47-14"></a><span class="hll">       <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;</span><span class="na">users</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>All users<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span id="__span-47-15"><a id="__codelineno-47-15" name="__codelineno-47-15"></a><span class="hll">      } @else {
</span></span><span id="__span-47-16"><a id="__codelineno-47-16" name="__codelineno-47-16"></a><span class="hll">       <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;</span><span class="na">login</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span id="__span-47-17"><a id="__codelineno-47-17" name="__codelineno-47-17"></a><span class="hll">      }
</span></span><span id="__span-47-18"><a id="__codelineno-47-18" name="__codelineno-47-18"></a>    <span class="p">&lt;/</span><span class="nt">mat-nav-list</span><span class="p">&gt;</span>
</span><span id="__span-47-19"><a id="__codelineno-47-19" name="__codelineno-47-19"></a>  <span class="p">&lt;/</span><span class="nt">mat-sidenav</span><span class="p">&gt;</span>
</span><span id="__span-47-20"><a id="__codelineno-47-20" name="__codelineno-47-20"></a>  <span class="p">&lt;</span><span class="nt">mat-sidenav-content</span><span class="p">&gt;</span>
</span><span id="__span-47-21"><a id="__codelineno-47-21" name="__codelineno-47-21"></a>    <span class="p">&lt;</span><span class="nt">mat-toolbar</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span><span class="p">&gt;</span>
</span><span id="__span-47-22"><a id="__codelineno-47-22" name="__codelineno-47-22"></a>        @if (isHandset$ | async) {
</span><span id="__span-47-23"><a id="__codelineno-47-23" name="__codelineno-47-23"></a>          <span class="p">&lt;</span><span class="nt">button</span>
</span><span id="__span-47-24"><a id="__codelineno-47-24" name="__codelineno-47-24"></a>            <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span>
</span><span id="__span-47-25"><a id="__codelineno-47-25" name="__codelineno-47-25"></a>            <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Toggle sidenav&quot;</span>
</span><span id="__span-47-26"><a id="__codelineno-47-26" name="__codelineno-47-26"></a>            <span class="na">mat-icon-button</span>
</span><span id="__span-47-27"><a id="__codelineno-47-27" name="__codelineno-47-27"></a>            <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">drawer</span><span class="err">.</span><span class="na">toggle</span><span class="err">()&quot;</span><span class="p">&gt;</span>
</span><span id="__span-47-28"><a id="__codelineno-47-28" name="__codelineno-47-28"></a>            <span class="p">&lt;</span><span class="nt">mat-icon</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Side nav toggle icon&quot;</span><span class="p">&gt;</span>menu<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-47-29"><a id="__codelineno-47-29" name="__codelineno-47-29"></a>          <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-47-30"><a id="__codelineno-47-30" name="__codelineno-47-30"></a>        }
</span><span id="__span-47-31"><a id="__codelineno-47-31" name="__codelineno-47-31"></a>        <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Nutzerinnenverwaltung<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span><span id="__span-47-32"><a id="__codelineno-47-32" name="__codelineno-47-32"></a><span class="hll">        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;example-spacer&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span id="__span-47-33"><a id="__codelineno-47-33" name="__codelineno-47-33"></a><span class="hll">        @if(loggedIn()) {
</span></span><span id="__span-47-34"><a id="__codelineno-47-34" name="__codelineno-47-34"></a><span class="hll">          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;smalltext&quot;</span><span class="p">&gt;</span>{{ user().username }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span id="__span-47-35"><a id="__codelineno-47-35" name="__codelineno-47-35"></a><span class="hll">          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-icon-button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;example-icon logout-icon&quot;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;logout icon&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=</span> <span class="err">&quot;</span><span class="na">logout</span><span class="err">()&quot;</span><span class="p">&gt;</span>
</span></span><span id="__span-47-36"><a id="__codelineno-47-36" name="__codelineno-47-36"></a><span class="hll">            <span class="p">&lt;</span><span class="nt">mat-icon</span><span class="p">&gt;</span>logout<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span></span><span id="__span-47-37"><a id="__codelineno-47-37" name="__codelineno-47-37"></a><span class="hll">          <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-47-38"><a id="__codelineno-47-38" name="__codelineno-47-38"></a><span class="hll">        } @else {
</span></span><span id="__span-47-39"><a id="__codelineno-47-39" name="__codelineno-47-39"></a><span class="hll">          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-icon-button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;example-icon login-icon&quot;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;login icon&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=</span> <span class="err">&quot;</span><span class="na">login</span><span class="err">()&quot;</span><span class="p">&gt;</span>
</span></span><span id="__span-47-40"><a id="__codelineno-47-40" name="__codelineno-47-40"></a><span class="hll">            <span class="p">&lt;</span><span class="nt">mat-icon</span><span class="p">&gt;</span>login<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span></span><span id="__span-47-41"><a id="__codelineno-47-41" name="__codelineno-47-41"></a><span class="hll">          <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-47-42"><a id="__codelineno-47-42" name="__codelineno-47-42"></a><span class="hll">        }
</span></span><span id="__span-47-43"><a id="__codelineno-47-43" name="__codelineno-47-43"></a>    <span class="p">&lt;/</span><span class="nt">mat-toolbar</span><span class="p">&gt;</span>
</span><span id="__span-47-44"><a id="__codelineno-47-44" name="__codelineno-47-44"></a>    <span class="cm">&lt;!-- Add Content Here --&gt;</span>
</span><span id="__span-47-45"><a id="__codelineno-47-45" name="__codelineno-47-45"></a>    <span class="p">&lt;</span><span class="nt">router-outlet</span><span class="p">&gt;&lt;/</span><span class="nt">router-outlet</span><span class="p">&gt;</span>
</span><span id="__span-47-46"><a id="__codelineno-47-46" name="__codelineno-47-46"></a>  <span class="p">&lt;/</span><span class="nt">mat-sidenav-content</span><span class="p">&gt;</span>
</span><span id="__span-47-47"><a id="__codelineno-47-47" name="__codelineno-47-47"></a><span class="p">&lt;/</span><span class="nt">mat-sidenav-container</span><span class="p">&gt;</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-css highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-48-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-48-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-48-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-48-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-48-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-48-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-48-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-48-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-48-10">10</a></span>
<span class="normal"><a href="#__codelineno-48-11">11</a></span>
<span class="normal"><a href="#__codelineno-48-12">12</a></span>
<span class="normal"><a href="#__codelineno-48-13">13</a></span>
<span class="normal"><a href="#__codelineno-48-14">14</a></span>
<span class="normal"><a href="#__codelineno-48-15">15</a></span>
<span class="normal"><a href="#__codelineno-48-16">16</a></span>
<span class="normal"><a href="#__codelineno-48-17">17</a></span>
<span class="normal"><a href="#__codelineno-48-18">18</a></span>
<span class="normal"><a href="#__codelineno-48-19">19</a></span>
<span class="normal"><a href="#__codelineno-48-20">20</a></span>
<span class="normal"><a href="#__codelineno-48-21">21</a></span>
<span class="normal"><a href="#__codelineno-48-22">22</a></span>
<span class="normal"><a href="#__codelineno-48-23">23</a></span>
<span class="normal"><a href="#__codelineno-48-24">24</a></span>
<span class="normal"><a href="#__codelineno-48-25">25</a></span>
<span class="normal"><a href="#__codelineno-48-26">26</a></span>
<span class="normal"><a href="#__codelineno-48-27">27</a></span>
<span class="normal"><a href="#__codelineno-48-28">28</a></span>
<span class="normal"><a href="#__codelineno-48-29">29</a></span>
<span class="normal"><a href="#__codelineno-48-30">30</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="p">.</span><span class="nc">sidenav-container</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="w">  </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="p">}</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4"></a>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="p">.</span><span class="nc">sidenav</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7"></a><span class="p">}</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8"></a>
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9"></a><span class="p">.</span><span class="nc">sidenav</span><span class="w"> </span><span class="p">.</span><span class="nc">mat-toolbar</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-10"><a id="__codelineno-48-10" name="__codelineno-48-10"></a><span class="w">  </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">inherit</span><span class="p">;</span>
</span><span id="__span-48-11"><a id="__codelineno-48-11" name="__codelineno-48-11"></a><span class="p">}</span>
</span><span id="__span-48-12"><a id="__codelineno-48-12" name="__codelineno-48-12"></a>
</span><span id="__span-48-13"><a id="__codelineno-48-13" name="__codelineno-48-13"></a><span class="p">.</span><span class="nc">mat-toolbar</span><span class="p">.</span><span class="nc">mat-primary</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-14"><a id="__codelineno-48-14" name="__codelineno-48-14"></a><span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">sticky</span><span class="p">;</span>
</span><span id="__span-48-15"><a id="__codelineno-48-15" name="__codelineno-48-15"></a><span class="w">  </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-48-16"><a id="__codelineno-48-16" name="__codelineno-48-16"></a><span class="w">  </span><span class="k">z-index</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-48-17"><a id="__codelineno-48-17" name="__codelineno-48-17"></a><span class="p">}</span>
</span><span id="__span-48-18"><a id="__codelineno-48-18" name="__codelineno-48-18"></a>
</span><span id="__span-48-19"><a id="__codelineno-48-19" name="__codelineno-48-19"></a><span class="nt">a</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-20"><a id="__codelineno-48-20" name="__codelineno-48-20"></a><span class="w">  </span><span class="k">text-decoration</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
</span><span id="__span-48-21"><a id="__codelineno-48-21" name="__codelineno-48-21"></a><span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">black</span><span class="p">;</span>
</span><span id="__span-48-22"><a id="__codelineno-48-22" name="__codelineno-48-22"></a><span class="p">}</span>
</span><span id="__span-48-23"><a id="__codelineno-48-23" name="__codelineno-48-23"></a>
</span><span id="__span-48-24"><a id="__codelineno-48-24" name="__codelineno-48-24"></a><span class="hll"><span class="p">.</span><span class="nc">example-spacer</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-48-25"><a id="__codelineno-48-25" name="__codelineno-48-25"></a><span class="hll"><span class="w">  </span><span class="k">flex</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span>
</span></span><span id="__span-48-26"><a id="__codelineno-48-26" name="__codelineno-48-26"></a><span class="hll"><span class="p">}</span>
</span></span><span id="__span-48-27"><a id="__codelineno-48-27" name="__codelineno-48-27"></a>
</span><span id="__span-48-28"><a id="__codelineno-48-28" name="__codelineno-48-28"></a><span class="hll"><span class="p">.</span><span class="nc">smalltext</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-48-29"><a id="__codelineno-48-29" name="__codelineno-48-29"></a><span class="hll"><span class="w">  </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6</span><span class="kt">em</span><span class="p">;</span>
</span></span><span id="__span-48-30"><a id="__codelineno-48-30" name="__codelineno-48-30"></a><span class="hll"><span class="p">}</span>
</span></span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Erläuterungen:</p>
<ul>
<li>In der <code>nav.component.ts</code> definieren wir selbst ein <em>Signal</em> <code>loggedIn</code>. Der Wert dieses <em>Signals</em> berechnet sich aus dem Wert des <em>Signals</em> <code>loggedIn</code> aus dem <code>AuthService</code>. Dieses <em>Signal</em> hätte hier auch direkt verwendet werden können, aber wir wollten einmal die <code>computed()</code>-Funktion von <em>Signals</em> zeigen. </li>
<li>In der <code>nav.component.html</code> lesen wir den Wert des <em>Signals</em> mithilfe von <code>loggedIn()</code> aus. Ist er <code>true</code>, wird <code>Logout</code> angezeigt, ist er <code>false</code>, zeigt das Menü <code>Login</code>.</li>
<li>Für <code>Logout</code> wurde eine Funktion <code>logout()</code> definiert, die <code>user</code> und <code>token</code> im <code>AuthService</code> zurücksetzt und die auf die <code>Login</code>-Seite navigiert. Die <code>login()</code>-Funktion leitet einfach nur auf die <code>Login</code>-Seite weiter.</li>
</ul>
<h2 id="guards">Guards<a class="headerlink" href="#guards" title="Permanent link">&para;</a></h2>
<p>Mithilfe von <a href="https://angular.io/guide/router-tutorial-toh#milestone-5-route-guards">Guards</a> können wir festlegen, dass Komponenten z.B. nur dann aufgerufen werden können, wenn man eingeloggt ist (aber nicht, wenn man nicht eingeloggt ist) oder wenn man z.B. als <code>admin</code> eingeloggt (und nicht nur als <code>user</code>) eingeloggt ist. Wir werden hier demonstrieren, wie man solche Guards implementiert und verwendet. Dazu erstellen wir uns zunächst eine weitere Komponente. Die Komponente <code>userlist</code> soll alle <code>user</code> aus der Datenbank auflisten (als Tabelle). Diese Komponente soll nur aufgerufen werden können, wenn man als <code>admin</code> eingelogged ist. Außerdem werden wir den Aufruf der <code>HomeComponent</code> nur für den Fall erlauben, dass man eingelogged ist.</p>
<h3 id="userlist-komponente"><code>userlist</code>-Komponente<a class="headerlink" href="#userlist-komponente" title="Permanent link">&para;</a></h3>
<p>Die <code>userlist</code>-Komponente erstellen wir mithilfe des Material-Design-Schemas <a href="https://material.angular.io/guide/schematics#table-schematic">table</a>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>ng<span class="w"> </span>generate<span class="w"> </span>@angular/material:table<span class="w"> </span>userlist
</span></code></pre></div>
<p>Für das vereinfachte Beispiel hier haben wir jedoch die z.B. die <a href="https://material.angular.io/components/table/overview#pagination">Paginierung</a> weggelassen. Viele Beispiele zu Tabellen mit Sortierung, Filterung, Paginierung usw. finden Sie <a href="https://material.angular.io/components/table/overview">hier</a>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="28:3"><input checked="checked" id="__tabbed_28_1" name="__tabbed_28" type="radio" /><input id="__tabbed_28_2" name="__tabbed_28" type="radio" /><input id="__tabbed_28_3" name="__tabbed_28" type="radio" /><div class="tabbed-labels"><label for="__tabbed_28_1">userlist-datasource.ts</label><label for="__tabbed_28_2">userlist.component.ts</label><label for="__tabbed_28_3">userlist.component.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-50-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-50-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-50-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-50-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-50-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-50-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-50-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-50-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-50-10">10</a></span>
<span class="normal"><a href="#__codelineno-50-11">11</a></span>
<span class="normal"><a href="#__codelineno-50-12">12</a></span>
<span class="normal"><a href="#__codelineno-50-13">13</a></span>
<span class="normal"><a href="#__codelineno-50-14">14</a></span>
<span class="normal"><a href="#__codelineno-50-15">15</a></span>
<span class="normal"><a href="#__codelineno-50-16">16</a></span>
<span class="normal"><a href="#__codelineno-50-17">17</a></span>
<span class="normal"><a href="#__codelineno-50-18">18</a></span>
<span class="normal"><a href="#__codelineno-50-19">19</a></span>
<span class="normal"><a href="#__codelineno-50-20">20</a></span>
<span class="normal"><a href="#__codelineno-50-21">21</a></span>
<span class="normal"><a href="#__codelineno-50-22">22</a></span>
<span class="normal"><a href="#__codelineno-50-23">23</a></span>
<span class="normal"><a href="#__codelineno-50-24">24</a></span>
<span class="normal"><a href="#__codelineno-50-25">25</a></span>
<span class="normal"><a href="#__codelineno-50-26">26</a></span>
<span class="normal"><a href="#__codelineno-50-27">27</a></span>
<span class="normal"><a href="#__codelineno-50-28">28</a></span>
<span class="normal"><a href="#__codelineno-50-29">29</a></span>
<span class="normal"><a href="#__codelineno-50-30">30</a></span>
<span class="normal"><a href="#__codelineno-50-31">31</a></span>
<span class="normal"><a href="#__codelineno-50-32">32</a></span>
<span class="normal"><a href="#__codelineno-50-33">33</a></span>
<span class="normal"><a href="#__codelineno-50-34">34</a></span>
<span class="normal"><a href="#__codelineno-50-35">35</a></span>
<span class="normal"><a href="#__codelineno-50-36">36</a></span>
<span class="normal"><a href="#__codelineno-50-37">37</a></span>
<span class="normal"><a href="#__codelineno-50-38">38</a></span>
<span class="normal"><a href="#__codelineno-50-39">39</a></span>
<span class="normal"><a href="#__codelineno-50-40">40</a></span>
<span class="normal"><a href="#__codelineno-50-41">41</a></span>
<span class="normal"><a href="#__codelineno-50-42">42</a></span>
<span class="normal"><a href="#__codelineno-50-43">43</a></span>
<span class="normal"><a href="#__codelineno-50-44">44</a></span>
<span class="normal"><a href="#__codelineno-50-45">45</a></span>
<span class="normal"><a href="#__codelineno-50-46">46</a></span>
<span class="normal"><a href="#__codelineno-50-47">47</a></span>
<span class="normal"><a href="#__codelineno-50-48">48</a></span>
<span class="normal"><a href="#__codelineno-50-49">49</a></span>
<span class="normal"><a href="#__codelineno-50-50">50</a></span>
<span class="normal"><a href="#__codelineno-50-51">51</a></span>
<span class="normal"><a href="#__codelineno-50-52">52</a></span>
<span class="normal"><a href="#__codelineno-50-53">53</a></span>
<span class="normal"><a href="#__codelineno-50-54">54</a></span>
<span class="normal"><a href="#__codelineno-50-55">55</a></span>
<span class="normal"><a href="#__codelineno-50-56">56</a></span>
<span class="normal"><a href="#__codelineno-50-57">57</a></span>
<span class="normal"><a href="#__codelineno-50-58">58</a></span>
<span class="normal"><a href="#__codelineno-50-59">59</a></span>
<span class="normal"><a href="#__codelineno-50-60">60</a></span>
<span class="normal"><a href="#__codelineno-50-61">61</a></span>
<span class="normal"><a href="#__codelineno-50-62">62</a></span>
<span class="normal"><a href="#__codelineno-50-63">63</a></span>
<span class="normal"><a href="#__codelineno-50-64">64</a></span>
<span class="normal"><a href="#__codelineno-50-65">65</a></span>
<span class="normal"><a href="#__codelineno-50-66">66</a></span>
<span class="normal"><a href="#__codelineno-50-67">67</a></span>
<span class="normal"><a href="#__codelineno-50-68">68</a></span>
<span class="normal"><a href="#__codelineno-50-69">69</a></span>
<span class="normal"><a href="#__codelineno-50-70">70</a></span>
<span class="normal"><a href="#__codelineno-50-71">71</a></span>
<span class="normal"><a href="#__codelineno-50-72">72</a></span>
<span class="normal"><a href="#__codelineno-50-73">73</a></span>
<span class="normal"><a href="#__codelineno-50-74">74</a></span>
<span class="normal"><a href="#__codelineno-50-75">75</a></span>
<span class="normal"><a href="#__codelineno-50-76">76</a></span>
<span class="normal"><a href="#__codelineno-50-77">77</a></span>
<span class="normal"><a href="#__codelineno-50-78">78</a></span>
<span class="normal"><a href="#__codelineno-50-79">79</a></span>
<span class="normal"><a href="#__codelineno-50-80">80</a></span>
<span class="normal"><a href="#__codelineno-50-81">81</a></span>
<span class="normal"><a href="#__codelineno-50-82">82</a></span>
<span class="normal"><a href="#__codelineno-50-83">83</a></span>
<span class="normal"><a href="#__codelineno-50-84">84</a></span>
<span class="normal"><a href="#__codelineno-50-85">85</a></span>
<span class="normal"><a href="#__codelineno-50-86">86</a></span>
<span class="normal"><a href="#__codelineno-50-87">87</a></span>
<span class="normal"><a href="#__codelineno-50-88">88</a></span>
<span class="normal"><a href="#__codelineno-50-89">89</a></span>
<span class="normal"><a href="#__codelineno-50-90">90</a></span>
<span class="normal"><a href="#__codelineno-50-91">91</a></span>
<span class="normal"><a href="#__codelineno-50-92">92</a></span>
<span class="normal"><a href="#__codelineno-50-93">93</a></span>
<span class="normal"><a href="#__codelineno-50-94">94</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DataSource</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/cdk/collections&#39;</span><span class="p">;</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatPaginator</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/paginator&#39;</span><span class="p">;</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatSort</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/sort&#39;</span><span class="p">;</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">map</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rxjs/operators&#39;</span><span class="p">;</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Observable</span><span class="p">,</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">observableOf</span><span class="p">,</span><span class="w"> </span><span class="nx">merge</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/user&#39;</span><span class="p">;</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AuthService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/auth.service&#39;</span><span class="p">;</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inject</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9"></a>
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10"></a>
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11"></a><span class="cm">/**</span>
</span><span id="__span-50-12"><a id="__codelineno-50-12" name="__codelineno-50-12"></a><span class="cm"> * Data source for the Userlist view. This class should</span>
</span><span id="__span-50-13"><a id="__codelineno-50-13" name="__codelineno-50-13"></a><span class="cm"> * encapsulate all logic for fetching and manipulating the displayed data</span>
</span><span id="__span-50-14"><a id="__codelineno-50-14" name="__codelineno-50-14"></a><span class="cm"> * (including sorting, pagination, and filtering).</span>
</span><span id="__span-50-15"><a id="__codelineno-50-15" name="__codelineno-50-15"></a><span class="cm"> */</span>
</span><span id="__span-50-16"><a id="__codelineno-50-16" name="__codelineno-50-16"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">UserlistDataSource</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">DataSource</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-17"><a id="__codelineno-50-17" name="__codelineno-50-17"></a><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">auth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">AuthService</span><span class="p">)</span>
</span><span id="__span-50-18"><a id="__codelineno-50-18" name="__codelineno-50-18"></a><span class="w">  </span><span class="nx">data</span><span class="o">!:</span><span class="w"> </span><span class="nx">User</span><span class="p">[];</span>
</span><span id="__span-50-19"><a id="__codelineno-50-19" name="__codelineno-50-19"></a><span class="w">  </span><span class="nx">paginator</span><span class="o">:</span><span class="w"> </span><span class="nx">MatPaginator</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">undefined</span><span class="p">;</span>
</span><span id="__span-50-20"><a id="__codelineno-50-20" name="__codelineno-50-20"></a><span class="w">  </span><span class="nx">sort</span><span class="o">:</span><span class="w"> </span><span class="nx">MatSort</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">undefined</span><span class="p">;</span>
</span><span id="__span-50-21"><a id="__codelineno-50-21" name="__codelineno-50-21"></a>
</span><span id="__span-50-22"><a id="__codelineno-50-22" name="__codelineno-50-22"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-23"><a id="__codelineno-50-23" name="__codelineno-50-23"></a><span class="w">    </span><span class="k">super</span><span class="p">();</span>
</span><span id="__span-50-24"><a id="__codelineno-50-24" name="__codelineno-50-24"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">getAllUsers</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">({</span>
</span><span id="__span-50-25"><a id="__codelineno-50-25" name="__codelineno-50-25"></a><span class="w">      </span><span class="nx">next</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-26"><a id="__codelineno-50-26" name="__codelineno-50-26"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">response</span><span class="p">;</span>
</span><span id="__span-50-27"><a id="__codelineno-50-27" name="__codelineno-50-27"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;this.users&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
</span><span id="__span-50-28"><a id="__codelineno-50-28" name="__codelineno-50-28"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-50-29"><a id="__codelineno-50-29" name="__codelineno-50-29"></a><span class="w">      </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">),</span>
</span><span id="__span-50-30"><a id="__codelineno-50-30" name="__codelineno-50-30"></a><span class="w">      </span><span class="nx">complete</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;getAllUsers() complete&#39;</span><span class="p">)</span>
</span><span id="__span-50-31"><a id="__codelineno-50-31" name="__codelineno-50-31"></a><span class="w">  </span><span class="p">});</span>
</span><span id="__span-50-32"><a id="__codelineno-50-32" name="__codelineno-50-32"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-50-33"><a id="__codelineno-50-33" name="__codelineno-50-33"></a>
</span><span id="__span-50-34"><a id="__codelineno-50-34" name="__codelineno-50-34"></a><span class="w">  </span><span class="cm">/**</span>
</span><span id="__span-50-35"><a id="__codelineno-50-35" name="__codelineno-50-35"></a><span class="cm">   * Connect this data source to the table. The table will only update when</span>
</span><span id="__span-50-36"><a id="__codelineno-50-36" name="__codelineno-50-36"></a><span class="cm">   * the returned stream emits new items.</span>
</span><span id="__span-50-37"><a id="__codelineno-50-37" name="__codelineno-50-37"></a><span class="cm">   * @returns A stream of the items to be rendered.</span>
</span><span id="__span-50-38"><a id="__codelineno-50-38" name="__codelineno-50-38"></a><span class="cm">   */</span>
</span><span id="__span-50-39"><a id="__codelineno-50-39" name="__codelineno-50-39"></a><span class="w">  </span><span class="nx">connect</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">User</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-40"><a id="__codelineno-50-40" name="__codelineno-50-40"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">paginator</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">sort</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-41"><a id="__codelineno-50-41" name="__codelineno-50-41"></a><span class="w">      </span><span class="c1">// Combine everything that affects the rendered data into one update</span>
</span><span id="__span-50-42"><a id="__codelineno-50-42" name="__codelineno-50-42"></a><span class="w">      </span><span class="c1">// stream for the data-table to consume.</span>
</span><span id="__span-50-43"><a id="__codelineno-50-43" name="__codelineno-50-43"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">merge</span><span class="p">(</span><span class="nx">observableOf</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">),</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">paginator</span><span class="p">.</span><span class="nx">page</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">sort</span><span class="p">.</span><span class="nx">sortChange</span><span class="p">)</span>
</span><span id="__span-50-44"><a id="__codelineno-50-44" name="__codelineno-50-44"></a><span class="w">        </span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">map</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-45"><a id="__codelineno-50-45" name="__codelineno-50-45"></a><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getPagedData</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getSortedData</span><span class="p">([...</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="w"> </span><span class="p">]));</span>
</span><span id="__span-50-46"><a id="__codelineno-50-46" name="__codelineno-50-46"></a><span class="w">        </span><span class="p">}));</span>
</span><span id="__span-50-47"><a id="__codelineno-50-47" name="__codelineno-50-47"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-48"><a id="__codelineno-50-48" name="__codelineno-50-48"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Please set the paginator and sort on the data source before connecting.&#39;</span><span class="p">);</span>
</span><span id="__span-50-49"><a id="__codelineno-50-49" name="__codelineno-50-49"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-50-50"><a id="__codelineno-50-50" name="__codelineno-50-50"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-50-51"><a id="__codelineno-50-51" name="__codelineno-50-51"></a>
</span><span id="__span-50-52"><a id="__codelineno-50-52" name="__codelineno-50-52"></a><span class="w">  </span><span class="cm">/**</span>
</span><span id="__span-50-53"><a id="__codelineno-50-53" name="__codelineno-50-53"></a><span class="cm">   *  Called when the table is being destroyed. Use this function, to clean up</span>
</span><span id="__span-50-54"><a id="__codelineno-50-54" name="__codelineno-50-54"></a><span class="cm">   * any open connections or free any held resources that were set up during connect.</span>
</span><span id="__span-50-55"><a id="__codelineno-50-55" name="__codelineno-50-55"></a><span class="cm">   */</span>
</span><span id="__span-50-56"><a id="__codelineno-50-56" name="__codelineno-50-56"></a><span class="w">  </span><span class="nx">disconnect</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-50-57"><a id="__codelineno-50-57" name="__codelineno-50-57"></a>
</span><span id="__span-50-58"><a id="__codelineno-50-58" name="__codelineno-50-58"></a><span class="w">  </span><span class="cm">/**</span>
</span><span id="__span-50-59"><a id="__codelineno-50-59" name="__codelineno-50-59"></a><span class="cm">   * Paginate the data (client-side). If you&#39;re using server-side pagination,</span>
</span><span id="__span-50-60"><a id="__codelineno-50-60" name="__codelineno-50-60"></a><span class="cm">   * this would be replaced by requesting the appropriate data from the server.</span>
</span><span id="__span-50-61"><a id="__codelineno-50-61" name="__codelineno-50-61"></a><span class="cm">   */</span>
</span><span id="__span-50-62"><a id="__codelineno-50-62" name="__codelineno-50-62"></a><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">getPagedData</span><span class="p">(</span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">User</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">User</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-63"><a id="__codelineno-50-63" name="__codelineno-50-63"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">paginator</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-64"><a id="__codelineno-50-64" name="__codelineno-50-64"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">startIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">paginator</span><span class="p">.</span><span class="nx">pageIndex</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">paginator</span><span class="p">.</span><span class="nx">pageSize</span><span class="p">;</span>
</span><span id="__span-50-65"><a id="__codelineno-50-65" name="__codelineno-50-65"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">startIndex</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">paginator</span><span class="p">.</span><span class="nx">pageSize</span><span class="p">);</span>
</span><span id="__span-50-66"><a id="__codelineno-50-66" name="__codelineno-50-66"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-67"><a id="__codelineno-50-67" name="__codelineno-50-67"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">data</span><span class="p">;</span>
</span><span id="__span-50-68"><a id="__codelineno-50-68" name="__codelineno-50-68"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-50-69"><a id="__codelineno-50-69" name="__codelineno-50-69"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-50-70"><a id="__codelineno-50-70" name="__codelineno-50-70"></a>
</span><span id="__span-50-71"><a id="__codelineno-50-71" name="__codelineno-50-71"></a><span class="w">  </span><span class="cm">/**</span>
</span><span id="__span-50-72"><a id="__codelineno-50-72" name="__codelineno-50-72"></a><span class="cm">   * Sort the data (client-side). If you&#39;re using server-side sorting,</span>
</span><span id="__span-50-73"><a id="__codelineno-50-73" name="__codelineno-50-73"></a><span class="cm">   * this would be replaced by requesting the appropriate data from the server.</span>
</span><span id="__span-50-74"><a id="__codelineno-50-74" name="__codelineno-50-74"></a><span class="cm">   */</span>
</span><span id="__span-50-75"><a id="__codelineno-50-75" name="__codelineno-50-75"></a><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">getSortedData</span><span class="p">(</span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">User</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">User</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-76"><a id="__codelineno-50-76" name="__codelineno-50-76"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">sort</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">sort</span><span class="p">.</span><span class="nx">active</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">sort</span><span class="p">.</span><span class="nx">direction</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-77"><a id="__codelineno-50-77" name="__codelineno-50-77"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">data</span><span class="p">;</span>
</span><span id="__span-50-78"><a id="__codelineno-50-78" name="__codelineno-50-78"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-50-79"><a id="__codelineno-50-79" name="__codelineno-50-79"></a>
</span><span id="__span-50-80"><a id="__codelineno-50-80" name="__codelineno-50-80"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-81"><a id="__codelineno-50-81" name="__codelineno-50-81"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">isAsc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">sort</span><span class="o">?</span><span class="p">.</span><span class="nx">direction</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="p">;</span>
</span><span id="__span-50-82"><a id="__codelineno-50-82" name="__codelineno-50-82"></a><span class="w">      </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sort</span><span class="o">?</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-83"><a id="__codelineno-50-83" name="__codelineno-50-83"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">compare</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">isAsc</span><span class="p">);</span>
</span><span id="__span-50-84"><a id="__codelineno-50-84" name="__codelineno-50-84"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;role&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">compare</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">role</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">role</span><span class="p">,</span><span class="w"> </span><span class="nx">isAsc</span><span class="p">);</span>
</span><span id="__span-50-85"><a id="__codelineno-50-85" name="__codelineno-50-85"></a><span class="w">        </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-50-86"><a id="__codelineno-50-86" name="__codelineno-50-86"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-50-87"><a id="__codelineno-50-87" name="__codelineno-50-87"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-50-88"><a id="__codelineno-50-88" name="__codelineno-50-88"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-50-89"><a id="__codelineno-50-89" name="__codelineno-50-89"></a><span class="p">}</span>
</span><span id="__span-50-90"><a id="__codelineno-50-90" name="__codelineno-50-90"></a>
</span><span id="__span-50-91"><a id="__codelineno-50-91" name="__codelineno-50-91"></a><span class="cm">/** Simple sort comparator for example ID/Name columns (for client-side sorting). */</span>
</span><span id="__span-50-92"><a id="__codelineno-50-92" name="__codelineno-50-92"></a><span class="kd">function</span><span class="w"> </span><span class="nx">compare</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">number</span><span class="p">,</span><span class="w"> </span><span class="nx">isAsc</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-93"><a id="__codelineno-50-93" name="__codelineno-50-93"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="nx">isAsc</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">);</span>
</span><span id="__span-50-94"><a id="__codelineno-50-94" name="__codelineno-50-94"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-51-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-51-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-51-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-51-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-51-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-51-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-51-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-51-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-51-10">10</a></span>
<span class="normal"><a href="#__codelineno-51-11">11</a></span>
<span class="normal"><a href="#__codelineno-51-12">12</a></span>
<span class="normal"><a href="#__codelineno-51-13">13</a></span>
<span class="normal"><a href="#__codelineno-51-14">14</a></span>
<span class="normal"><a href="#__codelineno-51-15">15</a></span>
<span class="normal"><a href="#__codelineno-51-16">16</a></span>
<span class="normal"><a href="#__codelineno-51-17">17</a></span>
<span class="normal"><a href="#__codelineno-51-18">18</a></span>
<span class="normal"><a href="#__codelineno-51-19">19</a></span>
<span class="normal"><a href="#__codelineno-51-20">20</a></span>
<span class="normal"><a href="#__codelineno-51-21">21</a></span>
<span class="normal"><a href="#__codelineno-51-22">22</a></span>
<span class="normal"><a href="#__codelineno-51-23">23</a></span>
<span class="normal"><a href="#__codelineno-51-24">24</a></span>
<span class="normal"><a href="#__codelineno-51-25">25</a></span>
<span class="normal"><a href="#__codelineno-51-26">26</a></span>
<span class="normal"><a href="#__codelineno-51-27">27</a></span>
<span class="normal"><a href="#__codelineno-51-28">28</a></span>
<span class="normal"><a href="#__codelineno-51-29">29</a></span>
<span class="normal"><a href="#__codelineno-51-30">30</a></span>
<span class="normal"><a href="#__codelineno-51-31">31</a></span>
<span class="normal"><a href="#__codelineno-51-32">32</a></span>
<span class="normal"><a href="#__codelineno-51-33">33</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AfterViewInit</span><span class="p">,</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">ViewChild</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatTableModule</span><span class="p">,</span><span class="w"> </span><span class="nx">MatTable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/table&#39;</span><span class="p">;</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatPaginatorModule</span><span class="p">,</span><span class="w"> </span><span class="nx">MatPaginator</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/paginator&#39;</span><span class="p">;</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatSortModule</span><span class="p">,</span><span class="w"> </span><span class="nx">MatSort</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/sort&#39;</span><span class="p">;</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">UserlistDataSource</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./userlist-datasource&#39;</span><span class="p">;</span>
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/user&#39;</span><span class="p">;</span>
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7"></a>
</span><span id="__span-51-8"><a id="__codelineno-51-8" name="__codelineno-51-8"></a><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span id="__span-51-9"><a id="__codelineno-51-9" name="__codelineno-51-9"></a><span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-userlist&#39;</span><span class="p">,</span>
</span><span id="__span-51-10"><a id="__codelineno-51-10" name="__codelineno-51-10"></a><span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./userlist.component.html&#39;</span><span class="p">,</span>
</span><span id="__span-51-11"><a id="__codelineno-51-11" name="__codelineno-51-11"></a><span class="w">  </span><span class="nx">styleUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./userlist.component.css&#39;</span><span class="p">,</span>
</span><span id="__span-51-12"><a id="__codelineno-51-12" name="__codelineno-51-12"></a><span class="w">  </span><span class="nx">standalone</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-51-13"><a id="__codelineno-51-13" name="__codelineno-51-13"></a><span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-51-14"><a id="__codelineno-51-14" name="__codelineno-51-14"></a><span class="w">    </span><span class="nx">MatTableModule</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-51-15"><a id="__codelineno-51-15" name="__codelineno-51-15"></a><span class="w">    </span><span class="nx">MatPaginatorModule</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-51-16"><a id="__codelineno-51-16" name="__codelineno-51-16"></a><span class="w">    </span><span class="nx">MatSortModule</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-51-17"><a id="__codelineno-51-17" name="__codelineno-51-17"></a><span class="p">]</span>
</span><span id="__span-51-18"><a id="__codelineno-51-18" name="__codelineno-51-18"></a><span class="p">})</span>
</span><span id="__span-51-19"><a id="__codelineno-51-19" name="__codelineno-51-19"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">UserlistComponent</span><span class="w"> </span><span class="kr">implements</span><span class="w"> </span><span class="nx">AfterViewInit</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-51-20"><a id="__codelineno-51-20" name="__codelineno-51-20"></a><span class="w">  </span><span class="err">@</span><span class="nx">ViewChild</span><span class="p">(</span><span class="nx">MatPaginator</span><span class="p">)</span><span class="w"> </span><span class="nx">paginator</span><span class="o">!:</span><span class="w"> </span><span class="nx">MatPaginator</span><span class="p">;</span>
</span><span id="__span-51-21"><a id="__codelineno-51-21" name="__codelineno-51-21"></a><span class="w">  </span><span class="err">@</span><span class="nx">ViewChild</span><span class="p">(</span><span class="nx">MatSort</span><span class="p">)</span><span class="w"> </span><span class="nx">sort</span><span class="o">!:</span><span class="w"> </span><span class="nx">MatSort</span><span class="p">;</span>
</span><span id="__span-51-22"><a id="__codelineno-51-22" name="__codelineno-51-22"></a><span class="w">  </span><span class="err">@</span><span class="nx">ViewChild</span><span class="p">(</span><span class="nx">MatTable</span><span class="p">)</span><span class="w"> </span><span class="nx">table</span><span class="o">!:</span><span class="w"> </span><span class="nx">MatTable</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-51-23"><a id="__codelineno-51-23" name="__codelineno-51-23"></a><span class="w">  </span><span class="nx">dataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">UserlistDataSource</span><span class="p">();</span>
</span><span id="__span-51-24"><a id="__codelineno-51-24" name="__codelineno-51-24"></a>
</span><span id="__span-51-25"><a id="__codelineno-51-25" name="__codelineno-51-25"></a><span class="w">  </span><span class="cm">/** Columns displayed in the table. Columns IDs can be added, removed, or reordered. */</span>
</span><span id="__span-51-26"><a id="__codelineno-51-26" name="__codelineno-51-26"></a><span class="w">  </span><span class="nx">displayedColumns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;email&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;role&#39;</span><span class="p">];</span>
</span><span id="__span-51-27"><a id="__codelineno-51-27" name="__codelineno-51-27"></a>
</span><span id="__span-51-28"><a id="__codelineno-51-28" name="__codelineno-51-28"></a><span class="w">  </span><span class="nx">ngAfterViewInit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-51-29"><a id="__codelineno-51-29" name="__codelineno-51-29"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">dataSource</span><span class="p">.</span><span class="nx">sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">sort</span><span class="p">;</span>
</span><span id="__span-51-30"><a id="__codelineno-51-30" name="__codelineno-51-30"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">dataSource</span><span class="p">.</span><span class="nx">paginator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">paginator</span><span class="p">;</span>
</span><span id="__span-51-31"><a id="__codelineno-51-31" name="__codelineno-51-31"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">table</span><span class="p">.</span><span class="nx">dataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">dataSource</span><span class="p">;</span>
</span><span id="__span-51-32"><a id="__codelineno-51-32" name="__codelineno-51-32"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-51-33"><a id="__codelineno-51-33" name="__codelineno-51-33"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-52-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-52-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-52-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-52-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-52-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-52-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-52-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-52-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-52-10">10</a></span>
<span class="normal"><a href="#__codelineno-52-11">11</a></span>
<span class="normal"><a href="#__codelineno-52-12">12</a></span>
<span class="normal"><a href="#__codelineno-52-13">13</a></span>
<span class="normal"><a href="#__codelineno-52-14">14</a></span>
<span class="normal"><a href="#__codelineno-52-15">15</a></span>
<span class="normal"><a href="#__codelineno-52-16">16</a></span>
<span class="normal"><a href="#__codelineno-52-17">17</a></span>
<span class="normal"><a href="#__codelineno-52-18">18</a></span>
<span class="normal"><a href="#__codelineno-52-19">19</a></span>
<span class="normal"><a href="#__codelineno-52-20">20</a></span>
<span class="normal"><a href="#__codelineno-52-21">21</a></span>
<span class="normal"><a href="#__codelineno-52-22">22</a></span>
<span class="normal"><a href="#__codelineno-52-23">23</a></span>
<span class="normal"><a href="#__codelineno-52-24">24</a></span>
<span class="normal"><a href="#__codelineno-52-25">25</a></span>
<span class="normal"><a href="#__codelineno-52-26">26</a></span>
<span class="normal"><a href="#__codelineno-52-27">27</a></span>
<span class="normal"><a href="#__codelineno-52-28">28</a></span>
<span class="normal"><a href="#__codelineno-52-29">29</a></span>
<span class="normal"><a href="#__codelineno-52-30">30</a></span>
<span class="normal"><a href="#__codelineno-52-31">31</a></span>
<span class="normal"><a href="#__codelineno-52-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mat-elevation-z2&quot;</span><span class="p">&gt;</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2"></a>  <span class="p">&lt;</span><span class="nt">table</span> <span class="na">mat-table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;full-width-table&quot;</span> <span class="na">matSort</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Elements&quot;</span><span class="p">&gt;</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3"></a>    <span class="cm">&lt;!-- username Column --&gt;</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4"></a>    <span class="p">&lt;</span><span class="nt">ng-container</span> <span class="na">matColumnDef</span><span class="o">=</span><span class="s">&quot;username&quot;</span><span class="p">&gt;</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5"></a>      <span class="p">&lt;</span><span class="nt">th</span> <span class="na">mat-header-cell</span> <span class="err">*</span><span class="na">matHeaderCellDef</span> <span class="na">mat-sort-header</span><span class="p">&gt;</span>Account<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6"></a>      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">mat-cell</span> <span class="err">*</span><span class="na">matCellDef</span><span class="o">=</span><span class="s">&quot;let row&quot;</span><span class="p">&gt;</span>{{row.username}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="__span-52-7"><a id="__codelineno-52-7" name="__codelineno-52-7"></a>    <span class="p">&lt;/</span><span class="nt">ng-container</span><span class="p">&gt;</span>
</span><span id="__span-52-8"><a id="__codelineno-52-8" name="__codelineno-52-8"></a>
</span><span id="__span-52-9"><a id="__codelineno-52-9" name="__codelineno-52-9"></a>    <span class="cm">&lt;!-- email Column --&gt;</span>
</span><span id="__span-52-10"><a id="__codelineno-52-10" name="__codelineno-52-10"></a>    <span class="p">&lt;</span><span class="nt">ng-container</span> <span class="na">matColumnDef</span><span class="o">=</span><span class="s">&quot;email&quot;</span><span class="p">&gt;</span>
</span><span id="__span-52-11"><a id="__codelineno-52-11" name="__codelineno-52-11"></a>      <span class="p">&lt;</span><span class="nt">th</span> <span class="na">mat-header-cell</span> <span class="err">*</span><span class="na">matHeaderCellDef</span> <span class="na">mat-sort-header</span><span class="p">&gt;</span>E-Mail<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="__span-52-12"><a id="__codelineno-52-12" name="__codelineno-52-12"></a>      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">mat-cell</span> <span class="err">*</span><span class="na">matCellDef</span><span class="o">=</span><span class="s">&quot;let row&quot;</span><span class="p">&gt;</span>{{row.email}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="__span-52-13"><a id="__codelineno-52-13" name="__codelineno-52-13"></a>    <span class="p">&lt;/</span><span class="nt">ng-container</span><span class="p">&gt;</span>
</span><span id="__span-52-14"><a id="__codelineno-52-14" name="__codelineno-52-14"></a>
</span><span id="__span-52-15"><a id="__codelineno-52-15" name="__codelineno-52-15"></a>    <span class="cm">&lt;!-- role Column --&gt;</span>
</span><span id="__span-52-16"><a id="__codelineno-52-16" name="__codelineno-52-16"></a>    <span class="p">&lt;</span><span class="nt">ng-container</span> <span class="na">matColumnDef</span><span class="o">=</span><span class="s">&quot;role&quot;</span><span class="p">&gt;</span>
</span><span id="__span-52-17"><a id="__codelineno-52-17" name="__codelineno-52-17"></a>      <span class="p">&lt;</span><span class="nt">th</span> <span class="na">mat-header-cell</span> <span class="err">*</span><span class="na">matHeaderCellDef</span> <span class="na">mat-sort-header</span><span class="p">&gt;</span>Rolle<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span><span id="__span-52-18"><a id="__codelineno-52-18" name="__codelineno-52-18"></a>      <span class="p">&lt;</span><span class="nt">td</span> <span class="na">mat-cell</span> <span class="err">*</span><span class="na">matCellDef</span><span class="o">=</span><span class="s">&quot;let row&quot;</span><span class="p">&gt;</span>{{row.role}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span id="__span-52-19"><a id="__codelineno-52-19" name="__codelineno-52-19"></a>    <span class="p">&lt;/</span><span class="nt">ng-container</span><span class="p">&gt;</span>
</span><span id="__span-52-20"><a id="__codelineno-52-20" name="__codelineno-52-20"></a>
</span><span id="__span-52-21"><a id="__codelineno-52-21" name="__codelineno-52-21"></a>    <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">mat-header-row</span> <span class="err">*</span><span class="na">matHeaderRowDef</span><span class="o">=</span><span class="s">&quot;displayedColumns&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="__span-52-22"><a id="__codelineno-52-22" name="__codelineno-52-22"></a>    <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">mat-row</span> <span class="err">*</span><span class="na">matRowDef</span><span class="o">=</span><span class="s">&quot;let row; columns: displayedColumns;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span><span id="__span-52-23"><a id="__codelineno-52-23" name="__codelineno-52-23"></a>  <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</span><span id="__span-52-24"><a id="__codelineno-52-24" name="__codelineno-52-24"></a>
</span><span id="__span-52-25"><a id="__codelineno-52-25" name="__codelineno-52-25"></a>  <span class="p">&lt;</span><span class="nt">mat-paginator</span> <span class="err">#</span><span class="na">paginator</span>
</span><span id="__span-52-26"><a id="__codelineno-52-26" name="__codelineno-52-26"></a>      <span class="err">[</span><span class="na">length</span><span class="err">]=&quot;</span><span class="na">dataSource</span><span class="err">.</span><span class="na">data</span><span class="err">.</span><span class="na">length</span><span class="err">&quot;</span>
</span><span id="__span-52-27"><a id="__codelineno-52-27" name="__codelineno-52-27"></a>      <span class="err">[</span><span class="na">pageIndex</span><span class="err">]=&quot;</span><span class="na">0</span><span class="err">&quot;</span>
</span><span id="__span-52-28"><a id="__codelineno-52-28" name="__codelineno-52-28"></a>      <span class="err">[</span><span class="na">pageSize</span><span class="err">]=&quot;</span><span class="na">10</span><span class="err">&quot;</span>
</span><span id="__span-52-29"><a id="__codelineno-52-29" name="__codelineno-52-29"></a>      <span class="err">[</span><span class="na">pageSizeOptions</span><span class="err">]=&quot;[</span><span class="na">5</span><span class="err">,</span> <span class="na">10</span><span class="err">,</span> <span class="na">20</span><span class="err">]&quot;</span>
</span><span id="__span-52-30"><a id="__codelineno-52-30" name="__codelineno-52-30"></a>      <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Select page&quot;</span><span class="p">&gt;</span>
</span><span id="__span-52-31"><a id="__codelineno-52-31" name="__codelineno-52-31"></a>  <span class="p">&lt;/</span><span class="nt">mat-paginator</span><span class="p">&gt;</span>
</span><span id="__span-52-32"><a id="__codelineno-52-32" name="__codelineno-52-32"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Die Tabelle sieht dann wie folgt aus:</p>
<p><img alt="users" src="../files/281_users.png" /></p>
<h3 id="guard-fur-den-komponentenzugriff-logged-in">Guard für den Komponentenzugriff - Logged in<a class="headerlink" href="#guard-fur-den-komponentenzugriff-logged-in" title="Permanent link">&para;</a></h3>
<p>In <a href="../routing/#routen-absichern-mit-guards">Routen absichern mit Guards</a> haben wir bereits die Grundidee von <em>Guards</em> vorgestellt. Wir wollen diese hier anwenden und beschränken uns dabei auf den <em>Guard-Typ</em> <code>CanActivate</code>. Wir wollen sicherstellen, dass die <code>HomeComponent</code> nur aktiviert werden kann, wenn man eingeloggt ist und die <code>UserlistComponent</code> nur dann, wenn man als <code>admin</code> eingelogged ist, um das Prinzip zu verdeutlichen. Wir erstellen uns also einen <code>CanActivate</code>-Guard (im Ordner <code>shared</code>):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>ng<span class="w"> </span>g<span class="w"> </span>guard<span class="w"> </span>shared/authguard<span class="w"> </span>--implements<span class="w"> </span>CanActivate
</span></code></pre></div>
<p>Diesen <code>AuthGuard</code> implementieren wir wie folgt: </p>
<div class="tabbed-set tabbed-alternate" data-tabs="29:1"><input checked="checked" id="__tabbed_29_1" name="__tabbed_29" type="radio" /><div class="tabbed-labels"><label for="__tabbed_29_1">shared/authguard.guards.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-54-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-54-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-54-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-54-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-54-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-54-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-54-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-54-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-54-10">10</a></span>
<span class="normal"><a href="#__codelineno-54-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">CanActivateFn</span><span class="p">,</span><span class="w"> </span><span class="nx">Router</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AuthService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./auth.service&#39;</span><span class="p">;</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inject</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4"></a>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">authguardLogin</span><span class="o">:</span><span class="w"> </span><span class="nx">CanActivateFn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">AuthService</span><span class="p">).</span><span class="nx">loggedIn</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">Router</span><span class="p">).</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">&#39;/login&#39;</span><span class="p">]);</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7"></a><span class="p">};</span>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8"></a>
</span><span id="__span-54-9"><a id="__codelineno-54-9" name="__codelineno-54-9"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">authguardAdmin</span><span class="o">:</span><span class="w"> </span><span class="nx">CanActivateFn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">state</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-54-10"><a id="__codelineno-54-10" name="__codelineno-54-10"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">AuthService</span><span class="p">).</span><span class="nx">isAdmin</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">Router</span><span class="p">).</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">&#39;/login&#39;</span><span class="p">]);</span>
</span><span id="__span-54-11"><a id="__codelineno-54-11" name="__codelineno-54-11"></a><span class="p">};</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Erläuterungen: </p>
<ul>
<li>Dieser <em>Guard</em> stellt zwei Funktionen zur Verfügung: <code>authguardLogin</code> und <code>authguardAdmin</code>.</li>
<li><code>authguardLogin</code> gibt bei Aufruf ein <code>true</code> zurück, wenn eine Nutzerin eingeloggt ist (<code>loggedIn()</code> aus dem <code>AuthService</code>). Wenn niemand eingeloggt ist, (wenn also <code>loggedIn()</code> ein <code>false</code> zurückgibt), dann wird die aktuelle Route nach <code>/login</code> umgeleitet. </li>
<li><code>authguardAdmin</code> gibt bei Aufruf ein <code>true</code> zurück, wenn eine Nutzerin die Rolle <code>admin</code> hat (<code>isAdmin()</code> aus dem <code>AuthService</code>). Wenn nicht, (wenn also <code>isAdmin()</code> ein <code>false</code> zurückgibt), dann wird die aktuelle Route nach <code>/login</code> umgeleitet. </li>
</ul>
<p>Hier nochmal der entsprechende <code>AuthService</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="30:1"><input checked="checked" id="__tabbed_30_1" name="__tabbed_30" type="radio" /><div class="tabbed-labels"><label for="__tabbed_30_1">shared/auth.service.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-55-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-55-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-55-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-55-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-55-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-55-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-55-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-55-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-55-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-55-10">10</a></span>
<span class="normal"><a href="#__codelineno-55-11">11</a></span>
<span class="normal"><a href="#__codelineno-55-12">12</a></span>
<span class="normal"><a href="#__codelineno-55-13">13</a></span>
<span class="normal"><a href="#__codelineno-55-14">14</a></span>
<span class="normal"><a href="#__codelineno-55-15">15</a></span>
<span class="normal"><a href="#__codelineno-55-16">16</a></span>
<span class="normal"><a href="#__codelineno-55-17">17</a></span>
<span class="normal"><a href="#__codelineno-55-18">18</a></span>
<span class="normal"><a href="#__codelineno-55-19">19</a></span>
<span class="normal"><a href="#__codelineno-55-20">20</a></span>
<span class="normal"><a href="#__codelineno-55-21">21</a></span>
<span class="normal"><a href="#__codelineno-55-22">22</a></span>
<span class="normal"><a href="#__codelineno-55-23">23</a></span>
<span class="normal"><a href="#__codelineno-55-24">24</a></span>
<span class="normal"><a href="#__codelineno-55-25">25</a></span>
<span class="normal"><a href="#__codelineno-55-26">26</a></span>
<span class="normal"><a href="#__codelineno-55-27">27</a></span>
<span class="normal"><a href="#__codelineno-55-28">28</a></span>
<span class="normal"><a href="#__codelineno-55-29">29</a></span>
<span class="normal"><a href="#__codelineno-55-30">30</a></span>
<span class="normal"><a href="#__codelineno-55-31">31</a></span>
<span class="normal"><a href="#__codelineno-55-32">32</a></span>
<span class="normal"><a href="#__codelineno-55-33">33</a></span>
<span class="normal"><a href="#__codelineno-55-34">34</a></span>
<span class="normal"><a href="#__codelineno-55-35">35</a></span>
<span class="normal"><a href="#__codelineno-55-36">36</a></span>
<span class="normal"><a href="#__codelineno-55-37">37</a></span>
<span class="normal"><a href="#__codelineno-55-38">38</a></span>
<span class="normal"><a href="#__codelineno-55-39">39</a></span>
<span class="normal"><a href="#__codelineno-55-40">40</a></span>
<span class="normal"><a href="#__codelineno-55-41">41</a></span>
<span class="normal"><a href="#__codelineno-55-42">42</a></span>
<span class="normal"><a href="#__codelineno-55-43">43</a></span>
<span class="normal"><a href="#__codelineno-55-44">44</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">HttpClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">computed</span><span class="p">,</span><span class="w"> </span><span class="nx">Injectable</span><span class="p">,</span><span class="w"> </span><span class="nx">Signal</span><span class="p">,</span><span class="w"> </span><span class="nx">signal</span><span class="p">,</span><span class="w"> </span><span class="nx">WritableSignal</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Observable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./user&#39;</span><span class="p">;</span>
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5"></a>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6"></a><span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span>
</span><span id="__span-55-7"><a id="__codelineno-55-7" name="__codelineno-55-7"></a><span class="w">  </span><span class="nx">providedIn</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;root&#39;</span>
</span><span id="__span-55-8"><a id="__codelineno-55-8" name="__codelineno-55-8"></a><span class="p">})</span>
</span><span id="__span-55-9"><a id="__codelineno-55-9" name="__codelineno-55-9"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AuthService</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-10"><a id="__codelineno-55-10" name="__codelineno-55-10"></a><span class="w">  </span><span class="nx">baseUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://localhost:3000&#39;</span><span class="p">;</span>
</span><span id="__span-55-11"><a id="__codelineno-55-11" name="__codelineno-55-11"></a><span class="w">  </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="nx">WritableSignal</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">signal</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">});</span>
</span><span id="__span-55-12"><a id="__codelineno-55-12" name="__codelineno-55-12"></a><span class="w">  </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="nx">WritableSignal</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">signal</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span id="__span-55-13"><a id="__codelineno-55-13" name="__codelineno-55-13"></a><span class="w">  </span><span class="nx">loggedIn</span><span class="o">:</span><span class="w"> </span><span class="nx">Signal</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">().</span><span class="nx">id</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">().</span><span class="nx">id</span><span class="o">!</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>
</span><span id="__span-55-14"><a id="__codelineno-55-14" name="__codelineno-55-14"></a><span class="w">  </span><span class="nx">isAdmin</span><span class="o">:</span><span class="w"> </span><span class="nx">Signal</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">().</span><span class="nx">role</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;admin&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>
</span><span id="__span-55-15"><a id="__codelineno-55-15" name="__codelineno-55-15"></a>
</span><span id="__span-55-16"><a id="__codelineno-55-16" name="__codelineno-55-16"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span><span class="w"> </span><span class="nx">http</span><span class="o">:</span><span class="w"> </span><span class="nx">HttpClient</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-55-17"><a id="__codelineno-55-17" name="__codelineno-55-17"></a>
</span><span id="__span-55-18"><a id="__codelineno-55-18" name="__codelineno-55-18"></a><span class="w">  </span><span class="nx">getAllUsers</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">User</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">{</span>
</span><span id="__span-55-19"><a id="__codelineno-55-19" name="__codelineno-55-19"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">User</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;/user&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-20"><a id="__codelineno-55-20" name="__codelineno-55-20"></a><span class="w">      </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-21"><a id="__codelineno-55-21" name="__codelineno-55-21"></a><span class="w">        </span><span class="s1">&#39;authorization&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="p">(),</span>
</span><span id="__span-55-22"><a id="__codelineno-55-22" name="__codelineno-55-22"></a><span class="w">        </span><span class="s1">&#39;username&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">().</span><span class="nx">username</span>
</span><span id="__span-55-23"><a id="__codelineno-55-23" name="__codelineno-55-23"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-55-24"><a id="__codelineno-55-24" name="__codelineno-55-24"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-55-25"><a id="__codelineno-55-25" name="__codelineno-55-25"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-55-26"><a id="__codelineno-55-26" name="__codelineno-55-26"></a>
</span><span id="__span-55-27"><a id="__codelineno-55-27" name="__codelineno-55-27"></a><span class="w">  </span><span class="nx">setUser</span><span class="p">(</span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="nx">User</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-28"><a id="__codelineno-55-28" name="__codelineno-55-28"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
</span><span id="__span-55-29"><a id="__codelineno-55-29" name="__codelineno-55-29"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">token</span><span class="p">);</span>
</span><span id="__span-55-30"><a id="__codelineno-55-30" name="__codelineno-55-30"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-55-31"><a id="__codelineno-55-31" name="__codelineno-55-31"></a>
</span><span id="__span-55-32"><a id="__codelineno-55-32" name="__codelineno-55-32"></a><span class="w">  </span><span class="nx">unsetUser</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-33"><a id="__codelineno-55-33" name="__codelineno-55-33"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">});</span>
</span><span id="__span-55-34"><a id="__codelineno-55-34" name="__codelineno-55-34"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span id="__span-55-35"><a id="__codelineno-55-35" name="__codelineno-55-35"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-55-36"><a id="__codelineno-55-36" name="__codelineno-55-36"></a>
</span><span id="__span-55-37"><a id="__codelineno-55-37" name="__codelineno-55-37"></a><span class="w">  </span><span class="nx">registerUser</span><span class="p">(</span><span class="nx">user</span><span class="o">:</span><span class="nx">User</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-38"><a id="__codelineno-55-38" name="__codelineno-55-38"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;/user/register&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">);</span>
</span><span id="__span-55-39"><a id="__codelineno-55-39" name="__codelineno-55-39"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-55-40"><a id="__codelineno-55-40" name="__codelineno-55-40"></a>
</span><span id="__span-55-41"><a id="__codelineno-55-41" name="__codelineno-55-41"></a><span class="w">  </span><span class="nx">loginUser</span><span class="p">(</span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"> </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;})</span><span class="o">:</span><span class="w"> </span><span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-42"><a id="__codelineno-55-42" name="__codelineno-55-42"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;/user/login&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">);</span>
</span><span id="__span-55-43"><a id="__codelineno-55-43" name="__codelineno-55-43"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-55-44"><a id="__codelineno-55-44" name="__codelineno-55-44"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wir fügen den <code>AuthGuard</code> nun in die <code>app.routes.ts</code> ein:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="31:1"><input checked="checked" id="__tabbed_31_1" name="__tabbed_31" type="radio" /><div class="tabbed-labels"><label for="__tabbed_31_1">app.routes.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-56-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-56-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-56-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-56-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-56-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-56-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-56-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-56-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-56-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-56-10">10</a></span>
<span class="normal"><a href="#__codelineno-56-11">11</a></span>
<span class="normal"><a href="#__codelineno-56-12">12</a></span>
<span class="normal"><a href="#__codelineno-56-13">13</a></span>
<span class="normal"><a href="#__codelineno-56-14">14</a></span>
<span class="normal"><a href="#__codelineno-56-15">15</a></span>
<span class="normal"><a href="#__codelineno-56-16">16</a></span>
<span class="normal"><a href="#__codelineno-56-17">17</a></span>
<span class="normal"><a href="#__codelineno-56-18">18</a></span>
<span class="normal"><a href="#__codelineno-56-19">19</a></span>
<span class="normal"><a href="#__codelineno-56-20">20</a></span>
<span class="normal"><a href="#__codelineno-56-21">21</a></span>
<span class="normal"><a href="#__codelineno-56-22">22</a></span>
<span class="normal"><a href="#__codelineno-56-23">23</a></span>
<span class="normal"><a href="#__codelineno-56-24">24</a></span>
<span class="normal"><a href="#__codelineno-56-25">25</a></span>
<span class="normal"><a href="#__codelineno-56-26">26</a></span>
<span class="normal"><a href="#__codelineno-56-27">27</a></span>
<span class="normal"><a href="#__codelineno-56-28">28</a></span>
<span class="normal"><a href="#__codelineno-56-29">29</a></span>
<span class="normal"><a href="#__codelineno-56-30">30</a></span>
<span class="normal"><a href="#__codelineno-56-31">31</a></span>
<span class="normal"><a href="#__codelineno-56-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./home/home.component&#39;</span><span class="p">;</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">RegisterComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./register/register.component&#39;</span><span class="p">;</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./login/login.component&#39;</span><span class="p">;</span>
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">UserlistComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./userlist/userlist.component&#39;</span><span class="p">;</span>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">authguardAdmin</span><span class="p">,</span><span class="w"> </span><span class="nx">authguardLogin</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./shared/authguard.guard&#39;</span><span class="p">;</span>
</span><span id="__span-56-7"><a id="__codelineno-56-7" name="__codelineno-56-7"></a>
</span><span id="__span-56-8"><a id="__codelineno-56-8" name="__codelineno-56-8"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="o">:</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-56-9"><a id="__codelineno-56-9" name="__codelineno-56-9"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-56-10"><a id="__codelineno-56-10" name="__codelineno-56-10"></a><span class="w">        </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-56-11"><a id="__codelineno-56-11" name="__codelineno-56-11"></a><span class="w">        </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Home&quot;</span><span class="p">,</span>
</span><span id="__span-56-12"><a id="__codelineno-56-12" name="__codelineno-56-12"></a><span class="w">        </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="p">,</span>
</span><span id="__span-56-13"><a id="__codelineno-56-13" name="__codelineno-56-13"></a><span class="w">        </span><span class="nx">pathMatch</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;full&#39;</span><span class="p">,</span>
</span><span id="__span-56-14"><a id="__codelineno-56-14" name="__codelineno-56-14"></a><span class="hll"><span class="w">        </span><span class="nx">canActivate</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">authguardLogin</span><span class="p">]</span>
</span></span><span id="__span-56-15"><a id="__codelineno-56-15" name="__codelineno-56-15"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-56-16"><a id="__codelineno-56-16" name="__codelineno-56-16"></a><span class="w">      </span><span class="p">{</span>
</span><span id="__span-56-17"><a id="__codelineno-56-17" name="__codelineno-56-17"></a><span class="w">        </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;register&quot;</span><span class="p">,</span>
</span><span id="__span-56-18"><a id="__codelineno-56-18" name="__codelineno-56-18"></a><span class="w">        </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Register&quot;</span><span class="p">,</span>
</span><span id="__span-56-19"><a id="__codelineno-56-19" name="__codelineno-56-19"></a><span class="w">        </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">RegisterComponent</span>
</span><span id="__span-56-20"><a id="__codelineno-56-20" name="__codelineno-56-20"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-56-21"><a id="__codelineno-56-21" name="__codelineno-56-21"></a><span class="w">      </span><span class="p">{</span>
</span><span id="__span-56-22"><a id="__codelineno-56-22" name="__codelineno-56-22"></a><span class="w">        </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;login&quot;</span><span class="p">,</span>
</span><span id="__span-56-23"><a id="__codelineno-56-23" name="__codelineno-56-23"></a><span class="w">        </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Login&quot;</span><span class="p">,</span>
</span><span id="__span-56-24"><a id="__codelineno-56-24" name="__codelineno-56-24"></a><span class="w">        </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">LoginComponent</span>
</span><span id="__span-56-25"><a id="__codelineno-56-25" name="__codelineno-56-25"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-56-26"><a id="__codelineno-56-26" name="__codelineno-56-26"></a><span class="w">      </span><span class="p">{</span>
</span><span id="__span-56-27"><a id="__codelineno-56-27" name="__codelineno-56-27"></a><span class="w">        </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;users&quot;</span><span class="p">,</span>
</span><span id="__span-56-28"><a id="__codelineno-56-28" name="__codelineno-56-28"></a><span class="w">        </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;All Users&quot;</span><span class="p">,</span>
</span><span id="__span-56-29"><a id="__codelineno-56-29" name="__codelineno-56-29"></a><span class="w">        </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">UserlistComponent</span><span class="p">,</span>
</span><span id="__span-56-30"><a id="__codelineno-56-30" name="__codelineno-56-30"></a><span class="hll"><span class="w">        </span><span class="nx">canActivate</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">authguardAdmin</span><span class="p">]</span>
</span></span><span id="__span-56-31"><a id="__codelineno-56-31" name="__codelineno-56-31"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-56-32"><a id="__codelineno-56-32" name="__codelineno-56-32"></a><span class="p">];</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wenn wir nun die Anwendung öffnen, dann kommen wir gar nicht auf <code>HomeComponent</code>, sondern werden stets zur <code>LoginComponent</code> geleitet. Erst wenn wir eingeloggt sind, ist die <code>HomeComponent</code> erreichbar. Die <code>UserListComponent</code> ist nur dann aufrufbar, wenn wir in der Rolle <code>admin</code> eingeloggt sind. Ansonsten würden wir auch bei Aufruf <code>/users</code> an die <code>/login</code>-Route weitergeleitet werden. </p>
<h3 id="letzte-anpassung-an-die-navcomponent">Letzte Anpassung an die NavComponent<a class="headerlink" href="#letzte-anpassung-an-die-navcomponent" title="Permanent link">&para;</a></h3>
<p>Wir passen die Menüeinträge in der <code>NavComponent</code> nun noch so an, dass <code>Home</code> im Menü erscheint, sobald wir eingeloggt sind (egal, ob als <code>admin</code> oder als <code>user</code>). Die <code>UserList</code> soll stattdessen nur aufrufbar sein, wenn wir als <code>admin</code> eingeloggt sind. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="32:2"><input checked="checked" id="__tabbed_32_1" name="__tabbed_32" type="radio" /><input id="__tabbed_32_2" name="__tabbed_32" type="radio" /><div class="tabbed-labels"><label for="__tabbed_32_1">nav.component.ts</label><label for="__tabbed_32_2">nav.component.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-57-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-57-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-57-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-57-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-57-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-57-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-57-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-57-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-57-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-57-10">10</a></span>
<span class="normal"><a href="#__codelineno-57-11">11</a></span>
<span class="normal"><a href="#__codelineno-57-12">12</a></span>
<span class="normal"><a href="#__codelineno-57-13">13</a></span>
<span class="normal"><a href="#__codelineno-57-14">14</a></span>
<span class="normal"><a href="#__codelineno-57-15">15</a></span>
<span class="normal"><a href="#__codelineno-57-16">16</a></span>
<span class="normal"><a href="#__codelineno-57-17">17</a></span>
<span class="normal"><a href="#__codelineno-57-18">18</a></span>
<span class="normal"><a href="#__codelineno-57-19">19</a></span>
<span class="normal"><a href="#__codelineno-57-20">20</a></span>
<span class="normal"><a href="#__codelineno-57-21">21</a></span>
<span class="normal"><a href="#__codelineno-57-22">22</a></span>
<span class="normal"><a href="#__codelineno-57-23">23</a></span>
<span class="normal"><a href="#__codelineno-57-24">24</a></span>
<span class="normal"><a href="#__codelineno-57-25">25</a></span>
<span class="normal"><a href="#__codelineno-57-26">26</a></span>
<span class="normal"><a href="#__codelineno-57-27">27</a></span>
<span class="normal"><a href="#__codelineno-57-28">28</a></span>
<span class="normal"><a href="#__codelineno-57-29">29</a></span>
<span class="normal"><a href="#__codelineno-57-30">30</a></span>
<span class="normal"><a href="#__codelineno-57-31">31</a></span>
<span class="normal"><a href="#__codelineno-57-32">32</a></span>
<span class="normal"><a href="#__codelineno-57-33">33</a></span>
<span class="normal"><a href="#__codelineno-57-34">34</a></span>
<span class="normal"><a href="#__codelineno-57-35">35</a></span>
<span class="normal"><a href="#__codelineno-57-36">36</a></span>
<span class="normal"><a href="#__codelineno-57-37">37</a></span>
<span class="normal"><a href="#__codelineno-57-38">38</a></span>
<span class="normal"><a href="#__codelineno-57-39">39</a></span>
<span class="normal"><a href="#__codelineno-57-40">40</a></span>
<span class="normal"><a href="#__codelineno-57-41">41</a></span>
<span class="normal"><a href="#__codelineno-57-42">42</a></span>
<span class="normal"><a href="#__codelineno-57-43">43</a></span>
<span class="normal"><a href="#__codelineno-57-44">44</a></span>
<span class="normal"><a href="#__codelineno-57-45">45</a></span>
<span class="normal"><a href="#__codelineno-57-46">46</a></span>
<span class="normal"><a href="#__codelineno-57-47">47</a></span>
<span class="normal"><a href="#__codelineno-57-48">48</a></span>
<span class="normal"><a href="#__codelineno-57-49">49</a></span>
<span class="normal"><a href="#__codelineno-57-50">50</a></span>
<span class="normal"><a href="#__codelineno-57-51">51</a></span>
<span class="normal"><a href="#__codelineno-57-52">52</a></span>
<span class="normal"><a href="#__codelineno-57-53">53</a></span>
<span class="normal"><a href="#__codelineno-57-54">54</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">computed</span><span class="p">,</span><span class="w"> </span><span class="nx">inject</span><span class="p">,</span><span class="w"> </span><span class="nx">Signal</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">BreakpointObserver</span><span class="p">,</span><span class="w"> </span><span class="nx">Breakpoints</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/cdk/layout&#39;</span><span class="p">;</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AsyncPipe</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatToolbarModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/toolbar&#39;</span><span class="p">;</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatButtonModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/button&#39;</span><span class="p">;</span>
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatSidenavModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/sidenav&#39;</span><span class="p">;</span>
</span><span id="__span-57-7"><a id="__codelineno-57-7" name="__codelineno-57-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatListModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/list&#39;</span><span class="p">;</span>
</span><span id="__span-57-8"><a id="__codelineno-57-8" name="__codelineno-57-8"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatIconModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/icon&#39;</span><span class="p">;</span>
</span><span id="__span-57-9"><a id="__codelineno-57-9" name="__codelineno-57-9"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Observable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
</span><span id="__span-57-10"><a id="__codelineno-57-10" name="__codelineno-57-10"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">map</span><span class="p">,</span><span class="w"> </span><span class="nx">shareReplay</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rxjs/operators&#39;</span><span class="p">;</span>
</span><span id="__span-57-11"><a id="__codelineno-57-11" name="__codelineno-57-11"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Router</span><span class="p">,</span><span class="w"> </span><span class="nx">RouterLink</span><span class="p">,</span><span class="w"> </span><span class="nx">RouterOutlet</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
</span><span id="__span-57-12"><a id="__codelineno-57-12" name="__codelineno-57-12"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AuthService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/auth.service&#39;</span><span class="p">;</span>
</span><span id="__span-57-13"><a id="__codelineno-57-13" name="__codelineno-57-13"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/user&#39;</span><span class="p">;</span>
</span><span id="__span-57-14"><a id="__codelineno-57-14" name="__codelineno-57-14"></a>
</span><span id="__span-57-15"><a id="__codelineno-57-15" name="__codelineno-57-15"></a><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span id="__span-57-16"><a id="__codelineno-57-16" name="__codelineno-57-16"></a><span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-nav&#39;</span><span class="p">,</span>
</span><span id="__span-57-17"><a id="__codelineno-57-17" name="__codelineno-57-17"></a><span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./nav.component.html&#39;</span><span class="p">,</span>
</span><span id="__span-57-18"><a id="__codelineno-57-18" name="__codelineno-57-18"></a><span class="w">  </span><span class="nx">styleUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./nav.component.css&#39;</span><span class="p">,</span>
</span><span id="__span-57-19"><a id="__codelineno-57-19" name="__codelineno-57-19"></a><span class="w">  </span><span class="nx">standalone</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-57-20"><a id="__codelineno-57-20" name="__codelineno-57-20"></a><span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-57-21"><a id="__codelineno-57-21" name="__codelineno-57-21"></a><span class="w">    </span><span class="nx">MatToolbarModule</span><span class="p">,</span>
</span><span id="__span-57-22"><a id="__codelineno-57-22" name="__codelineno-57-22"></a><span class="w">    </span><span class="nx">MatButtonModule</span><span class="p">,</span>
</span><span id="__span-57-23"><a id="__codelineno-57-23" name="__codelineno-57-23"></a><span class="w">    </span><span class="nx">MatSidenavModule</span><span class="p">,</span>
</span><span id="__span-57-24"><a id="__codelineno-57-24" name="__codelineno-57-24"></a><span class="w">    </span><span class="nx">MatListModule</span><span class="p">,</span>
</span><span id="__span-57-25"><a id="__codelineno-57-25" name="__codelineno-57-25"></a><span class="w">    </span><span class="nx">MatIconModule</span><span class="p">,</span>
</span><span id="__span-57-26"><a id="__codelineno-57-26" name="__codelineno-57-26"></a><span class="w">    </span><span class="nx">AsyncPipe</span><span class="p">,</span>
</span><span id="__span-57-27"><a id="__codelineno-57-27" name="__codelineno-57-27"></a><span class="w">    </span><span class="nx">RouterOutlet</span><span class="p">,</span>
</span><span id="__span-57-28"><a id="__codelineno-57-28" name="__codelineno-57-28"></a><span class="w">    </span><span class="nx">RouterLink</span>
</span><span id="__span-57-29"><a id="__codelineno-57-29" name="__codelineno-57-29"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-57-30"><a id="__codelineno-57-30" name="__codelineno-57-30"></a><span class="p">})</span>
</span><span id="__span-57-31"><a id="__codelineno-57-31" name="__codelineno-57-31"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">NavComponent</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-57-32"><a id="__codelineno-57-32" name="__codelineno-57-32"></a><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">breakpointObserver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">BreakpointObserver</span><span class="p">);</span>
</span><span id="__span-57-33"><a id="__codelineno-57-33" name="__codelineno-57-33"></a><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">auth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">AuthService</span><span class="p">);</span>
</span><span id="__span-57-34"><a id="__codelineno-57-34" name="__codelineno-57-34"></a><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">router</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">Router</span><span class="p">);</span>
</span><span id="__span-57-35"><a id="__codelineno-57-35" name="__codelineno-57-35"></a>
</span><span id="__span-57-36"><a id="__codelineno-57-36" name="__codelineno-57-36"></a><span class="w">  </span><span class="nx">loggedIn</span><span class="o">:</span><span class="w"> </span><span class="nx">Signal</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">loggedIn</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
</span><span id="__span-57-37"><a id="__codelineno-57-37" name="__codelineno-57-37"></a><span class="hll"><span class="w">  </span><span class="nx">isAdmin</span><span class="o">:</span><span class="w"> </span><span class="nx">Signal</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">isAdmin</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
</span></span><span id="__span-57-38"><a id="__codelineno-57-38" name="__codelineno-57-38"></a><span class="w">  </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="nx">Signal</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">user</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
</span><span id="__span-57-39"><a id="__codelineno-57-39" name="__codelineno-57-39"></a>
</span><span id="__span-57-40"><a id="__codelineno-57-40" name="__codelineno-57-40"></a><span class="w">  </span><span class="nx">isHandset$</span><span class="o">:</span><span class="w"> </span><span class="nx">Observable</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">breakpointObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">Breakpoints</span><span class="p">.</span><span class="nx">Handset</span><span class="p">)</span>
</span><span id="__span-57-41"><a id="__codelineno-57-41" name="__codelineno-57-41"></a><span class="w">    </span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
</span><span id="__span-57-42"><a id="__codelineno-57-42" name="__codelineno-57-42"></a><span class="w">      </span><span class="nx">map</span><span class="p">(</span><span class="nx">result</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">matches</span><span class="p">),</span>
</span><span id="__span-57-43"><a id="__codelineno-57-43" name="__codelineno-57-43"></a><span class="w">      </span><span class="nx">shareReplay</span><span class="p">()</span>
</span><span id="__span-57-44"><a id="__codelineno-57-44" name="__codelineno-57-44"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-57-45"><a id="__codelineno-57-45" name="__codelineno-57-45"></a>
</span><span id="__span-57-46"><a id="__codelineno-57-46" name="__codelineno-57-46"></a><span class="w">  </span><span class="nx">logout</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-57-47"><a id="__codelineno-57-47" name="__codelineno-57-47"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">unsetUser</span><span class="p">();</span>
</span><span id="__span-57-48"><a id="__codelineno-57-48" name="__codelineno-57-48"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">&#39;/login&#39;</span><span class="p">]);</span>
</span><span id="__span-57-49"><a id="__codelineno-57-49" name="__codelineno-57-49"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-57-50"><a id="__codelineno-57-50" name="__codelineno-57-50"></a>
</span><span id="__span-57-51"><a id="__codelineno-57-51" name="__codelineno-57-51"></a><span class="w">  </span><span class="nx">login</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-57-52"><a id="__codelineno-57-52" name="__codelineno-57-52"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">&#39;/login&#39;</span><span class="p">]);</span>
</span><span id="__span-57-53"><a id="__codelineno-57-53" name="__codelineno-57-53"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-57-54"><a id="__codelineno-57-54" name="__codelineno-57-54"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-58-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-58-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-58-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-58-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-58-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-58-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-58-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-58-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-58-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-58-10">10</a></span>
<span class="normal"><a href="#__codelineno-58-11">11</a></span>
<span class="normal"><a href="#__codelineno-58-12">12</a></span>
<span class="normal"><a href="#__codelineno-58-13">13</a></span>
<span class="normal"><a href="#__codelineno-58-14">14</a></span>
<span class="normal"><a href="#__codelineno-58-15">15</a></span>
<span class="normal"><a href="#__codelineno-58-16">16</a></span>
<span class="normal"><a href="#__codelineno-58-17">17</a></span>
<span class="normal"><a href="#__codelineno-58-18">18</a></span>
<span class="normal"><a href="#__codelineno-58-19">19</a></span>
<span class="normal"><a href="#__codelineno-58-20">20</a></span>
<span class="normal"><a href="#__codelineno-58-21">21</a></span>
<span class="normal"><a href="#__codelineno-58-22">22</a></span>
<span class="normal"><a href="#__codelineno-58-23">23</a></span>
<span class="normal"><a href="#__codelineno-58-24">24</a></span>
<span class="normal"><a href="#__codelineno-58-25">25</a></span>
<span class="normal"><a href="#__codelineno-58-26">26</a></span>
<span class="normal"><a href="#__codelineno-58-27">27</a></span>
<span class="normal"><a href="#__codelineno-58-28">28</a></span>
<span class="normal"><a href="#__codelineno-58-29">29</a></span>
<span class="normal"><a href="#__codelineno-58-30">30</a></span>
<span class="normal"><a href="#__codelineno-58-31">31</a></span>
<span class="normal"><a href="#__codelineno-58-32">32</a></span>
<span class="normal"><a href="#__codelineno-58-33">33</a></span>
<span class="normal"><a href="#__codelineno-58-34">34</a></span>
<span class="normal"><a href="#__codelineno-58-35">35</a></span>
<span class="normal"><a href="#__codelineno-58-36">36</a></span>
<span class="normal"><a href="#__codelineno-58-37">37</a></span>
<span class="normal"><a href="#__codelineno-58-38">38</a></span>
<span class="normal"><a href="#__codelineno-58-39">39</a></span>
<span class="normal"><a href="#__codelineno-58-40">40</a></span>
<span class="normal"><a href="#__codelineno-58-41">41</a></span>
<span class="normal"><a href="#__codelineno-58-42">42</a></span>
<span class="normal"><a href="#__codelineno-58-43">43</a></span>
<span class="normal"><a href="#__codelineno-58-44">44</a></span>
<span class="normal"><a href="#__codelineno-58-45">45</a></span>
<span class="normal"><a href="#__codelineno-58-46">46</a></span>
<span class="normal"><a href="#__codelineno-58-47">47</a></span>
<span class="normal"><a href="#__codelineno-58-48">48</a></span>
<span class="normal"><a href="#__codelineno-58-49">49</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="p">&lt;</span><span class="nt">mat-sidenav-container</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sidenav-container&quot;</span><span class="p">&gt;</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2"></a>  <span class="p">&lt;</span><span class="nt">mat-sidenav</span> <span class="err">#</span><span class="na">drawer</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sidenav&quot;</span> <span class="na">fixedInViewport</span>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3"></a>      <span class="err">[</span><span class="na">attr</span><span class="err">.</span><span class="na">role</span><span class="err">]=&quot;(</span><span class="na">isHandset</span><span class="err">$</span> <span class="err">|</span> <span class="na">async</span><span class="err">)</span> <span class="err">?</span> <span class="err">&#39;</span><span class="na">dialog</span><span class="err">&#39;</span> <span class="na">:</span> <span class="err">&#39;</span><span class="na">navigation</span><span class="err">&#39;&quot;</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4"></a>      <span class="err">[</span><span class="na">mode</span><span class="err">]=&quot;(</span><span class="na">isHandset</span><span class="err">$</span> <span class="err">|</span> <span class="na">async</span><span class="err">)</span> <span class="err">?</span> <span class="err">&#39;</span><span class="na">over</span><span class="err">&#39;</span> <span class="na">:</span> <span class="err">&#39;</span><span class="na">side</span><span class="err">&#39;&quot;</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5"></a>      <span class="err">[</span><span class="na">opened</span><span class="err">]=&quot;(</span><span class="na">isHandset</span><span class="err">$</span> <span class="err">|</span> <span class="na">async</span><span class="err">)</span> <span class="err">===</span> <span class="na">false</span><span class="err">&quot;</span><span class="p">&gt;</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6"></a>    <span class="p">&lt;</span><span class="nt">mat-toolbar</span><span class="p">&gt;</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7"></a>        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://freiheit.f4.htw-berlin.de/webtech/guards/#registrierung-und-login-frontend&quot;</span><span class="p">&gt;</span>WebTech<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8"></a>    <span class="p">&lt;/</span><span class="nt">mat-toolbar</span><span class="p">&gt;</span>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9"></a>    <span class="p">&lt;</span><span class="nt">mat-nav-list</span><span class="p">&gt;</span>
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10"></a>      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;</span><span class="na">register</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Register<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11"></a><span class="hll">      @if(loggedIn()) {
</span></span><span id="__span-58-12"><a id="__codelineno-58-12" name="__codelineno-58-12"></a><span class="hll">       <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;&#39;]&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span id="__span-58-13"><a id="__codelineno-58-13" name="__codelineno-58-13"></a><span class="hll">       <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">logout</span><span class="err">()&quot;</span><span class="p">&gt;</span>Logout<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span id="__span-58-14"><a id="__codelineno-58-14" name="__codelineno-58-14"></a><span class="hll">      } @else {
</span></span><span id="__span-58-15"><a id="__codelineno-58-15" name="__codelineno-58-15"></a><span class="hll">       <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;</span><span class="na">login</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span id="__span-58-16"><a id="__codelineno-58-16" name="__codelineno-58-16"></a><span class="hll">      }
</span></span><span id="__span-58-17"><a id="__codelineno-58-17" name="__codelineno-58-17"></a><span class="hll">      @if(isAdmin()) {
</span></span><span id="__span-58-18"><a id="__codelineno-58-18" name="__codelineno-58-18"></a><span class="hll">        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">mat-list-item</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;</span><span class="na">users</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>All users<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span id="__span-58-19"><a id="__codelineno-58-19" name="__codelineno-58-19"></a><span class="hll">      }
</span></span><span id="__span-58-20"><a id="__codelineno-58-20" name="__codelineno-58-20"></a>    <span class="p">&lt;/</span><span class="nt">mat-nav-list</span><span class="p">&gt;</span>
</span><span id="__span-58-21"><a id="__codelineno-58-21" name="__codelineno-58-21"></a>  <span class="p">&lt;/</span><span class="nt">mat-sidenav</span><span class="p">&gt;</span>
</span><span id="__span-58-22"><a id="__codelineno-58-22" name="__codelineno-58-22"></a>  <span class="p">&lt;</span><span class="nt">mat-sidenav-content</span><span class="p">&gt;</span>
</span><span id="__span-58-23"><a id="__codelineno-58-23" name="__codelineno-58-23"></a>    <span class="p">&lt;</span><span class="nt">mat-toolbar</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span><span class="p">&gt;</span>
</span><span id="__span-58-24"><a id="__codelineno-58-24" name="__codelineno-58-24"></a>        @if (isHandset$ | async) {
</span><span id="__span-58-25"><a id="__codelineno-58-25" name="__codelineno-58-25"></a>          <span class="p">&lt;</span><span class="nt">button</span>
</span><span id="__span-58-26"><a id="__codelineno-58-26" name="__codelineno-58-26"></a>            <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span>
</span><span id="__span-58-27"><a id="__codelineno-58-27" name="__codelineno-58-27"></a>            <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Toggle sidenav&quot;</span>
</span><span id="__span-58-28"><a id="__codelineno-58-28" name="__codelineno-58-28"></a>            <span class="na">mat-icon-button</span>
</span><span id="__span-58-29"><a id="__codelineno-58-29" name="__codelineno-58-29"></a>            <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">drawer</span><span class="err">.</span><span class="na">toggle</span><span class="err">()&quot;</span><span class="p">&gt;</span>
</span><span id="__span-58-30"><a id="__codelineno-58-30" name="__codelineno-58-30"></a>            <span class="p">&lt;</span><span class="nt">mat-icon</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Side nav toggle icon&quot;</span><span class="p">&gt;</span>menu<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-58-31"><a id="__codelineno-58-31" name="__codelineno-58-31"></a>          <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-58-32"><a id="__codelineno-58-32" name="__codelineno-58-32"></a>        }
</span><span id="__span-58-33"><a id="__codelineno-58-33" name="__codelineno-58-33"></a>        <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Nutzerinnenverwaltung<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span><span id="__span-58-34"><a id="__codelineno-58-34" name="__codelineno-58-34"></a>        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;example-spacer&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span><span id="__span-58-35"><a id="__codelineno-58-35" name="__codelineno-58-35"></a>        @if(loggedIn()) {
</span><span id="__span-58-36"><a id="__codelineno-58-36" name="__codelineno-58-36"></a>          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;smalltext&quot;</span><span class="p">&gt;</span>{{ user().username }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span><span id="__span-58-37"><a id="__codelineno-58-37" name="__codelineno-58-37"></a>          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-icon-button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;example-icon logout-icon&quot;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;logout icon&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=</span> <span class="err">&quot;</span><span class="na">logout</span><span class="err">()&quot;</span><span class="p">&gt;</span>
</span><span id="__span-58-38"><a id="__codelineno-58-38" name="__codelineno-58-38"></a>            <span class="p">&lt;</span><span class="nt">mat-icon</span><span class="p">&gt;</span>logout<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-58-39"><a id="__codelineno-58-39" name="__codelineno-58-39"></a>          <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-58-40"><a id="__codelineno-58-40" name="__codelineno-58-40"></a>        } @else {
</span><span id="__span-58-41"><a id="__codelineno-58-41" name="__codelineno-58-41"></a>          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-icon-button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;example-icon login-icon&quot;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;login icon&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=</span> <span class="err">&quot;</span><span class="na">login</span><span class="err">()&quot;</span><span class="p">&gt;</span>
</span><span id="__span-58-42"><a id="__codelineno-58-42" name="__codelineno-58-42"></a>            <span class="p">&lt;</span><span class="nt">mat-icon</span><span class="p">&gt;</span>login<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
</span><span id="__span-58-43"><a id="__codelineno-58-43" name="__codelineno-58-43"></a>          <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-58-44"><a id="__codelineno-58-44" name="__codelineno-58-44"></a>        }
</span><span id="__span-58-45"><a id="__codelineno-58-45" name="__codelineno-58-45"></a>    <span class="p">&lt;/</span><span class="nt">mat-toolbar</span><span class="p">&gt;</span>
</span><span id="__span-58-46"><a id="__codelineno-58-46" name="__codelineno-58-46"></a>    <span class="cm">&lt;!-- Add Content Here --&gt;</span>
</span><span id="__span-58-47"><a id="__codelineno-58-47" name="__codelineno-58-47"></a>    <span class="p">&lt;</span><span class="nt">router-outlet</span><span class="p">&gt;&lt;/</span><span class="nt">router-outlet</span><span class="p">&gt;</span>
</span><span id="__span-58-48"><a id="__codelineno-58-48" name="__codelineno-58-48"></a>  <span class="p">&lt;/</span><span class="nt">mat-sidenav-content</span><span class="p">&gt;</span>
</span><span id="__span-58-49"><a id="__codelineno-58-49" name="__codelineno-58-49"></a><span class="p">&lt;/</span><span class="nt">mat-sidenav-container</span><span class="p">&gt;</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="home-komponente">Home-Komponente<a class="headerlink" href="#home-komponente" title="Permanent link">&para;</a></h3>
<p>Die <code>HomeComponent</code> haben wir ganz schlicht gehalten und dient nur dem Zeigen des Zugriffs sowohl eingeloggt als <code>user</code> als auch eingeloggt als <code>admin</code>. Hier soll nur das Prinzip gezeigt werden. Für ide <code>HomeComponent</code> gilt:</p>
<ul>
<li>ist (nur) aufrufbar, wenn man eingeloggt ist (realisiert per <em>Guard</em> <code>authguardLogin()</code>),</li>
<li>zeigt generell eine <a href="https://material.angular.io/components/card/overview">Card</a>,</li>
<li>diese <em>Card</em> enthält einen <em>Button</em> (mit der Weiterleitung zur <code>UserListComponent</code>), wenn man als <code>admin</code> eingeloggt ist.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="33:3"><input checked="checked" id="__tabbed_33_1" name="__tabbed_33" type="radio" /><input id="__tabbed_33_2" name="__tabbed_33" type="radio" /><input id="__tabbed_33_3" name="__tabbed_33" type="radio" /><div class="tabbed-labels"><label for="__tabbed_33_1">home.component.ts</label><label for="__tabbed_33_2">home.component.html</label><label for="__tabbed_33_3">home.component.css</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-59-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-59-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-59-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-59-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-59-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-59-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-59-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-59-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-59-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-59-10">10</a></span>
<span class="normal"><a href="#__codelineno-59-11">11</a></span>
<span class="normal"><a href="#__codelineno-59-12">12</a></span>
<span class="normal"><a href="#__codelineno-59-13">13</a></span>
<span class="normal"><a href="#__codelineno-59-14">14</a></span>
<span class="normal"><a href="#__codelineno-59-15">15</a></span>
<span class="normal"><a href="#__codelineno-59-16">16</a></span>
<span class="normal"><a href="#__codelineno-59-17">17</a></span>
<span class="normal"><a href="#__codelineno-59-18">18</a></span>
<span class="normal"><a href="#__codelineno-59-19">19</a></span>
<span class="normal"><a href="#__codelineno-59-20">20</a></span>
<span class="normal"><a href="#__codelineno-59-21">21</a></span>
<span class="normal"><a href="#__codelineno-59-22">22</a></span>
<span class="normal"><a href="#__codelineno-59-23">23</a></span>
<span class="normal"><a href="#__codelineno-59-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">computed</span><span class="p">,</span><span class="w"> </span><span class="nx">inject</span><span class="p">,</span><span class="w"> </span><span class="nx">OnInit</span><span class="p">,</span><span class="w"> </span><span class="nx">Signal</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatCardModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/card&#39;</span><span class="p">;</span>
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MatChipsModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/material/chips&#39;</span><span class="p">;</span>
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AuthService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/auth.service&#39;</span><span class="p">;</span>
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">RouterLink</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6"></a>
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7"></a><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span id="__span-59-8"><a id="__codelineno-59-8" name="__codelineno-59-8"></a><span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-home&#39;</span><span class="p">,</span>
</span><span id="__span-59-9"><a id="__codelineno-59-9" name="__codelineno-59-9"></a><span class="w">  </span><span class="nx">standalone</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-59-10"><a id="__codelineno-59-10" name="__codelineno-59-10"></a><span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nx">MatCardModule</span><span class="p">,</span><span class="w"> </span><span class="nx">MatChipsModule</span><span class="p">,</span><span class="w"> </span><span class="nx">RouterLink</span><span class="w"> </span><span class="p">],</span>
</span><span id="__span-59-11"><a id="__codelineno-59-11" name="__codelineno-59-11"></a><span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./home.component.html&#39;</span><span class="p">,</span>
</span><span id="__span-59-12"><a id="__codelineno-59-12" name="__codelineno-59-12"></a><span class="w">  </span><span class="nx">styleUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./home.component.css&#39;</span>
</span><span id="__span-59-13"><a id="__codelineno-59-13" name="__codelineno-59-13"></a><span class="p">})</span>
</span><span id="__span-59-14"><a id="__codelineno-59-14" name="__codelineno-59-14"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="w"> </span><span class="kr">implements</span><span class="w"> </span><span class="nx">OnInit</span><span class="p">{</span>
</span><span id="__span-59-15"><a id="__codelineno-59-15" name="__codelineno-59-15"></a>
</span><span id="__span-59-16"><a id="__codelineno-59-16" name="__codelineno-59-16"></a><span class="w">  </span><span class="kr">private</span><span class="w"> </span><span class="nx">auth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inject</span><span class="p">(</span><span class="nx">AuthService</span><span class="p">);</span>
</span><span id="__span-59-17"><a id="__codelineno-59-17" name="__codelineno-59-17"></a><span class="w">  </span><span class="nx">isAdmin</span><span class="o">:</span><span class="w"> </span><span class="nx">Signal</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">computed</span><span class="p">(</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">isAdmin</span><span class="p">());</span>
</span><span id="__span-59-18"><a id="__codelineno-59-18" name="__codelineno-59-18"></a>
</span><span id="__span-59-19"><a id="__codelineno-59-19" name="__codelineno-59-19"></a>
</span><span id="__span-59-20"><a id="__codelineno-59-20" name="__codelineno-59-20"></a><span class="w">  </span><span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-59-21"><a id="__codelineno-59-21" name="__codelineno-59-21"></a><span class="w">    </span><span class="c1">// braucht man nicht - nur zum Debuggen</span>
</span><span id="__span-59-22"><a id="__codelineno-59-22" name="__codelineno-59-22"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;isAdmin : &#39;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">isAdmin</span><span class="p">())</span>
</span><span id="__span-59-23"><a id="__codelineno-59-23" name="__codelineno-59-23"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-59-24"><a id="__codelineno-59-24" name="__codelineno-59-24"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-60-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-60-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-60-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-60-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-60-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-60-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-60-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-60-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-60-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-60-10">10</a></span>
<span class="normal"><a href="#__codelineno-60-11">11</a></span>
<span class="normal"><a href="#__codelineno-60-12">12</a></span>
<span class="normal"><a href="#__codelineno-60-13">13</a></span>
<span class="normal"><a href="#__codelineno-60-14">14</a></span>
<span class="normal"><a href="#__codelineno-60-15">15</a></span>
<span class="normal"><a href="#__codelineno-60-16">16</a></span>
<span class="normal"><a href="#__codelineno-60-17">17</a></span>
<span class="normal"><a href="#__codelineno-60-18">18</a></span>
<span class="normal"><a href="#__codelineno-60-19">19</a></span>
<span class="normal"><a href="#__codelineno-60-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;space&quot;</span><span class="p">&gt;</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2"></a>    <span class="p">&lt;</span><span class="nt">mat-card</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;example-card&quot;</span> <span class="na">appearance</span><span class="o">=</span><span class="s">&quot;outlined&quot;</span><span class="p">&gt;</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3"></a>        <span class="p">&lt;</span><span class="nt">mat-card-header</span><span class="p">&gt;</span>
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4"></a>            <span class="p">&lt;</span><span class="nt">mat-card-title</span><span class="p">&gt;</span>Home-Komponente<span class="p">&lt;/</span><span class="nt">mat-card-title</span><span class="p">&gt;</span>
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5"></a>        <span class="p">&lt;/</span><span class="nt">mat-card-header</span><span class="p">&gt;</span>
</span><span id="__span-60-6"><a id="__codelineno-60-6" name="__codelineno-60-6"></a>        <span class="p">&lt;</span><span class="nt">mat-card-content</span><span class="p">&gt;</span>
</span><span id="__span-60-7"><a id="__codelineno-60-7" name="__codelineno-60-7"></a>            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hier ist Ihre eigentliche Anwendung. Die Home-Komponente kann nur aufgerufen werden, 
</span><span id="__span-60-8"><a id="__codelineno-60-8" name="__codelineno-60-8"></a>            wenn man eingeloggt ist (egal, ob als <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>admin<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> oder <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>user<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>.)<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="__span-60-9"><a id="__codelineno-60-9" name="__codelineno-60-9"></a>            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Sollten Sie <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>admin<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> sein, sehen Sie unten sogar einen Button, der 
</span><span id="__span-60-10"><a id="__codelineno-60-10" name="__codelineno-60-10"></a>                Sie zur <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>UserList<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>-Komponente weiterleitet.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="__span-60-11"><a id="__codelineno-60-11" name="__codelineno-60-11"></a>        <span class="p">&lt;/</span><span class="nt">mat-card-content</span><span class="p">&gt;</span>
</span><span id="__span-60-12"><a id="__codelineno-60-12" name="__codelineno-60-12"></a>        @if(isAdmin()) {
</span><span id="__span-60-13"><a id="__codelineno-60-13" name="__codelineno-60-13"></a>            <span class="p">&lt;</span><span class="nt">mat-card-footer</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;example-card-footer&quot;</span><span class="p">&gt;</span>
</span><span id="__span-60-14"><a id="__codelineno-60-14" name="__codelineno-60-14"></a>            <span class="p">&lt;</span><span class="nt">mat-chip-set</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;link zu login&quot;</span><span class="p">&gt;</span>
</span><span id="__span-60-15"><a id="__codelineno-60-15" name="__codelineno-60-15"></a>                <span class="p">&lt;</span><span class="nt">mat-chip</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">users</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>UserList-Komponente<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">mat-chip</span><span class="p">&gt;</span>
</span><span id="__span-60-16"><a id="__codelineno-60-16" name="__codelineno-60-16"></a>            <span class="p">&lt;/</span><span class="nt">mat-chip-set</span><span class="p">&gt;</span>
</span><span id="__span-60-17"><a id="__codelineno-60-17" name="__codelineno-60-17"></a>            <span class="p">&lt;/</span><span class="nt">mat-card-footer</span><span class="p">&gt;</span>
</span><span id="__span-60-18"><a id="__codelineno-60-18" name="__codelineno-60-18"></a>        }
</span><span id="__span-60-19"><a id="__codelineno-60-19" name="__codelineno-60-19"></a>    <span class="p">&lt;/</span><span class="nt">mat-card</span><span class="p">&gt;</span>
</span><span id="__span-60-20"><a id="__codelineno-60-20" name="__codelineno-60-20"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-css highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-61-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-61-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-61-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-61-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-61-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-61-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-61-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-61-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-61-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-61-10">10</a></span>
<span class="normal"><a href="#__codelineno-61-11">11</a></span>
<span class="normal"><a href="#__codelineno-61-12">12</a></span>
<span class="normal"><a href="#__codelineno-61-13">13</a></span>
<span class="normal"><a href="#__codelineno-61-14">14</a></span>
<span class="normal"><a href="#__codelineno-61-15">15</a></span>
<span class="normal"><a href="#__codelineno-61-16">16</a></span>
<span class="normal"><a href="#__codelineno-61-17">17</a></span>
<span class="normal"><a href="#__codelineno-61-18">18</a></span>
<span class="normal"><a href="#__codelineno-61-19">19</a></span>
<span class="normal"><a href="#__codelineno-61-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1"></a><span class="p">.</span><span class="nc">example-card</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2"></a><span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="nf">clamp</span><span class="p">(</span><span class="nf">max</span><span class="p">(</span><span class="mi">50</span><span class="kt">vw</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="kt">px</span><span class="p">),</span><span class="w"> </span><span class="mi">50</span><span class="kt">vw</span><span class="p">,</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="mi">50</span><span class="kt">vw</span><span class="p">,</span><span class="w"> </span><span class="mi">1200</span><span class="kt">px</span><span class="p">));</span>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3"></a><span class="p">}</span>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4"></a>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5"></a><span class="p">.</span><span class="nc">example-card</span><span class="w"> </span><span class="nt">p</span><span class="p">{</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7"></a><span class="p">}</span><span class="w"> </span>
</span><span id="__span-61-8"><a id="__codelineno-61-8" name="__codelineno-61-8"></a>
</span><span id="__span-61-9"><a id="__codelineno-61-9" name="__codelineno-61-9"></a><span class="p">.</span><span class="nc">example-card-footer</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-61-10"><a id="__codelineno-61-10" name="__codelineno-61-10"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-61-11"><a id="__codelineno-61-11" name="__codelineno-61-11"></a><span class="p">}</span>
</span><span id="__span-61-12"><a id="__codelineno-61-12" name="__codelineno-61-12"></a>
</span><span id="__span-61-13"><a id="__codelineno-61-13" name="__codelineno-61-13"></a><span class="p">.</span><span class="nc">space</span><span class="w"> </span><span class="nt">mat-card</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-61-14"><a id="__codelineno-61-14" name="__codelineno-61-14"></a><span class="w">    </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-61-15"><a id="__codelineno-61-15" name="__codelineno-61-15"></a><span class="w">    </span><span class="k">margin-left</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-61-16"><a id="__codelineno-61-16" name="__codelineno-61-16"></a><span class="p">}</span>
</span><span id="__span-61-17"><a id="__codelineno-61-17" name="__codelineno-61-17"></a>
</span><span id="__span-61-18"><a id="__codelineno-61-18" name="__codelineno-61-18"></a><span class="nt">a</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-61-19"><a id="__codelineno-61-19" name="__codelineno-61-19"></a><span class="w">    </span><span class="k">text-decoration</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
</span><span id="__span-61-20"><a id="__codelineno-61-20" name="__codelineno-61-20"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>Wir haben eine (sehr einfache) Nutzerverwaltung implementiert. Eine Nutzerin kann sich registrieren und einloggen. Die Registrierungsdaten werden in der Datenbank gespeichert. Das Passwort wird verschlüsselt abgelegt. Jeder Nutzerin kann eine Rolle zugewiesen werden. Abhängig davon, ob jemand eingeloggt ist bzw. in welcher Rolle, sind die Komponenten unterschiedlich erreichbar. Dies wurde mit Guards realisiert. Für das Layout wurde Angular Material verwendet. Die Konzepte für eine Dialoggestaltung, für die Erweitereung und Anbindung des Backends sowie für eine Weitereleitung auf eine andere Komponente wurden jedoch alle exemplarisch gezeigt.  </p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Fußzeile" >
        
          
          <a href="../fe-be-anbindung/" class="md-footer__link md-footer__link--prev" aria-label="Zurück: Front- &amp; Backend - Anbindung">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Zurück
              </span>
              <div class="md-ellipsis">
                Front- & Backend - Anbindung
              </div>
            </div>
          </a>
        
        
          
          <a href="../deployment/" class="md-footer__link md-footer__link--next" aria-label="Weiter: Front- &amp; Backend - Deployment">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Weiter
              </span>
              <div class="md-ellipsis">
                Front- & Backend - Deployment
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Jörn Freiheit
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["instant", "tabs", "content.code.copy", "navigation.footer"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}}</script>
    
    
      <script src="../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>